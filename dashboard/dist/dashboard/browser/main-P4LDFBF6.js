var wb=Object.defineProperty,j1=Object.defineProperties;var H1=Object.getOwnPropertyDescriptors;var yb=Object.getOwnPropertySymbols;var U1=Object.prototype.hasOwnProperty,$1=Object.prototype.propertyIsEnumerable;var bb=(t,e,n)=>e in t?wb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fe=(t,e)=>{for(var n in e||={})U1.call(e,n)&&bb(t,n,e[n]);if(yb)for(var n of yb(e))$1.call(e,n)&&bb(t,n,e[n]);return t},ht=(t,e)=>j1(t,H1(e));var z1=(t,e)=>{for(var n in e)wb(t,n,{get:e[n],enumerable:!0})};var In=null,rc=!1,Wh=1,q1=null,zn=Symbol("SIGNAL");function Re(t){let e=In;return In=t,e}function oc(){return In}var Oa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Gs(t){if(rc)throw new Error("");if(In===null)return;In.consumerOnSignalRead(t);let e=In.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=In.recomputing;if(r&&(n=e!==void 0?e.nextProducer:In.producers,n!==void 0&&n.producer===t)){In.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===In&&(!r||W1(i,In)))return;let o=Pa(In),a={producer:t,consumer:In,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};In.producersTail=a,e!==void 0?e.nextProducer=a:In.producers=a,o&&Ib(t,a)}function Db(){Wh++}function Zh(t){if(!(Pa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Wh)){if(!t.producerMustRecompute(t)&&!Zs(t)){Gh(t);return}t.producerRecomputeValue(t),Gh(t)}}function Yh(t){if(t.consumers===void 0)return;let e=rc;rc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||G1(r)}}finally{rc=e}}function Kh(){return In?.consumerAllowSignalWrites!==!1}function G1(t){t.dirty=!0,Yh(t),t.consumerMarkedDirty?.(t)}function Gh(t){t.dirty=!1,t.lastCleanEpoch=Wh}function ka(t){return t&&Eb(t),Re(t)}function Eb(t){t.producersTail=void 0,t.recomputing=!0}function Ws(t,e){Re(e),t&&Cb(t)}function Cb(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Pa(t))do n=Qh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Zs(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Zh(n),r!==n.version))return!0}return!1}function xo(t){if(Pa(t)){let e=t.producers;for(;e!==void 0;)e=Qh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Ib(t,e){let n=t.consumersTail,r=Pa(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Ib(i.producer,i)}function Qh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Pa(e)){let o=e.producers;for(;o!==void 0;)o=Qh(o)}return n}function Pa(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Xh(t){q1?.(t)}function W1(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Jh(t,e){return Object.is(t,e)}function ac(t,e){let n=Object.create(Z1);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Zh(n),Gs(n),n.value===ic)throw n.error;return n.value};return r[zn]=n,Xh(n),r}var zh=Symbol("UNSET"),qh=Symbol("COMPUTING"),ic=Symbol("ERRORED"),Z1=ht(fe({},Oa),{value:zh,dirty:!0,error:null,equal:Jh,kind:"computed",producerMustRecompute(t){return t.value===zh||t.value===qh},producerRecomputeValue(t){if(t.value===qh)throw new Error("");let e=t.value;t.value=qh;let n=ka(t),r,i=!1;try{r=t.computation(),Re(null),i=e!==zh&&e!==ic&&r!==ic&&t.equal(e,r)}catch(o){r=ic,t.error=o}finally{Ws(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Y1(){throw new Error}var Sb=Y1;function _b(t){Sb(t)}function ep(t){Sb=t}var K1=null;function tp(t,e){let n=Object.create(sc);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Tb(n);return r[zn]=n,Xh(n),[r,a=>Ys(n,a),a=>xb(n,a)]}function Tb(t){return Gs(t),t.value}function Ys(t,e){Kh()||_b(t),t.equal(t.value,e)||(t.value=e,Q1(t))}function xb(t,e){Kh()||_b(t),Ys(t,e(t.value))}var sc=ht(fe({},Oa),{equal:Jh,value:void 0,kind:"signal"});function Q1(t){t.version++,Db(),Yh(t),K1?.(t)}function np(t){let e=Re(null);try{return t()}finally{Re(e)}}var rp=ht(fe({},Oa),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function ip(t){if(t.dirty=!1,t.version>0&&!Zs(t))return;t.version++;let e=ka(t);try{t.cleanup(),t.fn()}finally{Ws(t,e)}}function Le(t){return typeof t=="function"}function Fa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uc=Fa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ks(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var fn=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Le(r))try{r()}catch(o){e=o instanceof uc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Mb(o)}catch(a){e=e??[],a instanceof uc?e=[...e,...a.errors]:e.push(a)}}if(e)throw new uc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Mb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ks(n,e)}remove(e){let{_finalizers:n}=this;n&&Ks(n,e),e instanceof t&&e._removeParent(this)}};fn.EMPTY=(()=>{let t=new fn;return t.closed=!0,t})();var op=fn.EMPTY;function lc(t){return t instanceof fn||t&&"closed"in t&&Le(t.remove)&&Le(t.add)&&Le(t.unsubscribe)}function Mb(t){Le(t)?t():t.unsubscribe()}var Sr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var La={setTimeout(t,e,...n){let{delegate:r}=La;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=La;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function cc(t){La.setTimeout(()=>{let{onUnhandledError:e}=Sr;if(e)e(t);else throw t})}function Qs(){}var Ab=ap("C",void 0,void 0);function Rb(t){return ap("E",void 0,t)}function Nb(t){return ap("N",t,void 0)}function ap(t,e,n){return{kind:t,value:e,error:n}}var Mo=null;function Ba(t){if(Sr.useDeprecatedSynchronousErrorHandling){let e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mo;if(Mo=null,n)throw r}}else t()}function Ob(t){Sr.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=t)}var Ao=class extends fn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lc(e)&&e.add(this)):this.destination=eM}static create(e,n,r){return new Va(e,n,r)}next(e){this.isStopped?up(Nb(e),this):this._next(e)}error(e){this.isStopped?up(Rb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?up(Ab,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},X1=Function.prototype.bind;function sp(t,e){return X1.call(t,e)}var lp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dc(r)}else dc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dc(n)}}},Va=class extends Ao{constructor(e,n,r){super();let i;if(Le(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Sr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sp(e.next,o),error:e.error&&sp(e.error,o),complete:e.complete&&sp(e.complete,o)}):i=e}this.destination=new lp(i)}};function dc(t){Sr.useDeprecatedSynchronousErrorHandling?Ob(t):cc(t)}function J1(t){throw t}function up(t,e){let{onStoppedNotification:n}=Sr;n&&La.setTimeout(()=>n(t,e))}var eM={closed:!0,next:Qs,error:J1,complete:Qs};var ja=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _r(t){return t}function cp(...t){return dp(t)}function dp(t){return t.length===0?_r:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var rt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=nM(n)?n:new Va(n,r,i);return Ba(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kb(r),new r((i,o)=>{let a=new Va({next:s=>{try{n(s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ja](){return this}pipe(...n){return dp(n)(this)}toPromise(n){return n=kb(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function kb(t){var e;return(e=t??Sr.Promise)!==null&&e!==void 0?e:Promise}function tM(t){return t&&Le(t.next)&&Le(t.error)&&Le(t.complete)}function nM(t){return t&&t instanceof Ao||tM(t)&&lc(t)}function rM(t){return Le(t?.lift)}function st(t){return e=>{if(rM(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pt(t,e,n,r,i){return new fp(t,e,n,r,i)}var fp=class extends Ao{constructor(e,n,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(u){e.error(u)}}:super._next,this._error=i?function(s){try{i(s)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Pb=Fa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Lt=(()=>{class t extends rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new fc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Pb}next(n){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ba(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?op:(this.currentObservers=null,o.push(n),new fn(()=>{this.currentObservers=null,Ks(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new rt;return n.source=this,n}}return t.create=(e,n)=>new fc(e,n),t})(),fc=class extends Lt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:op}};var hn=class extends Lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var qn=new rt(t=>t.complete());function Fb(t){return t&&Le(t.schedule)}function Lb(t){return t[t.length-1]}function Bb(t){return Le(Lb(t))?t.pop():void 0}function Li(t){return Fb(Lb(t))?t.pop():void 0}function jb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}function Vb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ro(t){return this instanceof Ro?(this.v=t,this):new Ro(t)}function Hb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(p){return Promise.resolve(p).then(h,d)}}function s(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,v){o.push([h,m,g,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof Ro?Promise.resolve(h.value.v).then(c,d):f(o[0][2],h)}function c(h){u("next",h)}function d(h){u("throw",h)}function f(h,p){h(p),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ub(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vb=="function"?Vb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(l){o({value:l,done:s})},a)}}var hc=t=>t&&typeof t.length=="number"&&typeof t!="function";function pc(t){return Le(t?.then)}function gc(t){return Le(t[ja])}function vc(t){return Symbol.asyncIterator&&Le(t?.[Symbol.asyncIterator])}function mc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yc=iM();function bc(t){return Le(t?.[yc])}function wc(t){return Hb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ro(n.read());if(i)return yield Ro(void 0);yield yield Ro(r)}}finally{n.releaseLock()}})}function Dc(t){return Le(t?.getReader)}function rn(t){if(t instanceof rt)return t;if(t!=null){if(gc(t))return oM(t);if(hc(t))return aM(t);if(pc(t))return sM(t);if(vc(t))return $b(t);if(bc(t))return uM(t);if(Dc(t))return lM(t)}throw mc(t)}function oM(t){return new rt(e=>{let n=t[ja]();if(Le(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function aM(t){return new rt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sM(t){return new rt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,cc)})}function uM(t){return new rt(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function $b(t){return new rt(e=>{cM(t,e).catch(n=>e.error(n))})}function lM(t){return $b(wc(t))}function cM(t,e){var n,r,i,o;return jb(this,void 0,void 0,function*(){try{for(n=Ub(t);r=yield n.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Gn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ec(t,e=0){return st((n,r)=>{n.subscribe(pt(r,i=>Gn(r,t,()=>r.next(i),e),()=>Gn(r,t,()=>r.complete(),e),i=>Gn(r,t,()=>r.error(i),e)))})}function Cc(t,e=0){return st((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zb(t,e){return rn(t).pipe(Cc(e),Ec(e))}function qb(t,e){return rn(t).pipe(Cc(e),Ec(e))}function Gb(t,e){return new rt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Wb(t,e){return new rt(n=>{let r;return Gn(n,e,()=>{r=t[yc](),Gn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Le(r?.return)&&r.return()})}function Ic(t,e){if(!t)throw new Error("Iterable cannot be null");return new rt(n=>{Gn(n,e,()=>{let r=t[Symbol.asyncIterator]();Gn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Zb(t,e){return Ic(wc(t),e)}function Yb(t,e){if(t!=null){if(gc(t))return zb(t,e);if(hc(t))return Gb(t,e);if(pc(t))return qb(t,e);if(vc(t))return Ic(t,e);if(bc(t))return Wb(t,e);if(Dc(t))return Zb(t,e)}throw mc(t)}function on(t,e){return e?Yb(t,e):rn(t)}function Ke(...t){let e=Li(t);return on(t,e)}function hp(t,e){let n=Le(t)?t:()=>t,r=i=>i.error(n());return new rt(e?i=>e.schedule(r,0,i):r)}function Sc(t){return!!t&&(t instanceof rt||Le(t.lift)&&Le(t.subscribe))}var No=Fa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function St(t,e){return st((n,r)=>{let i=0;n.subscribe(pt(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:dM}=Array;function fM(t,e){return dM(e)?t(...e):t(e)}function Kb(t){return St(e=>fM(t,e))}var{isArray:hM}=Array,{getPrototypeOf:pM,prototype:gM,keys:vM}=Object;function Qb(t){if(t.length===1){let e=t[0];if(hM(e))return{args:e,keys:null};if(mM(e)){let n=vM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function mM(t){return t&&typeof t=="object"&&pM(t)===gM}function Xb(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function pp(...t){let e=Li(t),n=Bb(t),{args:r,keys:i}=Qb(t);if(r.length===0)return on([],e);let o=new rt(yM(r,e,i?a=>Xb(i,a):_r));return n?o.pipe(Kb(n)):o}function yM(t,e,n=_r){return r=>{Jb(e,()=>{let{length:i}=t,o=new Array(i),a=i,s=i;for(let u=0;u<i;u++)Jb(e,()=>{let l=on(t[u],e),c=!1;l.subscribe(pt(r,d=>{o[u]=d,c||(c=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function Jb(t,e,n){t?Gn(n,t,e):e()}function ew(t,e,n,r,i,o,a,s){let u=[],l=0,c=0,d=!1,f=()=>{d&&!u.length&&!l&&e.complete()},h=m=>l<r?p(m):u.push(m),p=m=>{o&&e.next(m),l++;let g=!1;rn(n(m,c++)).subscribe(pt(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;u.length&&l<r;){let v=u.shift();a?Gn(e,a,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(pt(e,h,()=>{d=!0,f()})),()=>{s?.()}}function Nn(t,e,n=1/0){return Le(e)?Nn((r,i)=>St((o,a)=>e(r,o,i,a))(rn(t(r,i))),n):(typeof e=="number"&&(n=e),st((r,i)=>ew(r,i,t,n)))}function tw(t=1/0){return Nn(_r,t)}function nw(){return tw(1)}function Ha(...t){return nw()(on(t,Li(t)))}function Xs(t){return new rt(e=>{rn(t()).subscribe(e)})}function Hr(t,e){return st((n,r)=>{let i=0;n.subscribe(pt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Js(t){return st((e,n)=>{let r=null,i=!1,o;r=e.subscribe(pt(n,void 0,void 0,a=>{o=rn(t(a,Js(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function _c(t,e){return Le(e)?Nn(t,e,1):Nn(t,1)}function gp(t){return st((e,n)=>{let r=!1;e.subscribe(pt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mi(t){return t<=0?()=>qn:st((e,n)=>{let r=0;e.subscribe(pt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function rw(t=bM){return st((e,n)=>{let r=!1;e.subscribe(pt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function bM(){return new No}function vp(t){return st((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yi(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Hr((i,o)=>t(i,o,r)):_r,mi(1),n?gp(e):rw(()=>new No))}function Tc(t){return t<=0?()=>qn:st((e,n)=>{let r=[];e.subscribe(pt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mp(...t){let e=Li(t);return st((n,r)=>{(e?Ha(t,n,e):Ha(t,n)).subscribe(r)})}function Ur(t,e){return st((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(pt(r,u=>{i?.unsubscribe();let l=0,c=o++;rn(t(u,c)).subscribe(i=pt(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function eu(t){return st((e,n)=>{rn(t).subscribe(pt(n,()=>n.complete(),Qs)),!n.closed&&e.subscribe(n)})}function On(t,e,n){let r=Le(t)||e||n?{next:t,error:e,complete:n}:t;return r?st((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(pt(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;s=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;s&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):_r}var yp;function xc(){return yp}function $r(t){let e=yp;return yp=t,e}var iw=Symbol("NotFound");function Ua(t){return t===iw||t?.name==="\u0275NotFound"}var Rp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",de=class extends Error{code;constructor(e,n){super(Lo(e,n)),this.code=e}};function wM(t){return`NG0${Math.abs(t)}`}function Lo(t,e){return`${wM(t)}${e?": "+e:""}`}var Bo=globalThis;function ut(t){for(let e in t)if(t[e]===ut)return e;throw Error("")}function lw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function wi(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(wi).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Np(t,e){return t?e?`${t} ${e}`:t:e||""}var DM=ut({__forward_ref__:ut});function Vo(t){return t.__forward_ref__=Vo,t.toString=function(){return wi(this())},t}function pn(t){return Op(t)?t():t}function Op(t){return typeof t=="function"&&t.hasOwnProperty(DM)&&t.__forward_ref__===Vo}function Te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ui(t){return{providers:t.providers||[],imports:t.imports||[]}}function su(t){return EM(t,Pc)}function kp(t){return su(t)!==null}function EM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function CM(t){let e=t?.[Pc]??null;return e||null}function wp(t){return t&&t.hasOwnProperty(Ac)?t[Ac]:null}var Pc=ut({\u0275prov:ut}),Ac=ut({\u0275inj:ut}),Ce=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Pp(t){return t&&!!t.\u0275providers}var Fp=ut({\u0275cmp:ut}),Lp=ut({\u0275dir:ut}),Bp=ut({\u0275pipe:ut}),Vp=ut({\u0275mod:ut}),nu=ut({\u0275fac:ut}),jo=ut({__NG_ELEMENT_ID__:ut}),ow=ut({__NG_ENV_ID__:ut});function jp(t){return Fc(t,"@NgModule"),t[Vp]||null}function $i(t){return Fc(t,"@Component"),t[Fp]||null}function Hp(t){return Fc(t,"@Directive"),t[Lp]||null}function cw(t){return Fc(t,"@Pipe"),t[Bp]||null}function Fc(t,e){if(t==null)throw new de(-919,!1)}function Up(t){return typeof t=="string"?t:t==null?"":String(t)}function dw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Up(t)}var fw=ut({ngErrorCode:ut}),IM=ut({ngErrorMessage:ut}),SM=ut({ngTokenPath:ut});function $p(t,e){return hw("",-200,e)}function Lc(t,e){throw new de(-201,!1)}function hw(t,e,n){let r=new de(e,t);return r[fw]=e,r[IM]=t,n&&(r[SM]=n),r}function _M(t){return t[fw]}var Dp;function pw(){return Dp}function kn(t){let e=Dp;return Dp=t,e}function zp(t,e,n){let r=su(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Lc(t,"")}var TM={},Oo=TM,xM="__NG_DI_FLAG__",Ep=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ko(n)||0;try{return this.injector.get(e,r&8?null:Oo,r)}catch(i){if(Ua(i))return i;throw i}}};function MM(t,e=0){let n=xc();if(n===void 0)throw new de(-203,!1);if(n===null)return zp(t,void 0,e);{let r=AM(e),i=n.retrieve(t,r);if(Ua(i)){if(r.optional)return null;throw i}return i}}function Ve(t,e=0){return(pw()||MM)(pn(t),e)}function te(t,e){return Ve(t,ko(e))}function ko(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function AM(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Cp(t){let e=[];for(let n=0;n<t.length;n++){let r=pn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let s=r[a],u=RM(s);typeof u=="number"?u===-1?i=s.token:o|=u:i=s}e.push(Ve(i,o))}else e.push(Ve(r))}return e}function RM(t){return t[xM]}function Bi(t,e){let n=t.hasOwnProperty(nu);return n?t[nu]:null}function gw(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function vw(t){return t.flat(Number.POSITIVE_INFINITY)}function Bc(t,e){t.forEach(n=>Array.isArray(n)?Bc(n,e):e(n))}function qp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function uu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function yw(t,e,n){let r=za(t,e);return r>=0?t[r|1]=n:(r=~r,mw(t,r,e,n)),r}function Vc(t,e){let n=za(t,e);if(n>=0)return t[n|1]}function za(t,e){return NM(t,e,1)}function NM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),a=t[o<<n];if(e===a)return o<<n;a>e?i=o:r=o+1}return~(i<<n)}var zi={},nr=[],Ho=new Ce(""),Gp=new Ce("",-1),Wp=new Ce(""),ru=class{get(e,n=Oo){if(n===Oo){let i=hw("",-201);throw i.name="\u0275NotFound",i}return n}};function Uo(t){return{\u0275providers:t}}function bw(t){return Uo([{provide:Ho,multi:!0,useValue:t}])}function ww(...t){return{\u0275providers:Zp(!0,t),\u0275fromNgModule:!0}}function Zp(t,...e){let n=[],r=new Set,i,o=a=>{n.push(a)};return Bc(e,a=>{let s=a;Rc(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&Dw(i,o),n}function Dw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Yp(i,o=>{e(o,r)})}}function Rc(t,e,n,r){if(t=pn(t),!t)return!1;let i=null,o=wp(t),a=!o&&$i(t);if(!o&&!a){let u=t.ngModule;if(o=wp(u),o)i=u;else return!1}else{if(a&&!a.standalone)return!1;i=t}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of u)Rc(l,e,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{Bc(o.imports,c=>{Rc(c,e,n,r)&&(l||=[],l.push(c))})}finally{}l!==void 0&&Dw(l,e)}if(!s){let l=Bi(i)||(()=>new i);e({provide:i,useFactory:l,deps:nr},i),e({provide:Wp,useValue:i,multi:!0},i),e({provide:Ho,useValue:()=>Ve(i),multi:!0},i)}let u=o.providers;if(u!=null&&!s){let l=t;Yp(u,c=>{e(c,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Yp(t,e){for(let n of t)Pp(n)&&(n=n.\u0275providers),Array.isArray(n)?Yp(n,e):e(n)}var OM=ut({provide:String,useValue:ut});function Ew(t){return t!==null&&typeof t=="object"&&OM in t}function kM(t){return!!(t&&t.useExisting)}function PM(t){return!!(t&&t.useFactory)}function Po(t){return typeof t=="function"}function Cw(t){return!!t.useClass}var lu=new Ce(""),Mc={},aw={},bp;function cu(){return bp===void 0&&(bp=new ru),bp}var gn=class{},Fo=class extends gn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Sp(e,a=>this.processProvider(a)),this.records.set(Gp,$a(void 0,this)),i.has("environment")&&this.records.set(gn,$a(void 0,this));let o=this.records.get(lu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wp,nr,{self:!0}))}retrieve(e,n){let r=ko(n)||0;try{return this.get(e,Oo,r)}catch(i){if(Ua(i))return i;throw i}}destroy(){tu(this),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return tu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){tu(this);let n=$r(this),r=kn(void 0),i;try{return e()}finally{$r(n),kn(r)}}get(e,n=Oo,r){if(tu(this),e.hasOwnProperty(ow))return e[ow](this);let i=ko(r),o,a=$r(this),s=kn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let c=jM(e)&&su(e);c&&this.injectableDefInScope(c)?l=$a(Ip(e),Mc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?cu():this.parent;return n=i&8&&n===Oo?null:n,u.get(e,n)}catch(u){let l=_M(u);throw l===-200||l===-201?new de(l,null):u}finally{kn(s),$r(a)}}resolveInjectorInitializers(){let e=Re(null),n=$r(this),r=kn(void 0),i;try{let o=this.get(Ho,nr,{self:!0});for(let a of o)a()}finally{$r(n),kn(r),Re(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(wi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=pn(e);let n=Po(e)?e:pn(e&&e.provide),r=LM(e);if(!Po(e)&&e.multi===!0){let i=this.records.get(n);i||(i=$a(void 0,Mc,!0),i.factory=()=>Cp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Re(null);try{if(n.value===aw)throw $p(wi(e));return n.value===Mc&&(n.value=aw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&VM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Re(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=pn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ip(t){let e=su(t),n=e!==null?e.factory:Bi(t);if(n!==null)return n;if(t instanceof Ce)throw new de(204,!1);if(t instanceof Function)return FM(t);throw new de(204,!1)}function FM(t){if(t.length>0)throw new de(204,!1);let n=CM(t);return n!==null?()=>n.factory(t):()=>new t}function LM(t){if(Ew(t))return $a(void 0,t.useValue);{let e=Kp(t);return $a(e,Mc)}}function Kp(t,e,n){let r;if(Po(t)){let i=pn(t);return Bi(i)||Ip(i)}else if(Ew(t))r=()=>pn(t.useValue);else if(PM(t))r=()=>t.useFactory(...Cp(t.deps||[]));else if(kM(t))r=(i,o)=>Ve(pn(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=pn(t&&(t.useClass||t.provide));if(BM(t))r=()=>new i(...Cp(t.deps));else return Bi(i)||Ip(i)}return r}function tu(t){if(t.destroyed)throw new de(205,!1)}function $a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BM(t){return!!t.deps}function VM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function jM(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Sp(t,e){for(let n of t)Array.isArray(n)?Sp(n,e):n&&Pp(n)?Sp(n.\u0275providers,e):e(n)}function Fn(t,e){let n;t instanceof Fo?(tu(t),n=t):n=new Ep(t);let r,i=$r(n),o=kn(void 0);try{return e()}finally{$r(i),kn(o)}}function Iw(){return pw()!==void 0||xc()!=null}var Tr=0,Ne=1,Pe=2,Qt=3,cr=4,dr=5,qa=6,Ga=7,Bt=8,Di=9,Ei=10,Vt=11,Wa=12,Qp=13,$o=14,rr=15,qi=16,zo=17,qr=18,du=19,Xp=20,bi=21,jc=22,Vi=23,ir=24,qo=25,Go=26,At=27,Sw=1,Jp=6,Gi=7,fu=8,Wo=9,Rt=10;function Gr(t){return Array.isArray(t)&&typeof t[Sw]=="object"}function xr(t){return Array.isArray(t)&&t[Sw]===!0}function eg(t){return(t.flags&4)!==0}function Wi(t){return t.componentOffset>-1}function Hc(t){return(t.flags&1)===1}function Wr(t){return!!t.template}function Za(t){return(t[Pe]&512)!==0}function Zo(t){return(t[Pe]&256)===256}var _w="svg",Tw="math";function fr(t){for(;Array.isArray(t);)t=t[Tr];return t}function tg(t,e){return fr(e[t])}function Zr(t,e){return fr(e[t.index])}function hu(t,e){return t.data[e]}function Uc(t,e){return t[e]}function pu(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function hr(t,e){let n=e[t];return Gr(n)?n:n[Tr]}function xw(t){return(t[Pe]&4)===4}function $c(t){return(t[Pe]&128)===128}function Mw(t){return xr(t[Qt])}function Yr(t,e){return e==null?null:t[e]}function ng(t){t[zo]=0}function rg(t){t[Pe]&1024||(t[Pe]|=1024,$c(t)&&Yo(t))}function Aw(t,e){for(;t>0;)e=e[$o],t--;return e}function gu(t){return!!(t[Pe]&9216||t[ir]?.dirty)}function zc(t){t[Ei].changeDetectionScheduler?.notify(8),t[Pe]&64&&(t[Pe]|=1024),gu(t)&&Yo(t)}function Yo(t){t[Ei].changeDetectionScheduler?.notify(0);let e=ji(t);for(;e!==null&&!(e[Pe]&8192||(e[Pe]|=8192,!$c(e)));)e=ji(e)}function ig(t,e){if(Zo(t))throw new de(911,!1);t[bi]===null&&(t[bi]=[]),t[bi].push(e)}function Rw(t,e){if(t[bi]===null)return;let n=t[bi].indexOf(e);n!==-1&&t[bi].splice(n,1)}function ji(t){let e=t[Qt];return xr(e)?e[Qt]:e}function og(t){return t[Ga]??=[]}function ag(t){return t.cleanup??=[]}function Nw(t,e,n,r){let i=og(e);i.push(n),t.firstCreatePass&&ag(t).push(r,i.length-1)}var ze={lFrame:Ww(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var _p=!1;function Ow(){return ze.lFrame.elementDepthCount}function kw(){ze.lFrame.elementDepthCount++}function sg(){ze.lFrame.elementDepthCount--}function Pw(){return ze.bindingsEnabled}function Fw(){return ze.skipHydrationRootTNode!==null}function ug(t){return ze.skipHydrationRootTNode===t}function lg(){ze.skipHydrationRootTNode=null}function qe(){return ze.lFrame.lView}function sn(){return ze.lFrame.tView}function pr(t){return ze.lFrame.contextLView=t,t[Bt]}function gr(t){return ze.lFrame.contextLView=null,t}function Ln(){let t=cg();for(;t!==null&&t.type===64;)t=t.parent;return t}function cg(){return ze.lFrame.currentTNode}function Lw(){let t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ko(t,e){let n=ze.lFrame;n.currentTNode=t,n.isParent=e}function dg(){return ze.lFrame.isParent}function Bw(){ze.lFrame.isParent=!1}function Vw(){return ze.lFrame.contextLView}function fg(){return _p}function iu(t){let e=_p;return _p=t,e}function qc(){let t=ze.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function jw(t){return ze.lFrame.bindingIndex=t}function vu(){return ze.lFrame.bindingIndex++}function Hw(t){let e=ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Uw(){return ze.lFrame.inI18n}function $w(t,e){let n=ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gc(e)}function zw(){return ze.lFrame.currentDirectiveIndex}function Gc(t){ze.lFrame.currentDirectiveIndex=t}function qw(t){let e=ze.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function hg(){return ze.lFrame.currentQueryIndex}function Wc(t){ze.lFrame.currentQueryIndex=t}function HM(t){let e=t[Ne];return e.type===2?e.declTNode:e.type===1?t[dr]:null}function pg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=HM(o),i===null||(o=o[$o],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ze.lFrame=Gw();return r.currentTNode=e,r.lView=t,!0}function Zc(t){let e=Gw(),n=t[Ne];ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Gw(){let t=ze.lFrame,e=t===null?null:t.child;return e===null?Ww(t):e}function Ww(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Zw(){let t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var gg=Zw;function Yc(){let t=Zw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Yw(t){return(ze.lFrame.contextLView=Aw(t,ze.lFrame.contextLView))[Bt]}function Ci(){return ze.lFrame.selectedIndex}function Zi(t){ze.lFrame.selectedIndex=t}function Kw(){let t=ze.lFrame;return hu(t.tView,t.selectedIndex)}function Qw(){return ze.lFrame.currentNamespace}var Xw=!0;function Kc(){return Xw}function Qc(t){Xw=t}function Tp(t,e=null,n=null,r){let i=vg(t,e,n,r);return i.resolveInjectorInitializers(),i}function vg(t,e=null,n=null,r,i=new Set){let o=[n||nr,ww(t)];return r=r||(typeof t=="object"?void 0:wi(t)),new Fo(o,e||cu(),r||null,i)}var Pn=class t{static THROW_IF_NOT_FOUND=Oo;static NULL=new ru;static create(e,n){if(Array.isArray(e))return Tp({name:""},n,e,"");{let r=e.name??"";return Tp({name:r},e.parent,e.providers,r)}}static \u0275prov=Te({token:t,providedIn:"any",factory:()=>Ve(Gp)});static __NG_ELEMENT_ID__=-1},zt=new Ce(""),or=(()=>{class t{static __NG_ELEMENT_ID__=UM;static __NG_ENV_ID__=n=>n}return t})(),Nc=class extends or{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Zo(this._lView)}onDestroy(e){let n=this._lView;return ig(n,e),()=>Rw(n,e)}};function UM(){return new Nc(qe())}var Jw=!1,Yi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new hn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new rt(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})(),xp=class extends Lt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Iw()&&(this.destroyRef=te(or,{optional:!0})??void 0,this.pendingTasks=te(Yi,{optional:!0})??void 0)}emit(e){let n=Re(null);try{super.next(e)}finally{Re(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),a=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let s=super.subscribe({next:i,error:o,complete:a});return e instanceof fn&&e.add(s),s}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Sn=xp;function Oc(...t){}function mg(t){let e,n;function r(){t=Oc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yg(t){return queueMicrotask(()=>t()),()=>{t=Oc}}var bg="isAngularZone",ou=bg+"_ID",$M=0,an=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Sn(!1);onMicrotaskEmpty=new Sn(!1);onStable=new Sn(!1);onError=new Sn(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Jw}=e;if(typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,GM(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new de(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,zM,Oc,Oc);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zM={};function wg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){mg(()=>{t.callbackScheduled=!1,Mp(t),t.isCheckStableRunning=!0,wg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Mp(t)}function GM(t){let e=()=>{qM(t)},n=$M++;t._inner=t._inner.fork({name:"angular",properties:{[bg]:!0,[ou]:n,[ou+n]:!0},onInvokeTask:(r,i,o,a,s,u)=>{if(WM(u))return r.invokeTask(o,a,s,u);try{return sw(t),r.invokeTask(o,a,s,u)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),uw(t)}},onInvoke:(r,i,o,a,s,u,l)=>{try{return sw(t),r.invoke(o,a,s,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!ZM(u)&&e(),uw(t)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,Mp(t),wg(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function Mp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uw(t){t._nesting--,wg(t)}var au=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Sn;onMicrotaskEmpty=new Sn;onStable=new Sn;onError=new Sn;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function WM(t){return eD(t,"__ignore_ng_zone__")}function ZM(t){return eD(t,"__scheduler_tick__")}function eD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var zr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mr=new Ce("",{factory:()=>{let t=te(an),e=te(gn),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(zr),n.handleError(r))})}}}),tD={provide:Ho,useValue:()=>{let t=te(zr,{optional:!0})},multi:!0},YM=new Ce("",{factory:()=>{let t=te(zt).defaultView;if(!t)return;let e=te(Mr),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),te(or).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Dg(){return Uo([bw(()=>void te(YM))])}function je(t,e){let[n,r,i]=tp(t,e?.equal),o=n,a=o[zn];return o.set=r,o.update=i,o.asReadonly=nD.bind(o),o}function nD(){let t=this[zn];if(t.readonlyFn===void 0){let e=()=>this();e[zn]=t,t.readonlyFn=e}return t.readonlyFn}var mu=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=KM}return t})();function KM(){return new mu(qe(),Ln())}var Hi=class{},yu=new Ce("",{factory:()=>!0});var Eg=new Ce("");var Xc=(()=>{class t{static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new Ap})}return t})(),Ap=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},kc=class{[zn];constructor(e){this[zn]=e}destroy(){this[zn].destroy()}};function Qo(t,e){let n=e?.injector??te(Pn),r=e?.manualCleanup!==!0?n.get(or):null,i,o=n.get(mu,null,{optional:!0}),a=n.get(Hi);return o!==null?(i=JM(o.view,a,t),r instanceof Nc&&r._lView===o.view&&(r=null)):i=eA(t,n.get(Xc),a),i.injector=n,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new kc(i)}var rD=ht(fe({},rp),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let t=iu(!1);try{ip(this)}finally{iu(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=Re(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Re(t)}}}),QM=ht(fe({},rD),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(xo(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.scheduler.remove(this)}}),XM=ht(fe({},rD),{consumerMarkedDirty(){this.view[Pe]|=8192,Yo(this.view),this.notifier.notify(13)},destroy(){if(xo(this),this.onDestroyFns!==null)for(let t of this.onDestroyFns)t();this.cleanup(),this.view[Vi]?.delete(this)}});function JM(t,e,n){let r=Object.create(XM);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=iD(r,n),t[Vi]??=new Set,t[Vi].add(r),r.consumerMarkedDirty(r),r}function eA(t,e,n){let r=Object.create(QM);return r.fn=iD(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function iD(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function Ar(t){return np(t)}function xu(t){return{toString:t}.toString()}function lA(t){return typeof t=="function"}function OD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var od=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},ia=(()=>{let t=()=>kD;return t.ngInherit=!0,t})();function kD(t){return t.type.prototype.ngOnChanges&&(t.setInput=dA),cA}function cA(){let t=FD(this),e=t?.current;if(e){let n=t.previous;if(n===zi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dA(t,e,n,r,i){let o=this.declaredInputs[r],a=FD(t)||fA(t,{previous:zi,current:null}),s=a.current||(a.current={}),u=a.previous,l=u[o];s[o]=new od(l&&l.currentValue,n,u===zi),OD(t,e,i,n)}var PD="__ngSimpleChanges__";function FD(t){return t[PD]||null}function fA(t,e){return t[PD]=e}var oD=[];var lt=function(t,e=null,n){for(let r=0;r<oD.length;r++){let i=oD[r];i(t,e,n)}},Je=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Je||{});function hA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=kD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function pA(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=o;a&&(t.contentHooks??=[]).push(-n,a),s&&((t.contentHooks??=[]).push(n,s),(t.contentCheckHooks??=[]).push(n,s)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),c!=null&&(t.destroyHooks??=[]).push(n,c)}}function ed(t,e,n){LD(t,e,3,n)}function td(t,e,n,r){(t[Pe]&3)===n&&LD(t,e,n,r)}function Cg(t,e){let n=t[Pe];(n&3)===e&&(n&=16383,n+=1,t[Pe]=n)}function LD(t,e,n,r){let i=r!==void 0?t[zo]&65535:0,o=r??-1,a=e.length-1,s=0;for(let u=i;u<a;u++)if(typeof e[u+1]=="number"){if(s=e[u],r!=null&&s>=r)break}else e[u]<0&&(t[zo]+=65536),(s<o||o==-1)&&(gA(t,n,e,u),t[zo]=(t[zo]&4294901760)+u+2),u++}function aD(t,e){lt(Je.LifecycleHookStart,t,e);let n=Re(null);try{e.call(t)}finally{Re(n),lt(Je.LifecycleHookEnd,t,e)}}function gA(t,e,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=t[a];i?t[Pe]>>14<t[zo]>>16&&(t[Pe]&3)===e&&(t[Pe]+=16384,aD(s,o)):aD(s,o)}var Ka=-1,Jo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function vA(t){return(t.flags&8)!==0}function mA(t){return(t.flags&16)!==0}function yA(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];t.setAttribute(e,a,s,o)}else{let o=i,a=n[++r];wA(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),r++}}return r}function bA(t){return t===3||t===4||t===6}function wA(t){return t.charCodeAt(0)===64}function Qa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?sD(t,n,i,null,e[++r]):sD(t,n,i,null,null))}}return t}function sD(t,e,n,r,i){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let s=t[o++];if(typeof s=="number"){if(s===e){a=-1;break}else if(s>e){a=o-1;break}}}for(;o<t.length;){let s=t[o];if(typeof s=="number")break;if(s===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function BD(t){return t!==Ka}function ad(t){return t&32767}function DA(t){return t>>16}function sd(t,e){let n=DA(t),r=e;for(;n>0;)r=r[$o],n--;return r}var kg=!0;function ud(t){let e=kg;return kg=t,e}var EA=256,VD=EA-1,jD=5,CA=0,Kr={};function IA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(jo)&&(r=n[jo]),r==null&&(r=n[jo]=CA++);let i=r&VD,o=1<<i;e.data[t+(i>>jD)]|=o}function ld(t,e){let n=HD(t,e);if(n!==-1)return n;let r=e[Ne];r.firstCreatePass&&(t.injectorIndex=e.length,Ig(r.data,t),Ig(e,null),Ig(r.blueprint,null));let i=uv(t,e),o=t.injectorIndex;if(BD(i)){let a=ad(i),s=sd(i,e),u=s[Ne].data;for(let l=0;l<8;l++)e[o+l]=s[a+l]|u[a+l]}return e[o+8]=i,o}function Ig(t,e){t.push(0,0,0,0,0,0,0,0,e)}function HD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function uv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=GD(i),r===null)return Ka;if(n++,i=i[$o],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ka}function Pg(t,e,n){IA(t,e,n)}function UD(t,e,n){if(n&8||t!==void 0)return t;Lc(e,"NodeInjector")}function $D(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Di],o=kn(void 0);try{return i?i.get(e,r,n&8):zp(e,r,n&8)}finally{kn(o)}}return UD(r,e,n)}function zD(t,e,n,r=0,i){if(t!==null){if(e[Pe]&2048&&!(r&2)){let a=xA(t,e,n,r,Kr);if(a!==Kr)return a}let o=qD(t,e,n,r,Kr);if(o!==Kr)return o}return $D(e,n,r,i)}function qD(t,e,n,r,i){let o=_A(n);if(typeof o=="function"){if(!pg(e,t,r))return r&1?UD(i,n,r):$D(e,n,r,i);try{let a;if(a=o(r),a==null&&!(r&8))Lc(n);else return a}finally{gg()}}else if(typeof o=="number"){let a=null,s=HD(t,e),u=Ka,l=r&1?e[rr][dr]:null;for((s===-1||r&4)&&(u=s===-1?uv(t,e):e[s+8],u===Ka||!lD(r,!1)?s=-1:(a=e[Ne],s=ad(u),e=sd(u,e)));s!==-1;){let c=e[Ne];if(uD(o,s,c.data)){let d=SA(s,e,n,a,r,l);if(d!==Kr)return d}u=e[s+8],u!==Ka&&lD(r,e[Ne].data[s+8]===l)&&uD(o,s,e)?(a=c,s=ad(u),e=sd(u,e)):s=-1}}return i}function SA(t,e,n,r,i,o){let a=e[Ne],s=a.data[t+8],u=r==null?Wi(s)&&kg:r!=a&&(s.type&3)!==0,l=i&1&&o===s,c=nd(s,a,n,u,l);return c!==null?Eu(e,a,c,s,i):Kr}function nd(t,e,n,r,i){let o=t.providerIndexes,a=e.data,s=o&1048575,u=t.directiveStart,l=t.directiveEnd,c=o>>20,d=r?s:s+c,f=i?s+c:l;for(let h=d;h<f;h++){let p=a[h];if(h<u&&n===p||h>=u&&p.type===n)return h}if(i){let h=a[u];if(h&&Wr(h)&&h.type===n)return u}return null}function Eu(t,e,n,r,i){let o=t[n],a=e.data;if(o instanceof Jo){let s=o;if(s.resolving){let h=dw(a[n]);throw $p(h)}let u=ud(s.canSeeViewProviders);s.resolving=!0;let l=a[n].type||a[n],c,d=s.injectImpl?kn(s.injectImpl):null,f=pg(t,r,0);try{o=t[n]=s.factory(void 0,i,a,t,r),e.firstCreatePass&&n>=r.directiveStart&&hA(n,a[n],e)}finally{d!==null&&kn(d),ud(u),s.resolving=!1,gg()}}return o}function _A(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(jo)?t[jo]:void 0;return typeof e=="number"?e>=0?e&VD:TA:e}function uD(t,e,n){let r=1<<t;return!!(n[e+(t>>jD)]&r)}function lD(t,e){return!(t&2)&&!(t&1&&e)}var Xo=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return zD(this._tNode,this._lView,e,ko(r),n)}};function TA(){return new Xo(Ln(),qe())}function Xi(t){return xu(()=>{let e=t.prototype.constructor,n=e[nu]||Fg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[nu]||Fg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Fg(t){return Op(t)?()=>{let e=Fg(pn(t));return e&&e()}:Bi(t)}function xA(t,e,n,r,i){let o=t,a=e;for(;o!==null&&a!==null&&a[Pe]&2048&&!Za(a);){let s=qD(o,a,n,r|2,Kr);if(s!==Kr)return s;let u=o.parent;if(!u){let l=a[Xp];if(l){let c=l.get(n,Kr,r);if(c!==Kr)return c}u=GD(a),a=a[$o]}o=u}return i}function GD(t){let e=t[Ne],n=e.type;return n===2?e.declTNode:n===1?t[dr]:null}function MA(){return ns(Ln(),qe())}function ns(t,e){return new ar(Zr(t,e))}var ar=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=MA}return t})();function AA(t){return t instanceof ar?t.nativeElement:t}function RA(){return this._results[Symbol.iterator]()}var cd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Lt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=vw(e);(this._changesDetected=!gw(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=RA};function WD(t){return(t.flags&128)===128}var lv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(lv||{}),ZD=new Map,NA=0;function OA(){return NA++}function kA(t){ZD.set(t[du],t)}function Lg(t){ZD.delete(t[du])}var cD="__ngContext__";function Xa(t,e){Gr(e)?(t[cD]=e[du],kA(e)):t[cD]=e}function YD(t){return QD(t[Wa])}function KD(t){return QD(t[cr])}function QD(t){for(;t!==null&&!xr(t);)t=t[cr];return t}var PA;function cv(t){PA=t}var Cd=new Ce("",{factory:()=>FA}),FA="ng";var Id=new Ce(""),Mu=new Ce("",{providedIn:"platform",factory:()=>"unknown"});var Sd=new Ce("",{factory:()=>te(zt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),_d={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],placeholderResolution:30,disableImageSizeWarning:!1,disableImageLazyLoadWarning:!1},Td=new Ce("",{factory:()=>_d});var XD="r";var JD="di";var eE=!1,tE=new Ce("",{factory:()=>eE});var LA=(t,e,n,r)=>{};function BA(t,e,n,r){LA(t,e,n,r)}function dv(t){return(t.flags&32)===32}var VA=()=>null;function nE(t,e,n=!1){return VA(t,e,n)}function rE(t,e){let n=t.contentQueries;if(n!==null){let r=Re(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=t.data[a];Wc(o),s.contentQueries(2,e[a],a)}}}finally{Re(r)}}}function Bg(t,e,n){Wc(0);let r=Re(null);try{e(t,n)}finally{Re(r)}}function iE(t,e,n){if(eg(e)){let r=Re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let s=t.data[a];if(s.contentQueries){let u=n[a];s.contentQueries(1,u,a)}}}finally{Re(r)}}}var Nr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Nr||{});var Vg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rp})`}};function xd(t){return t instanceof Vg?t.changingThisBreaksApplicationSecurity:t}function jA(t,e){return t.createText(e)}function HA(t,e,n){t.setValue(e,n)}function oE(t,e,n){return t.createElement(e,n)}function dd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function aE(t,e,n){t.appendChild(e,n)}function dD(t,e,n,r,i){r!==null?dd(t,e,n,r,i):aE(t,e,n)}function sE(t,e,n,r){t.removeChild(null,e,n,r)}function UA(t,e,n){t.setAttribute(e,"style",n)}function $A(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function uE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&yA(t,e,r),i!==null&&$A(t,e,i),o!==null&&UA(t,e,o)}function lE(t){return t instanceof Function?t():t}function zA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var cE="ng-template";function qA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(fv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function fv(t){return t.type===4&&t.value!==cE}function GA(t,e,n){let r=t.type===4&&!n?cE:t.value;return e===r}function WA(t,e,n){let r=4,i=t.attrs,o=i!==null?KA(i):0,a=!1;for(let s=0;s<e.length;s++){let u=e[s];if(typeof u=="number"){if(!a&&!Rr(r)&&!Rr(u))return!1;if(a&&Rr(u))continue;a=!1,r=u|r&1;continue}if(!a)if(r&4){if(r=2|r&1,u!==""&&!GA(t,u,n)||u===""&&e.length===1){if(Rr(r))return!1;a=!0}}else if(r&8){if(i===null||!qA(t,i,u,n)){if(Rr(r))return!1;a=!0}}else{let l=e[++s],c=ZA(u,i,fv(t),n);if(c===-1){if(Rr(r))return!1;a=!0;continue}if(l!==""){let d;if(c>o?d="":d=i[c+1].toLowerCase(),r&2&&l!==d){if(Rr(r))return!1;a=!0}}}}return Rr(r)||a}function Rr(t){return(t&1)===0}function ZA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let a=e[i];if(a===t)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=e[++i];for(;typeof s=="string";)s=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return QA(e,t)}function YA(t,e,n=!1){for(let r=0;r<e.length;r++)if(WA(t,e[r],n))return!0;return!1}function KA(t){for(let e=0;e<t.length;e++){let n=t[e];if(bA(n))return e}return t.length}function QA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function fD(t,e){return t?":not("+e.trim()+")":e}function XA(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(r&2){let s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Rr(a)&&(e+=fD(o,i),i=""),r=a,o=o||!Rr(r);n++}return i!==""&&(e+=fD(o,i)),e}function JA(t){return t.map(XA).join(",")}function eR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Rr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Xr={};function hv(t,e,n,r,i,o,a,s,u,l,c){let d=At+r,f=d+i,h=tR(d,f),p=typeof l=="function"?l():l;return h[Ne]={type:t,blueprint:h,template:n,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:c}}function tR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Xr);return n}function nR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pv(t,e,n,r,i,o,a,s,u,l,c){let d=e.blueprint.slice();return d[Tr]=i,d[Pe]=r|4|128|8|64|1024,(l!==null||t&&t[Pe]&2048)&&(d[Pe]|=2048),ng(d),d[Qt]=d[$o]=t,d[Bt]=n,d[Ei]=a||t&&t[Ei],d[Vt]=s||t&&t[Vt],d[Di]=u||t&&t[Di]||null,d[dr]=o,d[du]=OA(),d[qa]=c,d[Xp]=l,d[rr]=e.type==2?t[rr]:d,d}function rR(t,e,n){let r=Zr(e,t),i=nR(n),o=t[Ei].rendererFactory,a=gv(t,pv(t,i,null,dE(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=a}function dE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function fE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gv(t,e){return t[Wa]?t[Qp][cr]=e:t[Wa]=e,t[Qp]=e,e}function ie(t=1){hE(sn(),qe(),Ci()+t,!1)}function hE(t,e,n,r){if(!r)if((e[Pe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ed(e,o,n)}else{let o=t.preOrderHooks;o!==null&&td(e,o,0,n)}Zi(n)}var Md=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Md||{});function jg(t,e,n,r){let i=Re(null);try{let[o,a,s]=t.inputs[n],u=null;(a&Md.SignalBased)!==0&&(u=e[o][zn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):s!==null&&(r=s.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):OD(e,u,o,r)}finally{Re(i)}}var Qr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Qr||{}),iR;function vv(t,e){return iR(t,e)}var ea=new Set,Ad=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ad||{}),oa=new Ce(""),hD=new Set;function Or(t){hD.has(t)||(hD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var mv=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})(),pE=[0,1,2,3],gE=(()=>{class t{ngZone=te(an);scheduler=te(Hi);errorHandler=te(zr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){te(oa,{optional:!0})}execute(){let n=this.sequences.size>0;n&&lt(Je.AfterRenderHooksStart),this.executing=!0;for(let r of pE)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&lt(Je.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[qo]??=[]).push(n),Yo(r),r[Pe]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Ad.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})(),fd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,a=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[qo];e&&(this.view[qo]=e.filter(n=>n!==this))}};function Rd(t,e){let n=e?.injector??te(Pn);return Or("NgAfterNextRender"),aR(t,n,e,!0)}function oR(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function aR(t,e,n,r){let i=e.get(mv);i.impl??=e.get(gE);let o=e.get(oa,null,{optional:!0}),a=n?.manualCleanup!==!0?e.get(or):null,s=e.get(mu,null,{optional:!0}),u=new fd(i.impl,oR(t),s?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var vE=new Ce("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:te(gn)})});function mE(t,e,n){let r=t.get(vE);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function sR(t,e){let n=t.get(vE);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function uR(t,e){for(let[n,r]of e)mE(t,r.animateFns)}function pD(t,e,n,r){let i=t?.[Go]?.enter;e!==null&&i&&i.has(n.index)&&uR(r,i)}function Ya(t,e,n,r,i,o,a,s){if(i!=null){let u,l=!1;xr(i)?u=i:Gr(i)&&(l=!0,i=i[Tr]);let c=fr(i);t===0&&r!==null?(pD(s,r,o,n),a==null?aE(e,r,c):dd(e,r,c,a||null,!0)):t===1&&r!==null?(pD(s,r,o,n),dd(e,r,c,a||null,!0)):t===2?gD(s,o,n,d=>{sE(e,c,l,d)}):t===3&&gD(s,o,n,()=>{e.destroyNode(c)}),u!=null&&DR(e,t,n,u,o,r,a)}}function lR(t,e){yE(t,e),e[Tr]=null,e[dr]=null}function cR(t,e,n,r,i,o){r[Tr]=i,r[dr]=e,Od(t,r,n,1,i,o)}function yE(t,e){e[Ei].changeDetectionScheduler?.notify(9),Od(t,e,e[Vt],2,null,null)}function dR(t){let e=t[Wa];if(!e)return Sg(t[Ne],t);for(;e;){let n=null;if(Gr(e))n=e[Wa];else{let r=e[Rt];r&&(n=r)}if(!n){for(;e&&!e[cr]&&e!==t;)Gr(e)&&Sg(e[Ne],e),e=e[Qt];e===null&&(e=t),Gr(e)&&Sg(e[Ne],e),n=e&&e[cr]}e=n}}function yv(t,e){let n=t[Wo],r=n.indexOf(e);n.splice(r,1)}function Nd(t,e){if(Zo(e))return;let n=e[Vt];n.destroyNode&&Od(t,e,n,3,null,null),dR(e)}function Sg(t,e){if(Zo(e))return;let n=Re(null);try{e[Pe]&=-129,e[Pe]|=256,e[ir]&&xo(e[ir]),pR(t,e),hR(t,e),e[Ne].type===1&&e[Vt].destroy();let r=e[qi];if(r!==null&&xr(e[Qt])){r!==e[Qt]&&yv(r,e);let i=e[qr];i!==null&&i.detachView(t)}Lg(e)}finally{Re(n)}}function gD(t,e,n,r){let i=t?.[Go];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ea.add(t),mE(n,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),s=[];if(a){for(let u=0;u<a.animateFns.length;u++){let l=a.animateFns[u],{promise:c}=l();s.push(c)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(s),fR(t,r)}else t&&ea.delete(t),r(!1)},i)}function fR(t,e){let n=t[Go]?.running;if(n){n.then(()=>{t[Go].running=void 0,ea.delete(t),e(!0)});return}e(!1)}function hR(t,e){let n=t.cleanup,r=e[Ga];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let s=n[a+3];s>=0?r[s]():r[-s].unsubscribe(),a+=2}else{let s=r[n[a+1]];n[a].call(s)}r!==null&&(e[Ga]=null);let i=e[bi];if(i!==null){e[bi]=null;for(let a=0;a<i.length;a++){let s=i[a];s()}}let o=e[Vi];if(o!==null){e[Vi]=null;for(let a of o)a.destroy()}}function pR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Jo)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],u=o[a+1];lt(Je.LifecycleHookStart,s,u);try{u.call(s)}finally{lt(Je.LifecycleHookEnd,s,u)}}else{lt(Je.LifecycleHookStart,i,o);try{o.call(i)}finally{lt(Je.LifecycleHookEnd,i,o)}}}}}function gR(t,e,n){return vR(t,e.parent,n)}function vR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tr];if(Wi(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Nr.None||i===Nr.Emulated)return null}return Zr(r,n)}function mR(t,e,n){return bR(t,e,n)}function yR(t,e,n){return t.type&40?Zr(t,n):null}var bR=yR,vD;function bv(t,e,n,r){let i=gR(t,r,e),o=e[Vt],a=r.parent||e[dr],s=mR(a,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)dD(o,i,n[u],s,!1);else dD(o,i,n,s,!1);vD!==void 0&&vD(o,r,e,n,i)}function wu(t,e){if(e!==null){let n=e.type;if(n&3)return Zr(e,t);if(n&4)return Hg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return wu(t,r);{let i=t[e.index];return xr(i)?Hg(-1,i):fr(i)}}else{if(n&128)return wu(t,e.next);if(n&32)return vv(e,t)()||fr(t[e.index]);{let r=bE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ji(t[rr]);return wu(i,r)}else return wu(t,e.next)}}}return null}function bE(t,e){if(e!==null){let r=t[rr][dr],i=e.projection;return r.projection[i]}return null}function Hg(t,e){let n=Rt+t+1;if(n<e.length){let r=e[n],i=r[Ne].firstChild;if(i!==null)return wu(r,i)}return e[Gi]}function wv(t,e,n,r,i,o,a){for(;n!=null;){let s=r[Di];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(a&&e===0&&(u&&Xa(fr(u),r),n.flags|=2),!dv(n))if(l&8)wv(t,e,n.child,r,i,o,!1),Ya(e,t,s,i,u,n,o,r);else if(l&32){let c=vv(n,r),d;for(;d=c();)Ya(e,t,s,i,d,n,o,r);Ya(e,t,s,i,u,n,o,r)}else l&16?wR(t,e,r,n,i,o):Ya(e,t,s,i,u,n,o,r);n=a?n.projectionNext:n.next}}function Od(t,e,n,r,i,o){wv(n,r,t.firstChild,e,i,o,!1)}function wR(t,e,n,r,i,o){let a=n[rr],u=a[dr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let c=u[l];Ya(e,t,n[Di],i,c,r,o,n)}else{let l=u,c=a[Qt];WD(r)&&(l.flags|=128),wv(t,e,l,c,i,o,!0)}}function DR(t,e,n,r,i,o,a){let s=r[Gi],u=fr(r);s!==u&&Ya(e,t,n,o,s,i,a);for(let l=Rt;l<r.length;l++){let c=r[l];Od(c[Ne],c,t,e,o,s)}}function ER(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Qr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qr.Important),t.setStyle(n,r,i,o))}}function wE(t,e,n,r,i){let o=Ci(),a=r&2;try{Zi(-1),a&&e.length>At&&hE(t,e,At,!1);let s=a?Je.TemplateUpdateStart:Je.TemplateCreateStart;lt(s,i,n),n(r,i)}finally{Zi(o);let s=a?Je.TemplateUpdateEnd:Je.TemplateCreateEnd;lt(s,i,n)}}function DE(t,e,n){AR(t,e,n),(n.flags&64)===64&&RR(t,e,n)}function Dv(t,e,n=Zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(e,t):t[a];t[i++]=s}}}function CR(t,e,n,r){let o=r.get(tE,eE)||n===Nr.ShadowDom||n===Nr.ExperimentalIsolatedShadowDom,a=t.selectRootElement(e,o);return IR(a),a}function IR(t){SR(t)}var SR=()=>null;function _R(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function TR(t,e,n,r,i,o){let a=e[Ne];if(Ev(t,a,e,n,r)){Wi(t)&&MR(e,t.index);return}t.type&3&&(n=_R(n)),xR(t,e,n,r,i,o)}function xR(t,e,n,r,i,o){if(t.type&3){let a=Zr(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(a,n,r)}else t.type&12}function MR(t,e){let n=hr(e,t);n[Pe]&16||(n[Pe]|=64)}function AR(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Wi(n)&&rR(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ld(n,e);let o=n.initialInputs;for(let a=r;a<i;a++){let s=t.data[a],u=Eu(e,t,a,n);if(Xa(u,e),o!==null&&kR(e,a-r,u,s,n,o),Wr(s)){let l=hr(n.index,e);l[Bt]=Eu(e,t,a,n)}}}function RR(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=zw();try{Zi(o);for(let s=r;s<i;s++){let u=t.data[s],l=e[s];Gc(s),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&NR(u,l)}}finally{Zi(-1),Gc(a)}}function NR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function OR(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];YA(e,o.selectors,!1)&&(r??=[],Wr(o)?r.unshift(o):r.push(o))}return r}function kR(t,e,n,r,i,o){let a=o[e];if(a!==null)for(let s=0;s<a.length;s+=2){let u=a[s],l=a[s+1];jg(r,n,u,l)}}function EE(t,e,n,r,i){let o=At+n,a=e[Ne],s=i(a,e,t,r,n);e[o]=s,Ko(t,!0);let u=t.type===2;return u?(uE(e[Vt],s,t),(Ow()===0||Hc(t))&&Xa(s,e),kw()):Xa(s,e),Kc()&&(!u||!dv(t))&&bv(a,e,s,t),t}function CE(t){let e=t;return dg()?Bw():(e=e.parent,Ko(e,!1)),e}function PR(t,e){let n=t[Di];if(!n)return;let r;try{r=n.get(Mr,null)}catch{r=null}r?.(e)}function Ev(t,e,n,r,i){let o=t.inputs?.[r],a=t.hostDirectiveInputs?.[r],s=!1;if(a)for(let u=0;u<a.length;u+=2){let l=a[u],c=a[u+1],d=e.data[l];jg(d,n[l],c,i),s=!0}if(o)for(let u of o){let l=n[u],c=e.data[u];jg(c,l,r,i),s=!0}return s}function FR(t,e){let n=hr(e,t),r=n[Ne];LR(r,n);let i=n[Tr];i!==null&&n[qa]===null&&(n[qa]=nE(i,n[Di])),lt(Je.ComponentStart);try{Cv(r,n,n[Bt])}finally{lt(Je.ComponentEnd,n[Bt])}}function LR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cv(t,e,n){Zc(e);try{let r=t.viewQuery;r!==null&&Bg(1,r,n);let i=t.template;i!==null&&wE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[qr]?.finishViewCreation(t),t.staticContentQueries&&rE(t,e),t.staticViewQueries&&Bg(2,t.viewQuery,n);let o=t.components;o!==null&&BR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Pe]&=-5,Yc()}}function BR(t,e){for(let n=0;n<e.length;n++)FR(t,e[n])}function kd(t,e,n,r){let i=Re(null);try{let o=e.tView,s=t[Pe]&4096?4096:16,u=pv(t,o,n,s,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[qi]=l;let c=t[qr];return c!==null&&(u[qr]=c.createEmbeddedView(o)),Cv(o,u,n),u}finally{Re(i)}}function Cu(t,e){return!e||e.firstChild===null||WD(t)}function Iu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(fr(o)),xr(o)&&IE(o,r);let a=n.type;if(a&8)Iu(t,e,n.child,r);else if(a&32){let s=vv(n,e),u;for(;u=s();)r.push(u)}else if(a&16){let s=bE(e,n);if(Array.isArray(s))r.push(...s);else{let u=ji(e[rr]);Iu(u[Ne],u,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function IE(t,e){for(let n=Rt;n<t.length;n++){let r=t[n],i=r[Ne].firstChild;i!==null&&Iu(r[Ne],r,i,e)}t[Gi]!==t[Tr]&&e.push(t[Gi])}function SE(t){if(t[qo]!==null){for(let e of t[qo])e.impl.addSequence(e);t[qo].length=0}}var _E=[];function VR(t){return t[ir]??jR(t)}function jR(t){let e=_E.pop()??Object.create(UR);return e.lView=t,e}function HR(t){t.lView[ir]!==t&&(t.lView=null,_E.push(t))}var UR=ht(fe({},Oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Yo(t.lView)},consumerOnSignalRead(){this.lView[ir]=this}});function $R(t){let e=t[ir]??Object.create(zR);return e.lView=t,e}var zR=ht(fe({},Oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ji(t.lView);for(;e&&!TE(e[Ne]);)e=ji(e);e&&rg(e)},consumerOnSignalRead(){this.lView[ir]=this}});function TE(t){return t.type!==2}function xE(t){if(t[Vi]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Vi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Pe]&8192)}}var qR=100;function ME(t,e=0){let r=t[Ei].rendererFactory,i=!1;i||r.begin?.();try{GR(t,e)}finally{i||r.end?.()}}function GR(t,e){let n=fg();try{iu(!0),Ug(t,e);let r=0;for(;gu(t);){if(r===qR)throw new de(103,!1);r++,Ug(t,1)}}finally{iu(n)}}function WR(t,e,n,r){if(Zo(e))return;let i=e[Pe],o=!1,a=!1;Zc(e);let s=!0,u=null,l=null;o||(TE(t)?(l=VR(e),u=ka(l)):oc()===null?(s=!1,l=$R(e),u=ka(l)):e[ir]&&(xo(e[ir]),e[ir]=null));try{ng(e),jw(t.bindingStartIndex),n!==null&&wE(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let h=t.preOrderCheckHooks;h!==null&&ed(e,h,null)}else{let h=t.preOrderHooks;h!==null&&td(e,h,0,null),Cg(e,0)}if(a||ZR(e),xE(e),AE(e,0),t.contentQueries!==null&&rE(t,e),!o)if(c){let h=t.contentCheckHooks;h!==null&&ed(e,h)}else{let h=t.contentHooks;h!==null&&td(e,h,1),Cg(e,1)}KR(t,e);let d=t.components;d!==null&&NE(e,d,0);let f=t.viewQuery;if(f!==null&&Bg(2,f,r),!o)if(c){let h=t.viewCheckHooks;h!==null&&ed(e,h)}else{let h=t.viewHooks;h!==null&&td(e,h,2),Cg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[jc]){for(let h of e[jc])h();e[jc]=null}o||(SE(e),e[Pe]&=-73)}catch(c){throw o||Yo(e),c}finally{l!==null&&(Ws(l,u),s&&HR(l)),Yc()}}function AE(t,e){for(let n=YD(t);n!==null;n=KD(n))for(let r=Rt;r<n.length;r++){let i=n[r];RE(i,e)}}function ZR(t){for(let e=YD(t);e!==null;e=KD(e)){if(!(e[Pe]&2))continue;let n=e[Wo];for(let r=0;r<n.length;r++){let i=n[r];rg(i)}}}function YR(t,e,n){lt(Je.ComponentStart);let r=hr(e,t);try{RE(r,n)}finally{lt(Je.ComponentEnd,r[Bt])}}function RE(t,e){$c(t)&&Ug(t,e)}function Ug(t,e){let r=t[Ne],i=t[Pe],o=t[ir],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&Zs(o)),a||=!1,o&&(o.dirty=!1),t[Pe]&=-9217,a)WR(r,t,r.template,t[Bt]);else if(i&8192){let s=Re(null);try{xE(t),AE(t,1);let u=r.components;u!==null&&NE(t,u,1),SE(t)}finally{Re(s)}}}function NE(t,e,n){for(let r=0;r<e.length;r++)YR(t,e[r],n)}function KR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zi(~i);else{let o=i,a=n[++r],s=n[++r];$w(a,o);let u=e[o];lt(Je.HostBindingsUpdateStart,u);try{s(2,u)}finally{lt(Je.HostBindingsUpdateEnd,u)}}}}finally{Zi(-1)}}function Iv(t,e){let n=fg()?64:1088;for(t[Ei].changeDetectionScheduler?.notify(e);t;){t[Pe]|=n;let r=ji(t);if(Za(t)&&!r)return t;t=r}return null}function OE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function kE(t,e){let n=Rt+e;if(n<t.length)return t[n]}function Pd(t,e,n,r=!0){let i=e[Ne];if(QR(i,e,t,n),r){let a=Hg(n,t),s=e[Vt],u=s.parentNode(t[Gi]);u!==null&&cR(i,t[dr],s,e,u,a)}let o=e[qa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function PE(t,e){let n=Su(t,e);return n!==void 0&&Nd(n[Ne],n),n}function Su(t,e){if(t.length<=Rt)return;let n=Rt+e,r=t[n];if(r){let i=r[qi];i!==null&&i!==t&&yv(i,r),e>0&&(t[n-1][cr]=r[cr]);let o=uu(t,Rt+e);lR(r[Ne],r);let a=o[qr];a!==null&&a.detachView(o[Ne]),r[Qt]=null,r[cr]=null,r[Pe]&=-129}return r}function QR(t,e,n,r){let i=Rt+r,o=n.length;r>0&&(n[i-1][cr]=e),r<o-Rt?(e[cr]=n[i],qp(n,Rt+r,e)):(n.push(e),e[cr]=null),e[Qt]=n;let a=e[qi];a!==null&&n!==a&&FE(a,e);let s=e[qr];s!==null&&s.insertView(t),zc(e),e[Pe]|=128}function FE(t,e){let n=t[Wo],r=e[Qt];if(Gr(r))t[Pe]|=2;else{let i=r[Qt][rr];e[rr]!==i&&(t[Pe]|=2)}n===null?t[Wo]=[e]:n.push(e)}var Ki=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Ne];return Iu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return Zo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qt];if(xr(e)){let n=e[fu],r=n?n.indexOf(this):-1;r>-1&&(Su(e,r),uu(n,r))}this._attachedToViewContainer=!1}Nd(this._lView[Ne],this._lView)}onDestroy(e){ig(this._lView,e)}markForCheck(){Iv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Pe]&=-129}reattach(){zc(this._lView),this._lView[Pe]|=128}detectChanges(){this._lView[Pe]|=1024,ME(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Za(this._lView),n=this._lView[qi];n!==null&&!e&&yv(n,this._lView),yE(this._lView[Ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e;let n=Za(this._lView),r=this._lView[qi];r!==null&&!n&&FE(r,this._lView),zc(this._lView)}};var Ja=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=XR;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=kd(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ki(o)}}return t})();function XR(){return Sv(Ln(),qe())}function Sv(t,e){return t.type&4?new Ja(e,t,ns(t,e)):null}function Au(t,e,n,r,i){let o=t.data[e];if(o===null)o=JR(t,e,n,r,i),Uw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=Lw();o.injectorIndex=a===null?-1:a.injectorIndex}return Ko(o,!0),o}function JR(t,e,n,r,i){let o=cg(),a=dg(),s=a?o:o&&o.parent,u=t.data[e]=tN(t,s,n,e,r,i);return eN(t,u,o,a),u}function eN(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function tN(t,e,n,r,i,o){let a=e?e.injectorIndex:-1,s=0;return Fw()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nN(t){let e=t[Jp]??[],r=t[Qt][Vt],i=[];for(let o of e)o.data[JD]!==void 0?i.push(o):rN(o,r);t[Jp]=i}function rN(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[XD];for(;n<i;){let o=r.nextSibling;sE(e,r,!1),r=o,n++}}}var iN=()=>null,oN=()=>null;function $g(t,e){return iN(t,e)}function LE(t,e,n){return oN(t,e,n)}var BE=class{},Fd=class{},zg=class{resolveComponentFactory(e){throw new de(917,!1)}},Ru=class{static NULL=new zg},ta=class{},Ii=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>aN()}return t})();function aN(){let t=qe(),e=Ln(),n=hr(e.index,t);return(Gr(n)?n:t)[Vt]}var VE=(()=>{class t{static \u0275prov=Te({token:t,providedIn:"root",factory:()=>null})}return t})();var rd={},qg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,rd,r);return i!==rd||n===rd?i:this.parentInjector.get(e,n,r)}};function hd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let s=e[a];if(typeof s=="number")o=s;else if(o==1)i=Np(i,s);else if(o==2){let u=s,l=e[++a];r=Np(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Nt(t,e=0){let n=qe();if(n===null)return Ve(t,e);let r=Ln();return zD(r,n,pn(t),e)}function sN(t,e,n,r,i){let o=r===null?null:{"":-1},a=i(t,n);if(a!==null){let s=a,u=null,l=null;for(let c of a)if(c.resolveHostDirectives!==null){[s,u,l]=c.resolveHostDirectives(a);break}cN(t,e,n,s,o,u,l)}o!==null&&r!==null&&uN(n,r,o)}function uN(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new de(-301,!1);r.push(e[i],o)}}function lN(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cN(t,e,n,r,i,o,a){let s=r.length,u=null;for(let f=0;f<s;f++){let h=r[f];u===null&&Wr(h)&&(u=h,lN(t,n,f)),Pg(ld(n,e),t,h.type)}vN(n,t.data.length,s),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let f=0;f<s;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,c=!1,d=fE(t,e,s,null);s>0&&(n.directiveToIndex=new Map);for(let f=0;f<s;f++){let h=r[f];if(n.mergedAttrs=Qa(n.mergedAttrs,h.hostAttrs),fN(t,n,e,d,h),gN(d,h,i),a!==null&&a.has(h)){let[m,g]=a.get(h);n.directiveToIndex.set(h.type,[d,m+n.directiveStart,g+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),d++}dN(t,n,o)}function dN(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))mD(0,e,i,r),mD(1,e,i,r),bD(e,r,!1);else{let o=n.get(i);yD(0,e,o,r),yD(1,e,o,r),bD(e,r,!0)}}}function mD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;t===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),jE(e,o)}}function yD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],s;t===0?s=e.hostDirectiveInputs??={}:s=e.hostDirectiveOutputs??={},s[a]??=[],s[a].push(r,o),jE(e,a)}}function jE(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function bD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||fv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let a=null,s=0;for(;s<r.length;){let u=r[s];if(u===0){s+=4;continue}else if(u===5){s+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let c of l)if(c===e){a??=[],a.push(u,r[s+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let c=0;c<l.length;c+=2)if(l[c]===e){a??=[],a.push(l[c+1],r[s+1]);break}}s+=2}t.initialInputs??=[],t.initialInputs.push(a)}function fN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Bi(i.type,!0)),a=new Jo(o,Wr(i),Nt,null);t.blueprint[r]=a,n[r]=a,hN(t,e,r,fE(t,n,i.hostVars,Xr),i)}function hN(t,e,n,r,i){let o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let s=~e.index;pN(a)!=s&&a.push(s),a.push(n,r,o)}}function pN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Wr(e)&&(n[""]=t)}}function vN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function HE(t,e,n,r,i,o,a,s){let u=e[Ne],l=u.consts,c=Yr(l,a),d=Au(u,t,n,r,c);return o&&sN(u,e,d,Yr(l,s),i),d.mergedAttrs=Qa(d.mergedAttrs,d.attrs),d.attrs!==null&&hd(d,d.attrs,!1),d.mergedAttrs!==null&&hd(d,d.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,d),d}function UE(t,e){pA(t,e),eg(e)&&t.queries.elementEnd(e)}function mN(t,e,n,r,i,o){let a=e.consts,s=Yr(a,i),u=Au(e,t,n,r,s);if(u.mergedAttrs=Qa(u.mergedAttrs,u.attrs),o!=null){let l=Yr(a,o);u.localNames=[];for(let c=0;c<l.length;c+=2)u.localNames.push(l[c],-1)}return u.attrs!==null&&hd(u,u.attrs,!1),u.mergedAttrs!==null&&hd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function _v(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function $E(t,e,n){return t[e]=n}function Qi(t,e,n){if(n===Xr)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function yN(t,e,n,r){let i=Qi(t,e,n);return Qi(t,e+1,r)||i}function id(t,e,n){return function r(i){let o=Wi(t)?hr(t.index,e):e;Iv(o,5);let a=e[Bt],s=wD(e,a,n,i),u=r.__ngNextListenerFn__;for(;u;)s=wD(e,a,u,i)&&s,u=u.__ngNextListenerFn__;return s}}function wD(t,e,n,r){let i=Re(null);try{return lt(Je.OutputStart,e,n),n(r)!==!1}catch(o){return PR(t,o),!1}finally{lt(Je.OutputEnd,e,n),Re(i)}}function zE(t,e,n,r,i,o,a,s){let u=Hc(t),l=!1,c=null;if(!r&&u&&(c=wN(e,n,o,t.index)),c!==null){let d=c.__ngLastListenerFn__||c;d.__ngNextListenerFn__=a,c.__ngLastListenerFn__=a,l=!0}else{let d=Zr(t,n),f=r?r(d):d;BA(n,f,o,s);let h=i.listen(f,o,s);if(!bN(o)){let p=r?m=>r(fr(m[t.index])):t.index;qE(p,e,n,o,s,h,!1)}}return l}function bN(t){return t.startsWith("animation")||t.startsWith("transition")}function wN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=e[Ga],u=i[o+2];return s&&s.length>u?s[u]:null}typeof a=="string"&&(o+=2)}return null}function qE(t,e,n,r,i,o,a){let s=e.firstCreatePass?ag(e):null,u=og(n),l=u.length;u.push(i,o),s&&s.push(r,t,l,(l+1)*(a?-1:1))}function DD(t,e,n,r,i,o){let a=e[n],s=e[Ne],l=s.data[n].outputs[r],d=a[l].subscribe(o);qE(t.index,s,e,i,o,d,!0)}var Gg=Symbol("BINDING");var pd=class extends Ru{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=$i(e);return new es(n,this.ngModule)}};function DN(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Md.SignalBased)!==0};return i&&(o.transform=i),o})}function EN(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function CN(t,e,n){let r=e instanceof gn?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new qg(n,r):n}function IN(t){let e=t.get(ta,null);if(e===null)throw new de(407,!1);let n=t.get(VE,null),r=t.get(Hi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function SN(t,e){let n=GE(t);return oE(e,n,n==="svg"?_w:n==="math"?Tw:null)}function GE(t){return(t.selectors[0][0]||"div").toLowerCase()}var es=class extends Fd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=DN(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=EN(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JA(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,a){lt(Je.DynamicComponentStart);let s=Re(null);try{let u=this.componentDef,l=_N(r,u,a,o),c=CN(u,i||this.ngModule,e),d=IN(c),f=d.rendererFactory.createRenderer(null,u),h=r?CR(f,r,u.encapsulation,c):SN(u,f),p=a?.some(ED)||o?.some(v=>typeof v!="function"&&v.bindings.some(ED)),m=pv(null,l,null,512|dE(u),null,null,d,f,c,null,nE(h,c,!0));m[At]=h,Zc(m);let g=null;try{let v=HE(At,m,2,"#host",()=>l.directiveRegistry,!0,0);uE(f,h,v),Xa(h,m),DE(l,m,v),iE(l,v,m),UE(l,v),n!==void 0&&xN(v,this.ngContentSelectors,n),g=hr(v.index,m),m[Bt]=g[Bt],Cv(l,m,null)}catch(v){throw g!==null&&Lg(g),Lg(m),v}finally{lt(Je.DynamicComponentEnd),Yc()}return new gd(this.componentType,m,!!p)}finally{Re(s)}}};function _N(t,e,n,r){let i=t?["ng-version","21.0.6"]:eR(e.selectors[0]),o=null,a=null,s=0;if(n)for(let c of n)s+=c[Gg].requiredVars,c.create&&(c.targetIdx=0,(o??=[]).push(c)),c.update&&(c.targetIdx=0,(a??=[]).push(c));if(r)for(let c=0;c<r.length;c++){let d=r[c];if(typeof d!="function")for(let f of d.bindings){s+=f[Gg].requiredVars;let h=c+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(a??=[]).push(f))}}let u=[e];if(r)for(let c of r){let d=typeof c=="function"?c:c.type,f=Hp(d);u.push(f)}return hv(0,null,TN(o,a),1,s,u,null,null,null,[i],null)}function TN(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function ED(t){let e=t[Gg].kind;return e==="input"||e==="twoWay"}var gd=class extends BE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=hu(n[Ne],At),this.location=ns(this._tNode,n),this.instance=hr(this._tNode.index,n)[Bt],this.hostView=this.changeDetectorRef=new Ki(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Ev(r,i[Ne],i,e,n);this.previousInputValues.set(e,n);let a=hr(r.index,i);Iv(a,1)}get injector(){return new Xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var aa=(()=>{class t{static __NG_ELEMENT_ID__=MN}return t})();function MN(){let t=Ln();return ZE(t,qe())}var AN=aa,WE=class extends AN{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ns(this._hostTNode,this._hostLView)}get injector(){return new Xo(this._hostTNode,this._hostLView)}get parentInjector(){let e=uv(this._hostTNode,this._hostLView);if(BD(e)){let n=sd(e,this._hostLView),r=ad(e),i=n[Ne].data[r+8];return new Xo(i,n)}else return new Xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=CD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=$g(this._lContainer,e.ssrId),s=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,Cu(this._hostTNode,a)),s}createComponent(e,n,r,i,o,a,s){let u=e&&!lA(e),l;if(u)l=n;else{let g=n||{};l=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef,a=g.directives,s=g.bindings}let c=u?e:new es($i(e)),d=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(u?d:this.parentInjector).get(gn,null);v&&(o=v)}let f=$i(c.componentType??{}),h=$g(this._lContainer,f?.id??null),p=h?.firstChild??null,m=c.create(d,i,p,o,a,s);return this.insertImpl(m.hostView,l,Cu(this._hostTNode,h)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Mw(i)){let s=this.indexOf(e);if(s!==-1)this.detach(s);else{let u=i[Qt],l=new WE(u,u[dr],u[Qt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return Pd(a,i,o,r),e.attachToViewContainerRef(),qp(_g(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=CD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Su(this._lContainer,n);r&&(uu(_g(this._lContainer),n),Nd(r[Ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=Su(this._lContainer,n);return r&&uu(_g(this._lContainer),n)!=null?new Ki(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function CD(t){return t[fu]}function _g(t){return t[fu]||(t[fu]=[])}function ZE(t,e){let n,r=e[t.index];return xr(r)?n=r:(n=OE(r,e,null,t),e[t.index]=n,gv(e,n)),NN(n,e,t,r),new WE(n,t,e)}function RN(t,e){let n=t[Vt],r=n.createComment(""),i=Zr(e,t),o=n.parentNode(i);return dd(n,o,r,n.nextSibling(i),!1),r}var NN=PN,ON=()=>!1;function kN(t,e,n){return ON(t,e,n)}function PN(t,e,n,r){if(t[Gi])return;let i;n.type&8?i=fr(r):i=RN(e,n),t[Gi]=i}var Wg=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Zg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Tv(e,n).matches!==null&&this.queries[n].setDirty()}},Yg=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=$N(e):this.predicate=e}},Kg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Qg=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,FN(n,o)),this.matchTNodeWithReadOption(e,n,nd(n,e,o,!1,!1))}else r===Ja?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,nd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ar||i===aa||i===Ja&&n.type&4)this.addMatch(n.index,-2);else{let o=nd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function FN(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function LN(t,e){return t.type&11?ns(t,e):t.type&4?Sv(t,e):null}function BN(t,e,n,r){return n===-1?LN(e,t):n===-2?VN(t,e,r):Eu(t,t[Ne],n,e)}function VN(t,e,n){if(n===ar)return ns(e,t);if(n===Ja)return Sv(e,t);if(n===aa)return ZE(e,t)}function YE(t,e,n,r){let i=e[qr].queries[r];if(i.matches===null){let o=t.data,a=n.matches,s=[];for(let u=0;a!==null&&u<a.length;u+=2){let l=a[u];if(l<0)s.push(null);else{let c=o[l];s.push(BN(e,c,a[u+1],n.metadata.read))}}i.matches=s}return i.matches}function Xg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let a=YE(t,e,i,n);for(let s=0;s<o.length;s+=2){let u=o[s];if(u>0)r.push(a[s/2]);else{let l=o[s+1],c=e[-u];for(let d=Rt;d<c.length;d++){let f=c[d];f[qi]===f[Qt]&&Xg(f[Ne],f,l,r)}if(c[Wo]!==null){let d=c[Wo];for(let f=0;f<d.length;f++){let h=d[f];Xg(h[Ne],h,l,r)}}}}}return r}function jN(t,e){return t[qr].queries[e].queryList}function HN(t,e,n){let r=new cd((n&4)===4);return Nw(t,e,r,r.destroy),(e[qr]??=new Zg).queries.push(new Wg(r))-1}function UN(t,e,n){let r=sn();return r.firstCreatePass&&(zN(r,new Yg(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),HN(r,qe(),e)}function $N(t){return t.split(",").map(e=>e.trim())}function zN(t,e,n){t.queries===null&&(t.queries=new Kg),t.queries.track(new Qg(e,n))}function Tv(t,e){return t.queries.getByIndex(e)}function qN(t,e){let n=t[Ne],r=Tv(n,e);return r.crossesNgTemplate?Xg(n,t,e,[]):YE(n,t,r,e)}var na=class{},Ld=class{};var vd=class extends na{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new pd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=jp(e);this._bootstrapComponents=lE(o.bootstrap),this._r3Injector=vg(e,n,[{provide:na,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver},...r],wi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},md=class extends Ld{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new vd(this.moduleType,e,[])}};var _u=class extends na{injector;componentFactoryResolver=new pd(this);instance=null;constructor(e){super();let n=new Fo([...e.providers,{provide:na,useValue:this},{provide:Ru,useValue:this.componentFactoryResolver}],e.parent||cu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nu(t,e,n=null){return new _u({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var GN=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Zp(!1,n.type),i=r.length>0?Nu([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Te({token:t,providedIn:"environment",factory:()=>new t(Ve(gn))})}return t})();function Bn(t){return xu(()=>{let e=KE(t),n=ht(fe({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(GN).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Nr.Emulated,styles:t.styles||nr,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Or("NgStandalone"),QE(n);let r=t.dependencies;return n.directiveDefs=ID(r,WN),n.pipeDefs=ID(r,cw),n.id=KN(n),n})}function WN(t){return $i(t)||Hp(t)}function sa(t){return xu(()=>({type:t.type,bootstrap:t.bootstrap||nr,declarations:t.declarations||nr,imports:t.imports||nr,exports:t.exports||nr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ZN(t,e){if(t==null)return zi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,a,s,u;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o,u=i[3]||null):(o=i,a=i,s=Md.None,u=null),n[o]=[r,s,u],e[o]=a}return n}function YN(t){if(t==null)return zi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Wn(t){return xu(()=>{let e=KE(t);return QE(e),e})}function Ou(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function KE(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||zi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||nr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ZN(t.inputs,e),outputs:YN(t.outputs),debugInfo:null}}function QE(t){t.features?.forEach(e=>e(t))}function ID(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function KN(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QN(t){return Object.getPrototypeOf(t.prototype).constructor}function rs(t){let e=QN(t.type),n=!0,r=[t];for(;e;){let i;if(Wr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let a=t;a.inputs=Tg(t.inputs),a.declaredInputs=Tg(t.declaredInputs),a.outputs=Tg(t.outputs);let s=i.hostBindings;s&&nO(t,s);let u=i.viewQuery,l=i.contentQueries;if(u&&eO(t,u),l&&tO(t,l),XN(t,i),lw(t.outputs,i.outputs),Wr(i)&&i.data.animation){let c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let s=o[a];s&&s.ngInherit&&s(t),s===rs&&(n=!1)}}e=Object.getPrototypeOf(e)}JN(r)}function XN(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function JN(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qa(i.hostAttrs,n=Qa(n,i.hostAttrs))}}function Tg(t){return t===zi?{}:t===nr?[]:t}function eO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function tO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function nO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function rO(t,e,n,r,i,o,a,s){if(n.firstCreatePass){t.mergedAttrs=Qa(t.mergedAttrs,t.attrs);let c=t.tView=hv(2,t,i,o,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),c.queries=n.queries.embeddedTView(t))}s&&(t.flags|=s),Ko(t,!1);let u=iO(n,e,t,r);Kc()&&bv(n,e,u,t),Xa(u,e);let l=OE(u,e,u,t);e[r+At]=l,gv(e,l),kN(l,t,e)}function yd(t,e,n,r,i,o,a,s,u,l,c){let d=n+At,f;if(e.firstCreatePass){if(f=Au(e,d,4,a||null,s||null),l!=null){let h=Yr(e.consts,l);f.localNames=[];for(let p=0;p<h.length;p+=2)f.localNames.push(h[p],-1)}}else f=e.data[d];return rO(f,t,e,n,r,i,o,u),l!=null&&Dv(t,f,c),f}var iO=oO;function oO(t,e,n,r){return Qc(!0),e[Vt].createComment("")}var xv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Mv=new Ce("");function ua(t){return!!t&&typeof t.then=="function"}function Av(t){return!!t&&typeof t.subscribe=="function"}var XE=new Ce("");var Rv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=te(XE,{optional:!0})??[];injector=te(Pn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Fn(this.injector,i);if(ua(o))n.push(o);else if(Av(o)){let a=new Promise((s,u)=>{o.subscribe({complete:s,error:u})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bd=new Ce("");function JE(){ep(()=>{let t="";throw new de(600,t)})}function eC(t){return t.isBoundToModule}var aO=10;var Ji=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=te(Mr);afterRenderManager=te(mv);zonelessEnabled=te(yu);rootEffectScheduler=te(Xc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Lt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=te(Yi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(St(n=>!n))}constructor(){te(oa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=te(gn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Pn.NULL){return this._injector.get(an).run(()=>{lt(Je.BootstrapComponentStart);let a=n instanceof Fd;if(!this._injector.get(Rv).done){let p="";throw new de(405,p)}let u;a?u=n:u=this._injector.get(Ru).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=eC(u)?void 0:this._injector.get(na),c=r||u.selector,d=u.create(i,[],c,l),f=d.location.nativeElement,h=d.injector.get(Mv,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Du(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),lt(Je.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){lt(Je.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ad.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw lt(Je.ChangeDetectionEnd),new de(101,!1);let n=Re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Re(n),this.afterTick.next(),lt(Je.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ta,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<aO;){lt(Je.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{lt(Je.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!gu(i))continue;let o=r&&!this.zonelessEnabled?0:1;ME(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>gu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Du(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Bd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Du(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new de(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Du(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var D8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Jg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let a=this.detach(r);this.attach(r,o),this.attach(i,a)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function xg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function sO(t,e,n,r){let i,o,a=0,s=t.length-1,u=void 0;if(Array.isArray(e)){Re(r);let l=e.length-1;for(Re(null);a<=s&&a<=l;){let c=t.at(a),d=e[a],f=xg(a,c,a,d,n);if(f!==0){f<0&&t.updateValue(a,d),a++;continue}let h=t.at(s),p=e[l],m=xg(s,h,l,p,n);if(m!==0){m<0&&t.updateValue(s,p),s--,l--;continue}let g=n(a,c),v=n(s,h),y=n(a,d);if(Object.is(y,v)){let b=n(l,p);Object.is(b,g)?(t.swap(a,s),t.updateValue(s,p),l--,s--):t.move(s,a),t.updateValue(a,d),a++;continue}if(i??=new bd,o??=_D(t,a,s,n),ev(t,i,a,y))t.updateValue(a,d),a++,s++;else if(o.has(y))i.set(g,t.detach(a)),s--;else{let b=t.create(a,e[a]);t.attach(a,b),a++,s++}}for(;a<=l;)SD(t,i,n,a,e[a]),a++}else if(e!=null){Re(r);let l=e[Symbol.iterator]();Re(null);let c=l.next();for(;!c.done&&a<=s;){let d=t.at(a),f=c.value,h=xg(a,d,a,f,n);if(h!==0)h<0&&t.updateValue(a,f),a++,c=l.next();else{i??=new bd,o??=_D(t,a,s,n);let p=n(a,f);if(ev(t,i,a,p))t.updateValue(a,f),a++,s++,c=l.next();else if(!o.has(p))t.attach(a,t.create(a,f)),a++,s++,c=l.next();else{let m=n(a,d);i.set(m,t.detach(a)),s--}}}for(;!c.done;)SD(t,i,n,t.length,c.value),c=l.next()}for(;a<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function ev(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function SD(t,e,n,r,i){if(ev(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function _D(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var bd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function jt(t,e,n,r,i,o,a,s){Or("NgControlFlow");let u=qe(),l=sn(),c=Yr(l.consts,o);return yd(u,l,t,e,n,r,i,c,256,a,s),Nv}function Nv(t,e,n,r,i,o,a,s){Or("NgControlFlow");let u=qe(),l=sn(),c=Yr(l.consts,o);return yd(u,l,t,e,n,r,i,c,512,a,s),Nv}function Ht(t,e){Or("NgControlFlow");let n=qe(),r=vu(),i=n[r]!==Xr?n[r]:-1,o=i!==-1?wd(n,At+i):void 0,a=0;if(Qi(n,r,t)){let s=Re(null);try{if(o!==void 0&&PE(o,a),t!==-1){let u=At+t,l=wd(n,u),c=iv(n[Ne],u),d=LE(l,c,n),f=kd(n,c,e,{dehydratedView:d});Pd(l,f,a,Cu(c,d))}}finally{Re(s)}}else if(o!==void 0){let s=kE(o,a);s!==void 0&&(s[Bt]=e)}}var tv=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Rt}};function vr(t){return t}function Ov(t,e){return e}var nv=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function vn(t,e,n,r,i,o,a,s,u,l,c,d,f){Or("NgControlFlow");let h=qe(),p=sn(),m=u!==void 0,g=qe(),v=s?a.bind(g[rr][Bt]):a,y=new nv(m,v);g[At+t]=y,yd(h,p,t+1,e,n,r,i,Yr(p.consts,o),256),m&&yd(h,p,t+2,u,l,c,d,Yr(p.consts,f),512)}var rv=class extends Jg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Rt}at(e){return this.getLView(e)[Bt].$implicit}attach(e,n){let r=n[qa];this.needsIndexUpdate||=e!==this.length,Pd(this.lContainer,n,e,Cu(this.templateTNode,r)),uO(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,lO(this.lContainer,e),cO(this.lContainer,e)}create(e,n){let r=$g(this.lContainer,this.templateTNode.tView.ssrId);return kd(this.hostLView,this.templateTNode,new tv(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Nd(e[Ne],e)}updateValue(e,n){this.getLView(e)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Bt].$index=e}getLView(e){return dO(this.lContainer,e)}};function mn(t){let e=Re(null),n=Ci();try{let r=qe(),i=r[Ne],o=r[n],a=n+1,s=wd(r,a);if(o.liveCollection===void 0){let l=iv(i,a);o.liveCollection=new rv(s,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(sO(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=vu(),c=u.length===0;if(Qi(r,l,c)){let d=n+2,f=wd(r,d);if(c){let h=iv(i,d),p=LE(f,h,r),m=kd(r,h,void 0,{dehydratedView:p});Pd(f,m,0,Cu(h,p))}else i.firstUpdatePass&&nN(f),PE(f,0)}}}finally{Re(e)}}function wd(t,e){return t[e]}function uO(t,e){if(t.length<=Rt)return;let n=Rt+e,r=t[n],i=r?r[Go]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Di];sR(o,i),ea.delete(r),i.detachedLeaveAnimationFns=void 0}}function lO(t,e){if(t.length<=Rt)return;let n=Rt+e,r=t[n],i=r?r[Go]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function cO(t,e){return Su(t,e)}function dO(t,e){return kE(t,e)}function iv(t,e){return hu(t,e)}function Ot(t,e,n){let r=qe(),i=vu();if(Qi(r,i,e)){let o=sn(),a=Kw();TR(a,r,t,e,r[Vt],n)}return Ot}function TD(t,e,n,r,i){Ev(e,t,n,i?"class":"style",r)}function oe(t,e,n,r){let i=qe(),o=i[Ne],a=t+At,s=o.firstCreatePass?HE(a,i,2,e,OR,Pw(),n,r):o.data[a];if(EE(s,i,t,e,tC),Hc(s)){let u=i[Ne];DE(u,i,s),iE(u,s,i)}return r!=null&&Dv(i,s),oe}function re(){let t=sn(),e=Ln(),n=CE(e);return t.firstCreatePass&&UE(t,n),ug(n)&&lg(),sg(),n.classesWithoutHost!=null&&vA(n)&&TD(t,n,qe(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&mA(n)&&TD(t,n,qe(),n.stylesWithoutHost,!1),re}function gt(t,e,n,r){return oe(t,e,n,r),re(),gt}function Jr(t,e,n,r){let i=qe(),o=i[Ne],a=t+At,s=o.firstCreatePass?mN(a,o,2,e,n,r):o.data[a];return EE(s,i,t,e,tC),r!=null&&Dv(i,s),Jr}function kr(){let t=Ln(),e=CE(t);return ug(e)&&lg(),sg(),kr}function Vd(t,e,n,r){return Jr(t,e,n,r),kr(),Vd}var tC=(t,e,n,r,i)=>(Qc(!0),oE(e[Vt],r,Qw()));function ei(){return qe()}var bu=void 0;function fO(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var hO=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",bu,bu,bu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",fO],Mg={};function Zn(t){let e=pO(t),n=xD(e);if(n)return n;let r=e.split("-")[0];if(n=xD(r),n)return n;if(r==="en")return hO;throw new de(701,!1)}function xD(t){return t in Mg||(Mg[t]=Bo.ng&&Bo.ng.common&&Bo.ng.common.locales&&Bo.ng.common.locales[t]),Mg[t]}var kt=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(kt||{});function pO(t){return t.toLowerCase().replace(/_/g,"-")}var ku="en-US";var gO=ku;function nC(t){typeof t=="string"&&(gO=t.toLowerCase().replace(/_/g,"-"))}function Tt(t,e,n){let r=qe(),i=sn(),o=Ln();return vO(i,r,r[Vt],o,t,e,n),Tt}function jd(t,e,n){let r=qe(),i=sn(),o=Ln();return(o.type&3||n)&&zE(o,i,r,n,r[Vt],t,e,id(o,r,e)),jd}function vO(t,e,n,r,i,o,a){let s=!0,u=null;if((r.type&3||a)&&(u??=id(r,e,o),zE(r,t,e,a,n,i,o,u)&&(s=!1)),s){let l=r.outputs?.[i],c=r.hostDirectiveOutputs?.[i];if(c&&c.length)for(let d=0;d<c.length;d+=2){let f=c[d],h=c[d+1];u??=id(r,e,o),DD(r,e,f,h,i,u)}if(l&&l.length)for(let d of l)u??=id(r,e,o),DD(r,e,d,i,i,u)}}function He(t=1){return Yw(t)}function Hd(t,e,n){return UN(t,e,n),Hd}function kv(t){let e=qe(),n=sn(),r=hg();Wc(r+1);let i=Tv(n,r);if(t.dirty&&xw(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=qN(e,r);t.reset(o,AA),t.notifyOnChanges()}return!0}return!1}function Pv(){return jN(qe(),hg())}function Jc(t,e){return t<<17|e<<2}function ra(t){return t>>17&32767}function mO(t){return(t&2)==2}function yO(t,e){return t&131071|e<<17}function ov(t){return t|2}function ts(t){return(t&131068)>>2}function Ag(t,e){return t&-131069|e<<2}function bO(t){return(t&1)===1}function av(t){return t|1}function wO(t,e,n,r,i,o){let a=o?e.classBindings:e.styleBindings,s=ra(a),u=ts(a);t[r]=n;let l=!1,c;if(Array.isArray(n)){let d=n;c=d[1],(c===null||za(d,c)>0)&&(l=!0)}else c=n;if(i)if(u!==0){let f=ra(t[s+1]);t[r+1]=Jc(f,s),f!==0&&(t[f+1]=Ag(t[f+1],r)),t[s+1]=yO(t[s+1],r)}else t[r+1]=Jc(s,0),s!==0&&(t[s+1]=Ag(t[s+1],r)),s=r;else t[r+1]=Jc(u,0),s===0?s=r:t[u+1]=Ag(t[u+1],r),u=r;l&&(t[r+1]=ov(t[r+1])),MD(t,c,r,!0),MD(t,c,r,!1),DO(e,c,t,r,o),a=Jc(s,u),o?e.classBindings=a:e.styleBindings=a}function DO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&za(o,e)>=0&&(n[r+1]=av(n[r+1]))}function MD(t,e,n,r){let i=t[n+1],o=e===null,a=r?ra(i):ts(i),s=!1;for(;a!==0&&(s===!1||o);){let u=t[a],l=t[a+1];EO(u,e)&&(s=!0,t[a+1]=r?av(l):ov(l)),a=r?ra(l):ts(l)}s&&(t[n+1]=r?ov(i):av(i))}function EO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?za(t,e)>=0:!1}function Ud(t,e,n){return rC(t,e,n,!1),Ud}function wt(t,e){return rC(t,e,null,!0),wt}function rC(t,e,n,r){let i=qe(),o=sn(),a=Hw(2);if(o.firstUpdatePass&&IO(o,t,a,r),e!==Xr&&Qi(i,a,e)){let s=o.data[Ci()];MO(o,s,i,i[Vt],t,i[a+1]=AO(e,n),r,a)}}function CO(t,e){return e>=t.expandoStartIndex}function IO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ci()],a=CO(t,n);RO(o,r)&&e===null&&!a&&(e=!1),e=SO(i,o,e,r),wO(i,o,e,n,a,r)}}function SO(t,e,n,r){let i=qw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Rg(null,t,e,n,r),n=Tu(n,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==i)if(n=Rg(i,t,e,n,r),o===null){let u=_O(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Rg(null,t,e,u[1],r),u=Tu(u,e.attrs,r),TO(t,e,r,u))}else o=xO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function _O(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ts(r)!==0)return t[ra(r)]}function TO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ra(i)]=r}function xO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=t[o].hostAttrs;r=Tu(r,a,n)}return Tu(r,e.attrs,n)}function Rg(t,e,n,r,i){let o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(s===-1?s=n.directiveStart:s++;s<a&&(o=e[s],r=Tu(r,o.hostAttrs,i),o!==t);)s++;return t!==null&&(n.directiveStylingLast=s),r}function Tu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),yw(t,a,n?!0:e[++o]))}return t===void 0?null:t}function MO(t,e,n,r,i,o,a,s){if(!(e.type&3))return;let u=t.data,l=u[s+1],c=bO(l)?AD(u,e,n,i,ts(l),a):void 0;if(!Dd(c)){Dd(o)||mO(l)&&(o=AD(u,null,n,i,s,a));let d=tg(Ci(),n);ER(r,a,d,i,o)}}function AD(t,e,n,r,i,o){let a=e===null,s;for(;i>0;){let u=t[i],l=Array.isArray(u),c=l?u[1]:u,d=c===null,f=n[i+1];f===Xr&&(f=d?nr:void 0);let h=d?Vc(f,r):c===r?f:void 0;if(l&&!Dd(h)&&(h=Vc(u,r)),Dd(h)&&(s=h,a))return s;let p=t[i+1];i=a?ra(p):ts(p)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(s=Vc(u,r))}return s}function Dd(t){return t!==void 0}function AO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=wi(xd(t)))),t}function RO(t,e){return(t.flags&(e?8:16))!==0}function me(t,e=""){let n=qe(),r=sn(),i=t+At,o=r.firstCreatePass?Au(r,i,1,e,null):r.data[i],a=NO(r,n,o,e,t);n[i]=a,Kc()&&bv(r,n,a,o),Ko(o,!1)}var NO=(t,e,n,r,i)=>(Qc(!0),jA(e[Vt],r));function OO(t,e,n,r=""){return Qi(t,vu(),n)?e+Up(n)+r:Xr}function qt(t){return Pt("",t),qt}function Pt(t,e,n){let r=qe(),i=OO(r,t,e,n);return i!==Xr&&kO(r,Ci(),i),Pt}function kO(t,e,n){let r=tg(e,t);HA(t[Vt],r,n)}var iC={};function $d(t){Or("NgLet");let e=sn(),n=qe(),r=t+At,i=Au(e,r,128,null,null);return Ko(i,!1),pu(e,n,r,iC),$d}function Pu(t){let e=sn(),n=qe(),r=Ci();return pu(e,n,r,t),t}function Fu(t){let e=Vw(),n=Uc(e,At+t);if(n===iC)throw new de(314,!1);return n}function RD(t,e,n){let r=sn();r.firstCreatePass&&oC(e,r.data,r.blueprint,Wr(t),n)}function oC(t,e,n,r,i){if(t=pn(t),Array.isArray(t))for(let o=0;o<t.length;o++)oC(t[o],e,n,r,i);else{let o=sn(),a=qe(),s=Ln(),u=Po(t)?t:pn(t.provide),l=Kp(t),c=s.providerIndexes&1048575,d=s.directiveStart,f=s.providerIndexes>>20;if(Po(t)||!t.multi){let h=new Jo(l,i,Nt,null),p=Og(u,e,i?c:c+f,d);p===-1?(Pg(ld(s,a),o,u),Ng(o,t,e.length),e.push(u),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(h),a.push(h)):(n[p]=h,a[p]=h)}else{let h=Og(u,e,c+f,d),p=Og(u,e,c,c+f),m=h>=0&&n[h],g=p>=0&&n[p];if(i&&!g||!i&&!m){Pg(ld(s,a),o,u);let v=LO(i?FO:PO,n.length,i,r,l,t);!i&&g&&(n[p].providerFactory=v),Ng(o,t,e.length,0),e.push(u),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),n.push(v),a.push(v)}else{let v=aC(n[i?p:h],l,!i&&r);Ng(o,t,h>-1?h:p,v)}!i&&r&&g&&n[p].componentProviders++}}}function Ng(t,e,n,r){let i=Po(e),o=Cw(e);if(i||o){let u=(o?pn(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let c=l.indexOf(n);c===-1?l.push(n,[r,u]):l[c+1].push(r,u)}else l.push(n,u)}}}function aC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Og(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function PO(t,e,n,r,i){return sv(this.multi,[])}function FO(t,e,n,r,i){let o=this.multi,a;if(this.providerFactory){let s=this.providerFactory.componentProviders,u=Eu(r,r[Ne],this.providerFactory.index,i);a=u.slice(0,s),sv(o,a);for(let l=s;l<u.length;l++)a.push(u[l])}else a=[],sv(o,a);return a}function sv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function LO(t,e,n,r,i,o){let a=new Jo(t,n,Nt,null);return a.multi=[],a.index=e,a.componentProviders=0,aC(a,i,r&&!n),a}function zd(t,e){return n=>{n.providersResolver=(r,i)=>RD(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>RD(r,i?i(e):e,!0))}}function Lu(t,e,n,r){return uC(qe(),qc(),t,e,n,r)}function sC(t,e){let n=t[e];return n===Xr?void 0:n}function uC(t,e,n,r,i,o){let a=e+n;return Qi(t,a,i)?$E(t,a+1,o?r.call(o,i):r(i)):sC(t,a+1)}function BO(t,e,n,r,i,o,a){let s=e+n;return yN(t,s,i,o)?$E(t,s+2,a?r.call(a,i,o):r(i,o)):sC(t,s+2)}function Si(t,e){let n=sn(),r,i=t+At;n.firstCreatePass?(r=VO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Bi(r.type,!0)),a,s=kn(Nt);try{let u=ud(!1),l=o();return ud(u),pu(n,qe(),i,l),l}finally{kn(s)}}function VO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function eo(t,e,n){let r=t+At,i=qe(),o=Uc(i,r);return lC(i,r)?uC(i,qc(),e,o.transform,n,o):o.transform(n)}function Fv(t,e,n,r){let i=t+At,o=qe(),a=Uc(o,i);return lC(o,i)?BO(o,qc(),e,a.transform,n,r,a):a.transform(n,r)}function lC(t,e){return t[Ne].data[e].pure}var Ed=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Lv=(()=>{class t{compileModuleSync(n){return new md(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=jp(n),o=lE(i.declarations).reduce((a,s)=>{let u=$i(s);return u&&a.push(new es(u)),a},[]);return new Ed(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cC=(()=>{class t{applicationErrorHandler=te(Mr);appRef=te(Ji);taskService=te(Yi);ngZone=te(an);zonelessEnabled=te(yu);tracing=te(oa,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new fn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ou):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(Eg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?yg:mg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ou+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dC(){return[{provide:Hi,useExisting:cC},{provide:an,useClass:au},{provide:yu,useValue:!0}]}function jO(){return typeof $localize<"u"&&$localize.locale||ku}var is=new Ce("",{factory:()=>te(is,{optional:!0,skipSelf:!0})||jO()});function to(t,e){return ac(t,e?.equal)}var gC=Symbol("InputSignalNode#UNSET"),ek=ht(fe({},sc),{transformFn:void 0,applyValueToInputSignal(t,e){Ys(t,e)}});function vC(t,e){let n=Object.create(ek);n.value=t,n.transformFn=e?.transform;function r(){if(Gs(n),n.value===gC){let i=null;throw new de(-950,i)}return n.value}return r[zn]=n,r}function fC(t,e){return vC(t,e)}function tk(t){return vC(gC,t)}var ti=(fC.required=tk,fC);var Bv=new Ce(""),nk=new Ce("");function Bu(t){return!t.moduleRef}function rk(t){let e=Bu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(an);return n.run(()=>{Bu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Mr),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Bu(t)){let o=()=>e.destroy(),a=t.platformInjector.get(Bv);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(Bv);a.add(o),t.moduleRef.onDestroy(()=>{Du(t.allPlatformModules,t.moduleRef),i.unsubscribe(),a.delete(o)})}return ok(r,n,()=>{let o=e.get(Yi),a=o.add(),s=e.get(Rv);return s.runInitializers(),s.donePromise.then(()=>{let u=e.get(is,ku);if(nC(u||ku),!e.get(nk,!0))return Bu(t)?e.get(Ji):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Bu(t)){let c=e.get(Ji);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return ik?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(a))})})}var ik;function ok(t,e,n){try{let r=n();return ua(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var qd=null;function ak(t=[],e){return Pn.create({name:e,providers:[{provide:lu,useValue:"platform"},{provide:Bv,useValue:new Set([()=>qd=null])},...t]})}function sk(t=[]){if(qd)return qd;let e=ak(t);return qd=e,JE(),uk(e),e}function uk(t){let e=t.get(Id,null);Fn(t,()=>{e?.forEach(n=>n())})}var la=(()=>{class t{static __NG_ELEMENT_ID__=lk}return t})();function lk(t){return ck(Ln(),qe(),(t&16)===16)}function ck(t,e,n){if(Wi(t)&&!n){let r=hr(t.index,e);return new Ki(r,r)}else if(t.type&175){let r=e[rr];return new Ki(r,e)}return null}var Vv=class{constructor(){}supports(e){return e instanceof Map||_v(e)}create(){return new jv}},jv=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||_v(e)))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}let r=new Hv(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Hv=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function hC(){return new Uv([new Vv])}var Uv=(()=>{class t{static \u0275prov=Te({token:t,providedIn:"root",factory:hC});factories;constructor(n){this.factories=n}static create(n,r){if(r){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=te(t,{optional:!0,skipSelf:!0});return t.create(n,r||hC())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r)return r;throw new de(901,!1)}}return t})();function mC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;lt(Je.BootstrapApplicationStart);try{let o=i?.injector??sk(r),a=[dC(),tD,...n||[]],s=new _u({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return rk({r3Injector:s.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{lt(Je.BootstrapApplicationEnd)}}function ca(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function $v(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}var yC=null;function _i(){return yC}function zv(t){yC??=t}var Vu=class{},Gd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(bC),providedIn:"platform"})}return t})();var bC=(()=>{class t extends Gd{_location;_history;_doc=te(zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _i().getBaseHref(this._doc)}onPopState(n){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function EC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function wC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function no(t){return t&&t[0]!=="?"?`?${t}`:t}var Wd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(fk),providedIn:"root"})}return t})(),dk=new Ce(""),fk=(()=>{class t extends Wd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return EC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+no(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+no(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+no(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Ve(Gd),Ve(dk,8))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),as=(()=>{class t{_subject=new Lt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=gk(wC(DC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+no(r))}normalize(n){return t.stripTrailingSlash(pk(this._basePath,DC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+no(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=no;static joinWithSlash=EC;static stripTrailingSlash=wC;static \u0275fac=function(r){return new(r||t)(Ve(Wd))};static \u0275prov=Te({token:t,factory:()=>hk(),providedIn:"root"})}return t})();function hk(){return new as(Ve(Wd))}function pk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function DC(t){return t.replace(/\/index.html$/,"")}function gk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Qv=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(Qv||{});var Tn=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Tn||{}),vt=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(vt||{}),Yn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Yn||{}),Kn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function TC(t){return Zn(t)[kt.LocaleId]}function xC(t,e,n){let r=Zn(t),i=[r[kt.DayPeriodsFormat],r[kt.DayPeriodsStandalone]],o=mr(i,e);return mr(o,n)}function MC(t,e,n){let r=Zn(t),i=[r[kt.DaysFormat],r[kt.DaysStandalone]],o=mr(i,e);return mr(o,n)}function AC(t,e,n){let r=Zn(t),i=[r[kt.MonthsFormat],r[kt.MonthsStandalone]],o=mr(i,e);return mr(o,n)}function RC(t,e){let r=Zn(t)[kt.Eras];return mr(r,e)}function ju(t,e){let n=Zn(t);return mr(n[kt.DateFormat],e)}function Hu(t,e){let n=Zn(t);return mr(n[kt.TimeFormat],e)}function Uu(t,e){let r=Zn(t)[kt.DateTimeFormat];return mr(r,e)}function ni(t,e){let n=Zn(t),r=n[kt.NumberSymbols][e];if(typeof r>"u"){if(e===Kn.CurrencyDecimal)return n[kt.NumberSymbols][Kn.Decimal];if(e===Kn.CurrencyGroup)return n[kt.NumberSymbols][Kn.Group]}return r}function NC(t,e){return Zn(t)[kt.NumberFormats][e]}function OC(t){if(!t[kt.ExtraData])throw new de(2303,!1)}function kC(t){let e=Zn(t);return OC(e),(e[kt.ExtraData][2]||[]).map(r=>typeof r=="string"?qv(r):[qv(r[0]),qv(r[1])])}function PC(t,e,n){let r=Zn(t);OC(r);let i=[r[kt.ExtraData][0],r[kt.ExtraData][1]],o=mr(i,e)||[];return mr(o,n)||[]}function mr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new de(2304,!1)}function qv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var vk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zd={},mk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function FC(t,e,n,r){let i=_k(t);e=Ti(n,e)||e;let a=[],s;for(;e;)if(s=mk.exec(e),s){a=a.concat(s.slice(1));let c=a.pop();if(!c)break;e=c}else{a.push(e);break}let u=i.getTimezoneOffset();r&&(u=BC(r,u),i=Sk(i,r));let l="";return a.forEach(c=>{let d=Ck(c);l+=d?d(i,n,u):c==="''"?"'":c.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Jd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ti(t,e){let n=TC(t);if(Zd[n]??={},Zd[n][e])return Zd[n][e];let r="";switch(e){case"shortDate":r=ju(t,Yn.Short);break;case"mediumDate":r=ju(t,Yn.Medium);break;case"longDate":r=ju(t,Yn.Long);break;case"fullDate":r=ju(t,Yn.Full);break;case"shortTime":r=Hu(t,Yn.Short);break;case"mediumTime":r=Hu(t,Yn.Medium);break;case"longTime":r=Hu(t,Yn.Long);break;case"fullTime":r=Hu(t,Yn.Full);break;case"short":let i=Ti(t,"shortTime"),o=Ti(t,"shortDate");r=Yd(Uu(t,Yn.Short),[i,o]);break;case"medium":let a=Ti(t,"mediumTime"),s=Ti(t,"mediumDate");r=Yd(Uu(t,Yn.Medium),[a,s]);break;case"long":let u=Ti(t,"longTime"),l=Ti(t,"longDate");r=Yd(Uu(t,Yn.Long),[u,l]);break;case"full":let c=Ti(t,"fullTime"),d=Ti(t,"fullDate");r=Yd(Uu(t,Yn.Full),[c,d]);break}return r&&(Zd[n][e]=r),r}function Yd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Pr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let a=String(t);for(;a.length<e;)a="0"+a;return r&&(a=a.slice(a.length-e)),o+a}function yk(t,e){return Pr(t,3).substring(0,e)}function Gt(t,e,n=0,r=!1,i=!1){return function(o,a){let s=bk(t,o);if((n>0||s>-n)&&(s+=n),t===3)s===0&&n===-12&&(s=12);else if(t===6)return yk(s,e);let u=ni(a,Kn.MinusSign);return Pr(s,e,u,r,i)}}function bk(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new de(2301,!1)}}function Dt(t,e,n=Tn.Format,r=!1){return function(i,o){return wk(i,o,t,e,n,r)}}function wk(t,e,n,r,i,o){switch(n){case 2:return AC(e,i,r)[t.getMonth()];case 1:return MC(e,i,r)[t.getDay()];case 0:let a=t.getHours(),s=t.getMinutes();if(o){let l=kC(e),c=PC(e,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,p]=f,m=a>=h.hours&&s>=h.minutes,g=a<p.hours||a===p.hours&&s<p.minutes;if(h.hours<p.hours){if(m&&g)return!0}else if(m||g)return!0}else if(f.hours===a&&f.minutes===s)return!0;return!1});if(d!==-1)return c[d]}return xC(e,i,r)[a<12?0:1];case 3:return RC(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new de(2302,!1)}}function Kd(t){return function(e,n,r){let i=-1*r,o=ni(n,Kn.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Pr(a,2,o)+Pr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Pr(a,1,o);case 2:return"GMT"+(i>=0?"+":"")+Pr(a,2,o)+":"+Pr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Pr(a,2,o)+":"+Pr(Math.abs(i%60),2,o);default:throw new de(2310,!1)}}}var Dk=0,Xd=4;function Ek(t){let e=Jd(t,Dk,1).getDay();return Jd(t,0,1+(e<=Xd?Xd:Xd+7)-e)}function LC(t){let e=t.getDay(),n=e===0?-3:Xd-e;return Jd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Gv(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,a=n.getDate();i=1+Math.floor((a+o)/7)}else{let o=LC(n),a=Ek(o.getFullYear()),s=o.getTime()-a.getTime();i=1+Math.round(s/6048e5)}return Pr(i,t,ni(r,Kn.MinusSign))}}function Qd(t,e=!1){return function(n,r){let o=LC(n).getFullYear();return Pr(o,t,ni(r,Kn.MinusSign),e)}}var Wv={};function Ck(t){if(Wv[t])return Wv[t];let e;switch(t){case"G":case"GG":case"GGG":e=Dt(3,vt.Abbreviated);break;case"GGGG":e=Dt(3,vt.Wide);break;case"GGGGG":e=Dt(3,vt.Narrow);break;case"y":e=Gt(0,1,0,!1,!0);break;case"yy":e=Gt(0,2,0,!0,!0);break;case"yyy":e=Gt(0,3,0,!1,!0);break;case"yyyy":e=Gt(0,4,0,!1,!0);break;case"Y":e=Qd(1);break;case"YY":e=Qd(2,!0);break;case"YYY":e=Qd(3);break;case"YYYY":e=Qd(4);break;case"M":case"L":e=Gt(1,1,1);break;case"MM":case"LL":e=Gt(1,2,1);break;case"MMM":e=Dt(2,vt.Abbreviated);break;case"MMMM":e=Dt(2,vt.Wide);break;case"MMMMM":e=Dt(2,vt.Narrow);break;case"LLL":e=Dt(2,vt.Abbreviated,Tn.Standalone);break;case"LLLL":e=Dt(2,vt.Wide,Tn.Standalone);break;case"LLLLL":e=Dt(2,vt.Narrow,Tn.Standalone);break;case"w":e=Gv(1);break;case"ww":e=Gv(2);break;case"W":e=Gv(1,!0);break;case"d":e=Gt(2,1);break;case"dd":e=Gt(2,2);break;case"c":case"cc":e=Gt(7,1);break;case"ccc":e=Dt(1,vt.Abbreviated,Tn.Standalone);break;case"cccc":e=Dt(1,vt.Wide,Tn.Standalone);break;case"ccccc":e=Dt(1,vt.Narrow,Tn.Standalone);break;case"cccccc":e=Dt(1,vt.Short,Tn.Standalone);break;case"E":case"EE":case"EEE":e=Dt(1,vt.Abbreviated);break;case"EEEE":e=Dt(1,vt.Wide);break;case"EEEEE":e=Dt(1,vt.Narrow);break;case"EEEEEE":e=Dt(1,vt.Short);break;case"a":case"aa":case"aaa":e=Dt(0,vt.Abbreviated);break;case"aaaa":e=Dt(0,vt.Wide);break;case"aaaaa":e=Dt(0,vt.Narrow);break;case"b":case"bb":case"bbb":e=Dt(0,vt.Abbreviated,Tn.Standalone,!0);break;case"bbbb":e=Dt(0,vt.Wide,Tn.Standalone,!0);break;case"bbbbb":e=Dt(0,vt.Narrow,Tn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dt(0,vt.Abbreviated,Tn.Format,!0);break;case"BBBB":e=Dt(0,vt.Wide,Tn.Format,!0);break;case"BBBBB":e=Dt(0,vt.Narrow,Tn.Format,!0);break;case"h":e=Gt(3,1,-12);break;case"hh":e=Gt(3,2,-12);break;case"H":e=Gt(3,1);break;case"HH":e=Gt(3,2);break;case"m":e=Gt(4,1);break;case"mm":e=Gt(4,2);break;case"s":e=Gt(5,1);break;case"ss":e=Gt(5,2);break;case"S":e=Gt(6,1);break;case"SS":e=Gt(6,2);break;case"SSS":e=Gt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Kd(0);break;case"ZZZZZ":e=Kd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Kd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Kd(2);break;default:return null}return Wv[t]=e,e}function BC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Ik(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Sk(t,e,n){let i=t.getTimezoneOffset(),o=BC(e,i);return Ik(t,-1*(o-i))}function _k(t){if(CC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,a=1]=t.split("-").map(s=>+s);return Jd(i,o-1,a)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(vk))return Tk(r)}let e=new Date(t);if(!CC(e))throw new de(2311,!1);return e}function Tk(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,a,s,u,l),e}function CC(t){return t instanceof Date&&!isNaN(t.valueOf())}var xk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,IC=22,ef=".",$u="0",Mk=";",Ak=",",Zv="#";function Rk(t,e,n,r,i,o,a=!1){let s="",u=!1;if(!isFinite(t))s=ni(n,Kn.Infinity);else{let l=kk(t);a&&(l=Ok(l));let c=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let y=o.match(xk);if(y===null)throw new de(2306,!1);let b=y[1],w=y[3],E=y[5];b!=null&&(c=Yv(b)),w!=null&&(d=Yv(w)),E!=null?f=Yv(E):w!=null&&d>f&&(f=d)}Pk(l,d,f);let h=l.digits,p=l.integerLen,m=l.exponent,g=[];for(u=h.every(y=>!y);p<c;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?g=h.splice(p,h.length):(g=h,h=[0]);let v=[];for(h.length>=e.lgSize&&v.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)v.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&v.unshift(h.join("")),s=v.join(ni(n,r)),g.length&&(s+=ni(n,i)+g.join("")),m&&(s+=ni(n,Kn.Exponential)+"+"+m)}return t<0&&!u?s=e.negPre+s+e.negSuf:s=e.posPre+s+e.posSuf,s}function VC(t,e,n){let r=NC(e,Qv.Decimal),i=Nk(r,ni(e,Kn.MinusSign));return Rk(t,i,e,Kn.Group,Kn.Decimal,n)}function Nk(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(Mk),i=r[0],o=r[1],a=i.indexOf(ef)!==-1?i.split(ef):[i.substring(0,i.lastIndexOf($u)+1),i.substring(i.lastIndexOf($u)+1)],s=a[0],u=a[1]||"";n.posPre=s.substring(0,s.indexOf(Zv));for(let c=0;c<u.length;c++){let d=u.charAt(c);d===$u?n.minFrac=n.maxFrac=c+1:d===Zv?n.maxFrac=c+1:n.posSuf+=d}let l=s.split(Ak);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let c=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf(Zv);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+c).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function Ok(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function kk(t){let e=Math.abs(t)+"",n=0,r,i,o,a,s;for((i=e.indexOf(ef))>-1&&(e=e.replace(ef,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===$u;o++);if(o===(s=e.length))r=[0],i=1;else{for(s--;e.charAt(s)===$u;)s--;for(i-=o,r=[],a=0;o<=s;o++,a++)r[a]=Number(e.charAt(o))}return i>IC&&(r=r.splice(0,IC-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function Pk(t,e,n){if(e>n)throw new de(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(let d=a;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(let d=1;d<a;d++)r[d]=0}if(s>=5)if(a-1<0){for(let d=0;d>a;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,c=r.reduceRight(function(d,f,h,p){return f=f+d,p[h]=f<10?f:f-10,u&&(p[h]===0&&h>=l?p.pop():u=!1),f>=10?1:0},0);c&&(r.unshift(c),t.integerLen++)}function Yv(t){let e=parseInt(t);if(isNaN(e))throw new de(2305,!1);return e}var Kv=/\s+/,SC=[],Xv=(()=>{class t{_ngEl;_renderer;initialClasses=SC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(Kv):SC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Kv):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Kv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Nt(ar),Nt(Ii))};static \u0275dir=Wn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();function jC(t,e){return new de(2100,!1)}var Fk="mediumDate",HC=new Ce(""),UC=new Ce(""),Jv=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let a=r??this.defaultOptions?.dateFormat??Fk,s=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return FC(n,a,o||this.locale,s)}catch(a){throw jC(t,a.message)}}static \u0275fac=function(r){return new(r||t)(Nt(is,16),Nt(HC,24),Nt(UC,24))};static \u0275pipe=Ou({name:"date",type:t,pure:!0})}return t})();function Lk(t,e){return{key:t,value:e}}var em=(()=>{class t{differs;constructor(n){this.differs=n}differ;keyValues=[];compareFn=_C;transform(n,r=_C){if(!n||!(n instanceof Map)&&typeof n!="object")return null;this.differ??=this.differs.find(n).create();let i=this.differ.diff(n),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(a=>{this.keyValues.push(Lk(a.key,a.currentValue))})),(i||o)&&(r&&this.keyValues.sort(r),this.compareFn=r),this.keyValues}static \u0275fac=function(r){return new(r||t)(Nt(Uv,16))};static \u0275pipe=Ou({name:"keyvalue",type:t,pure:!1})}return t})();function _C(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n==null)return 1;if(r==null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),o=String(r);return i==o?0:i<o?-1:1}var tm=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!Bk(n))return null;i||=this._locale;try{let o=Vk(n);return VC(o,i,r)}catch(o){throw jC(t,o.message)}}static \u0275fac=function(r){return new(r||t)(Nt(is,16))};static \u0275pipe=Ou({name:"number",type:t,pure:!0})}return t})();function Bk(t){return!(t==null||t===""||t!==t)}function Vk(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new de(2309,!1);return t}function nm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var zu=class{};var zC="browser";var qC=t=>t.src,Uk=new Ce("",{factory:()=>qC});var $C=/^((\s*\d+w\s*(,|$)){1,})$/;var $k=[1,2],zk=640;var qk=1920,Gk=1080;var GC=(()=>{class t{imageLoader=te(Uk);config=Wk(te(Td));renderer=te(Ii);imgElement=te(ar).nativeElement;injector=te(Pn);destroyRef=te(or);lcpObserver;_renderedSrc=null;ngSrc;ngSrcset;sizes;width;height;decoding;loading;priority=!1;loaderParams;disableOptimizedSrcset=!1;fill=!1;placeholder;placeholderConfig;src;srcset;constructor(){}ngOnInit(){Or("NgOptimizedImage"),this.placeholder&&this.removePlaceholderOnLoad(this.imgElement),this.setHostAttributes()}setHostAttributes(){this.fill?this.sizes||="100vw":(this.setHostAttribute("width",this.width.toString()),this.setHostAttribute("height",this.height.toString())),this.setHostAttribute("loading",this.getLoadingBehavior()),this.setHostAttribute("fetchpriority",this.getFetchPriority()),this.setHostAttribute("decoding",this.getDecoding()),this.setHostAttribute("ng-img","true");let n=this.updateSrcAndSrcset();this.sizes?this.getLoadingBehavior()==="lazy"?this.setHostAttribute("sizes","auto, "+this.sizes):this.setHostAttribute("sizes",this.sizes):this.ngSrcset&&$C.test(this.ngSrcset)&&this.getLoadingBehavior()==="lazy"&&this.setHostAttribute("sizes","auto, 100vw")}ngOnChanges(n){if(n.ngSrc&&!n.ngSrc.isFirstChange()){let r=this._renderedSrc;this.updateSrcAndSrcset(!0)}}callImageLoader(n){let r=n;return this.loaderParams&&(r.loaderParams=this.loaderParams),this.imageLoader(r)}getLoadingBehavior(){return!this.priority&&this.loading!==void 0?this.loading:this.priority?"eager":"lazy"}getFetchPriority(){return this.priority?"high":"auto"}getDecoding(){return this.priority?"sync":this.decoding??"auto"}getRewrittenSrc(){if(!this._renderedSrc){let n={src:this.ngSrc};this._renderedSrc=this.callImageLoader(n)}return this._renderedSrc}getRewrittenSrcset(){let n=$C.test(this.ngSrcset);return this.ngSrcset.split(",").filter(i=>i!=="").map(i=>{i=i.trim();let o=n?parseFloat(i):parseFloat(i)*this.width;return`${this.callImageLoader({src:this.ngSrc,width:o})} ${i}`}).join(", ")}getAutomaticSrcset(){return this.sizes?this.getResponsiveSrcset():this.getFixedSrcset()}getResponsiveSrcset(){let{breakpoints:n}=this.config,r=n;return this.sizes?.trim()==="100vw"&&(r=n.filter(o=>o>=zk)),r.map(o=>`${this.callImageLoader({src:this.ngSrc,width:o})} ${o}w`).join(", ")}updateSrcAndSrcset(n=!1){n&&(this._renderedSrc=null);let r=this.getRewrittenSrc();this.setHostAttribute("src",r);let i;return this.ngSrcset?i=this.getRewrittenSrcset():this.shouldGenerateAutomaticSrcset()&&(i=this.getAutomaticSrcset()),i&&this.setHostAttribute("srcset",i),i}getFixedSrcset(){return $k.map(r=>`${this.callImageLoader({src:this.ngSrc,width:this.width*r})} ${r}x`).join(", ")}shouldGenerateAutomaticSrcset(){let n=!1;return this.sizes||(n=this.width>qk||this.height>Gk),!this.disableOptimizedSrcset&&!this.srcset&&this.imageLoader!==qC&&!n}generatePlaceholder(n){let{placeholderResolution:r}=this.config;return n===!0?`url(${this.callImageLoader({src:this.ngSrc,width:r,isPlaceholder:!0})})`:typeof n=="string"?`url(${n})`:null}shouldBlurPlaceholder(n){return!n||!n.hasOwnProperty("blur")?!0:!!n.blur}removePlaceholderOnLoad(n){let r=()=>{let a=this.injector.get(la);i(),o(),this.placeholder=!1,a.markForCheck()},i=this.renderer.listen(n,"load",r),o=this.renderer.listen(n,"error",r);this.destroyRef.onDestroy(()=>{i(),o()}),Zk(n,r)}setHostAttribute(n,r){this.renderer.setAttribute(this.imgElement,n,r)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Wn({type:t,selectors:[["img","ngSrc",""]],hostVars:18,hostBindings:function(r,i){r&2&&Ud("position",i.fill?"absolute":null)("width",i.fill?"100%":null)("height",i.fill?"100%":null)("inset",i.fill?"0":null)("background-size",i.placeholder?"cover":null)("background-position",i.placeholder?"50% 50%":null)("background-repeat",i.placeholder?"no-repeat":null)("background-image",i.placeholder?i.generatePlaceholder(i.placeholder):null)("filter",i.placeholder&&i.shouldBlurPlaceholder(i.placeholderConfig)?"blur(15px)":null)},inputs:{ngSrc:[2,"ngSrc","ngSrc",Yk],ngSrcset:"ngSrcset",sizes:"sizes",width:[2,"width","width",$v],height:[2,"height","height",$v],decoding:"decoding",loading:"loading",priority:[2,"priority","priority",ca],loaderParams:"loaderParams",disableOptimizedSrcset:[2,"disableOptimizedSrcset","disableOptimizedSrcset",ca],fill:[2,"fill","fill",ca],placeholder:[2,"placeholder","placeholder",Kk],placeholderConfig:"placeholderConfig",src:"src",srcset:"srcset"},features:[ia]})}return t})();function Wk(t){let e={};return t.breakpoints&&(e.breakpoints=t.breakpoints.sort((n,r)=>n-r)),Object.assign({},_d,t,e)}function Zk(t,e){t.complete&&t.naturalWidth&&e()}function Yk(t){return typeof t=="string"?t:xd(t)}function Kk(t){return typeof t=="string"&&t!=="true"&&t!=="false"&&t!==""?t:ca(t)}var qu=class{_doc;constructor(e){this._doc=e}manager},tf=(()=>{class t extends qu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(Ve(zt))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),of=new Ce(""),am=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(a=>{a.manager=this});let i=n.filter(a=>!(a instanceof tf));this._plugins=i.slice().reverse();let o=n.find(a=>a instanceof tf);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Ve(of),Ve(an))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),rm="ng-app-id";function WC(t){for(let e of t)e.remove()}function ZC(t,e){let n=e.createElement("style");return n.textContent=t,n}function Qk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${rm}="${e}"],link[${rm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(rm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function om(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var sm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Qk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,ZC);r?.forEach(i=>this.addUsage(i,this.external,om))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(WC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])WC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,ZC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,om(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Ve(zt),Ve(Cd),Ve(Sd,8),Ve(Mu))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),im={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},um=/%COMP%/g;var KC="%COMP%",Xk=`_nghost-${KC}`,Jk=`_ngcontent-${KC}`,eP=!0,tP=new Ce("",{factory:()=>eP});function nP(t){return Jk.replace(um,t)}function rP(t){return Xk.replace(um,t)}function QC(t,e){return e.map(n=>n.replace(um,t))}var lm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,a,s,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=s,this.nonce=u,this.tracingService=l,this.defaultRenderer=new Gu(n,a,s,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof rf?i.applyToHost(n):i instanceof Wu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,s=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case Nr.Emulated:o=new rf(u,l,r,this.appId,c,a,s,d);break;case Nr.ShadowDom:return new nf(u,n,r,a,s,this.nonce,d,l);case Nr.ExperimentalIsolatedShadowDom:return new nf(u,n,r,a,s,this.nonce,d);default:o=new Wu(u,l,r,c,a,s,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Ve(am),Ve(sm),Ve(Cd),Ve(tP),Ve(zt),Ve(an),Ve(Sd),Ve(oa,8))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),Gu=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(im[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(YC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=im[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=im[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qr.DashCase|Qr.Important)?e.style.setProperty(n,r,i&Qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=_i().getGlobalEventTarget(this.doc,e),!e))throw new de(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function YC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var nf=class extends Gu{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,a,s,u){super(e,i,o,s),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=QC(r.id,l);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}let c=r.getExternalStyles?.();if(c)for(let d of c){let f=om(d,i);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Wu=class extends Gu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,a,s,u){super(e,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?QC(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ea.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},rf=class extends Wu{contentAttr;hostAttr;constructor(e,n,r,i,o,a,s,u){let l=i+"-"+r.id;super(e,n,r,o,a,s,u,l),this.contentAttr=nP(l),this.hostAttr=rP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var af=class t extends Vu{supportsDOMEvents=!0;static makeCurrent(){zv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=iP();return n==null?null:oP(n)}resetBaseElement(){Zu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nm(document.cookie,e)}},Zu=null;function iP(){return Zu=Zu||document.head.querySelector("base"),Zu?Zu.getAttribute("href"):null}function oP(t){return new URL(t,document.baseURI).pathname}var aP=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),XC=["alt","control","meta","shift"],sP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},JC=(()=>{class t extends qu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let a=t.parseEventName(r),s=t.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_i().onAndCancel(n,a.domEventName,s,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),a="code."),XC.forEach(l=>{let c=r.indexOf(l);c>-1&&(r.splice(c,1),a+=l+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(n,r){let i=sP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),XC.forEach(a=>{if(a!==i){let s=uP[a];s(n)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Ve(zt))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();function cm(t,e,n){let r=fe({rootComponent:t,platformRef:n?.platformRef},lP(e));return mC(r)}function lP(t){return{appProviders:[...pP,...t?.providers??[]],platformProviders:hP}}function cP(){af.makeCurrent()}function dP(){return new zr}function fP(){return cv(document),document}var hP=[{provide:Mu,useValue:zC},{provide:Id,useValue:cP,multi:!0},{provide:zt,useFactory:fP}];var pP=[{provide:lu,useValue:"root"},{provide:zr,useFactory:dP},{provide:of,useClass:tf,multi:!0},{provide:of,useClass:JC,multi:!0},lm,sm,am,{provide:ta,useExisting:lm},{provide:zu,useClass:aP},[]];var eI=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Ve(zt))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Be="primary",ol=Symbol("RouteTitle"),gm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ds(t){return new gm(t)}function vP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=t[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ff(t){return new Promise((e,n)=>{t.pipe(yi()).subscribe({next:r=>e(r),error:r=>n(r)})})}function mP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ri(t[n],e[n]))return!1;return!0}function ri(t,e){let n=t?vm(t):void 0,r=e?vm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!lI(t[i],e[i]))return!1;return!0}function vm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function lI(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function cI(t){return t.length>0?t[t.length-1]:null}function va(t){return Sc(t)?t:ua(t)?on(Promise.resolve(t)):Ke(t)}function dI(t){return Sc(t)?ff(t):Promise.resolve(t)}var yP={exact:hI,subset:pI},fI={exact:bP,subset:wP,ignored:()=>!0};function tI(t,e,n){return yP[n.paths](t.root,e.root,n.matrixParams)&&fI[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bP(t,e){return ri(t,e)}function hI(t,e,n){if(!ha(t.segments,e.segments)||!lf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!hI(t.children[r],e.children[r],n))return!1;return!0}function wP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lI(t[n],e[n]))}function pI(t,e,n){return gI(t,e,e.segments,n)}function gI(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ha(i,n)||e.hasChildren()||!lf(i,n,r))}else if(t.segments.length===n.length){if(!ha(t.segments,n)||!lf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!pI(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ha(t.segments,i)||!lf(t.segments,i,r)||!t.children[Be]?!1:gI(t.children[Be],e,o,r)}}function lf(t,e,n){return e.every((r,i)=>fI[n](t[i].parameters,r.parameters))}var ii=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ct([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ds(this.queryParams),this._queryParamMap}toString(){return CP.serialize(this)}},ct=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}},fa=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ds(this.parameters),this._parameterMap}toString(){return mI(this)}};function DP(t,e){return ha(t,e)&&t.every((n,r)=>ri(n.parameters,e[r].parameters))}function ha(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function EP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Be&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Be&&(n=n.concat(e(i,r)))}),n}var Cf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>new pa,providedIn:"root"})}return t})(),pa=class{parse(e){let n=new ym(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yu(e.root,!0)}`,r=_P(e.queryParams),i=typeof e.fragment=="string"?`#${IP(e.fragment)}`:"";return`${n}${r}${i}`}},CP=new pa;function cf(t){return t.segments.map(e=>mI(e)).join("/")}function Yu(t,e){if(!t.hasChildren())return cf(t);if(e){let n=t.children[Be]?Yu(t.children[Be],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Be&&r.push(`${i}:${Yu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=EP(t,(r,i)=>i===Be?[Yu(t.children[Be],!1)]:[`${i}:${Yu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Be]!=null?`${cf(t)}/${n[0]}`:`${cf(t)}/(${n.join("//")})`}}function vI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sf(t){return vI(t).replace(/%3B/gi,";")}function IP(t){return encodeURI(t)}function mm(t){return vI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(t){return decodeURIComponent(t)}function nI(t){return df(t.replace(/\+/g,"%20"))}function mI(t){return`${mm(t.path)}${SP(t.parameters)}`}function SP(t){return Object.entries(t).map(([e,n])=>`;${mm(e)}=${mm(n)}`).join("")}function _P(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sf(n)}=${sf(i)}`).join("&"):`${sf(n)}=${sf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var TP=/^[^\/()?;#]+/;function dm(t){let e=t.match(TP);return e?e[0]:""}var xP=/^[^\/()?;=#]+/;function MP(t){let e=t.match(xP);return e?e[0]:""}var AP=/^[^=?&#]+/;function RP(t){let e=t.match(AP);return e?e[0]:""}var NP=/^[^&#]+/;function OP(t){let e=t.match(NP);return e?e[0]:""}var ym=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Be]=new ct(e,n)),r}parseSegment(){let e=dm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new fa(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=MP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=dm(this.remaining);i&&(r=i,this.capture(r))}e[df(n)]=df(r)}parseQueryParam(e){let n=RP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=OP(this.remaining);a&&(r=a,this.capture(r))}let i=nI(n),o=nI(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=dm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Be);let a=this.parseChildren();n[o??Be]=Object.keys(a).length===1&&a[Be]?a[Be]:new ct([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}};function yI(t){return t.segments.length>0?new ct([],{[Be]:t}):t}function bI(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=bI(i);if(r===Be&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))e[a]=s;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ct(t.segments,e);return kP(n)}function kP(t){if(t.numberOfChildren===1&&t.children[Be]){let e=t.children[Be];return new ct(t.segments.concat(e.segments),e.children)}return t}function fs(t){return t instanceof ii}function PP(t,e,n=null,r=null,i=new pa){let o=wI(t);return DI(o,e,n,r,i)}function wI(t){let e;function n(o){let a={};for(let u of o.children){let l=n(u);a[u.outlet]=l}let s=new ct(o.url,a);return o===t&&(e=s),s}let r=n(t.root),i=yI(r);return e??i}function DI(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return fm(o,o,o,n,r,i);let a=FP(e);if(a.toRoot())return fm(o,o,new ct([],{}),n,r,i);let s=LP(a,o,t),u=s.processChildren?Qu(s.segmentGroup,s.index,a.commands):CI(s.segmentGroup,s.index,a.commands);return fm(o,s.segmentGroup,u,n,r,i)}function hf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function el(t){return typeof t=="object"&&t!=null&&t.outlets}function rI(t,e,n){t||="\u0275";let r=new ii;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function fm(t,e,n,r,i,o){let a={};for(let[l,c]of Object.entries(r??{}))a[l]=Array.isArray(c)?c.map(d=>rI(l,d,o)):rI(l,c,o);let s;t===e?s=n:s=EI(t,e,n);let u=yI(bI(s));return new ii(u,a,i)}function EI(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=EI(o,e,n)}),new ct(t.segments,r)}var pf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hf(r[0]))throw new de(4003,!1);let i=r.find(el);if(i&&i!==cI(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new pf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([u,l])=>{s[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,u)=>{u==0&&s==="."||(u==0&&s===""?n=!0:s===".."?e++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new pf(n,e,r)}var us=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function LP(t,e,n){if(t.isAbsolute)return new us(e,!0,0);if(!n)return new us(e,!1,NaN);if(n.parent===null)return new us(n,!0,0);let r=hf(t.commands[0])?0:1,i=n.segments.length-1+r;return BP(n,i,t.numberOfDoubleDots)}function BP(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new us(r,!1,i-o)}function VP(t){return el(t[0])?t[0].outlets:{[Be]:t}}function CI(t,e,n){if(t??=new ct([],{}),t.segments.length===0&&t.hasChildren())return Qu(t,e,n);let r=jP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ct(t.segments.slice(0,r.pathIndex),{});return o.children[Be]=new ct(t.segments.slice(r.pathIndex),t.children),Qu(o,0,i)}else return r.match&&i.length===0?new ct(t.segments,{}):r.match&&!t.hasChildren()?bm(t,e,n):r.match?Qu(t,0,i):bm(t,e,n)}function Qu(t,e,n){if(n.length===0)return new ct(t.segments,{});{let r=VP(n),i={};if(Object.keys(r).some(o=>o!==Be)&&t.children[Be]&&t.numberOfChildren===1&&t.children[Be].segments.length===0){let o=Qu(t.children[Be],e,n);return new ct(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=CI(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new ct(t.segments,i)}}function jP(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let a=t.segments[i],s=n[r];if(el(s))break;let u=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!oI(u,l,a))return o;r+=2}else{if(!oI(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function bm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(el(o)){let u=HP(o.outlets);return new ct(r,u)}if(i===0&&hf(n[0])){let u=t.segments[e];r.push(new fa(u.path,iI(n[0]))),i++;continue}let a=el(o)?o.outlets[Be]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&hf(s)?(r.push(new fa(a,iI(s))),i+=2):(r.push(new fa(a,{})),i++)}return new ct(r,{})}function HP(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=bm(new ct([],{}),0,r))}),e}function iI(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function oI(t,e,n){return t==n.path&&ri(e,n.parameters)}var Xu="imperative",yn=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(yn||{}),yr=class{id;url;constructor(e,n){this.id=e,this.url=n}},hs=class extends yr{type=yn.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ro=class extends yr{urlAfterRedirects;type=yn.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Qn||{}),gf=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(gf||{}),xi=class extends yr{reason;code;type=yn.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},io=class extends yr{reason;code;type=yn.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},tl=class extends yr{error;target;type=yn.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vf=class extends yr{urlAfterRedirects;state;type=yn.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wm=class extends yr{urlAfterRedirects;state;type=yn.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends yr{urlAfterRedirects;state;shouldActivate;type=yn.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Em=class extends yr{urlAfterRedirects;state;type=yn.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cm=class extends yr{urlAfterRedirects;state;type=yn.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Im=class{route;type=yn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sm=class{route;type=yn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_m=class{snapshot;type=yn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tm=class{snapshot;type=yn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xm=class{snapshot;type=yn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mm=class{snapshot;type=yn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nl=class{},ps=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function UP(t){return!(t instanceof nl)&&!(t instanceof ps)}function $P(t,e){return t.providers&&!t._injector&&(t._injector=Nu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Fr(t){return t.outlet||Be}function zP(t,e){let n=t.filter(r=>Fr(r)===e);return n.push(...t.filter(r=>Fr(r)!==e)),n}function vs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Am=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return vs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new al(this.rootInjector)}},al=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Am(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Ve(gn))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Rm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Rm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Nm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Nm(e,this._root).map(n=>n.value)}};function Rm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Rm(t,n);if(r)return r}return null}function Nm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Nm(t,n);if(r.length)return r.unshift(e),r}return[]}var sr=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ss(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var yf=class extends mf{snapshot;constructor(e,n){super(e),this.snapshot=n,Vm(this,e)}toString(){return this.snapshot.toString()}};function II(t){let e=qP(t),n=new hn([new fa("",{})]),r=new hn({}),i=new hn({}),o=new hn({}),a=new hn(""),s=new ga(n,r,o,a,i,Be,t,e.root);return s.snapshot=e.root,new yf(new sr(s,[]),e)}function qP(t){let e={},n={},r={},o=new ls([],e,r,"",n,Be,t,null,{});return new wf("",new sr(o,[]))}var ga=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,a,s,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(St(l=>l[ol]))??Ke(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(St(e=>ds(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(St(e=>ds(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:fe(fe({},e.params),t.params),data:fe(fe({},e.data),t.data),resolve:fe(fe(fe(fe({},t.data),e.data),i?.data),t._resolvedData)}:r={params:fe({},t.params),data:fe({},t.data),resolve:fe(fe({},t.data),t._resolvedData??{})},i&&_I(i)&&(r.resolve[ol]=i.title),r}var ls=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ol]}constructor(e,n,r,i,o,a,s,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ds(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ds(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},wf=class extends mf{url;constructor(e,n){super(n),this.url=e,Vm(this,n)}toString(){return SI(this._root)}};function Vm(t,e){e.value._routerState=t,e.children.forEach(n=>Vm(t,n))}function SI(t){let e=t.children.length>0?` { ${t.children.map(SI).join(", ")} } `:"";return`${t.value}${e}`}function hm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ri(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ri(e.params,n.params)||t.paramsSubject.next(n.params),mP(e.url,n.url)||t.urlSubject.next(n.url),ri(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Om(t,e){let n=ri(t.params,e.params)&&DP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Om(t.parent,e.parent))}function _I(t){return typeof t.title=="string"||t.title===null}var GP=new Ce(""),TI=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Be;activateEvents=new Sn;deactivateEvents=new Sn;attachEvents=new Sn;detachEvents=new Sn;routerOutletData=ti();parentContexts=te(al);location=te(aa);changeDetector=te(la);inputBinder=te(If,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=n;let i=this.location,a=n.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,u=new km(n,s,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Wn({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ia]})}return t})(),km=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===ga?this.route:e===al?this.childContexts:e===GP?this.outletData:this.parent.get(e,n)}},If=new Ce("");var xI=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Bn({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&gt(0,"router-outlet")},dependencies:[TI],encapsulation:2})}return t})();function jm(t){let e=t.children&&t.children.map(jm),n=e?ht(fe({},t),{children:e}):fe({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Be&&(n.component=xI),n}function WP(t,e,n){let r=rl(t,e._root,n?n._root:void 0);return new yf(r,e)}function rl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=ZP(t,e,n);return new sr(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>rl(t,s)),a}}let r=YP(e.value),i=e.children.map(o=>rl(t,o));return new sr(r,i)}}function ZP(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return rl(t,r,i);return rl(t,r)})}function YP(t){return new ga(new hn(t.url),new hn(t.params),new hn(t.queryParams),new hn(t.fragment),new hn(t.data),t.outlet,t.component,t)}var il=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},MI="ngNavigationCancelingError";function Df(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=fs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AI(!1,Qn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function AI(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[MI]=!0,n.cancellationCode=e,n}function KP(t){return RI(t)&&fs(t.url)}function RI(t){return!!t&&t[MI]}var QP=(t,e,n,r)=>St(i=>(new Pm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Pm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),hm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ss(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ss(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ss(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ss(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Tm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(hm(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),hm(s.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Ef=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},cs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function XP(t,e,n){let r=t._root,i=e?e._root:null;return Ku(r,i,n,[r.value])}function JP(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ms(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!kp(t)?t:e.get(t):r}function Ku(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ss(e);return t.children.forEach(a=>{eF(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Ju(s,n.getContext(a),i)),i}function eF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=tF(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ef(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Ku(t,e,s?s.children:null,r,i):Ku(t,e,n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new cs(s.outlet.component,a))}else a&&Ju(e,s,i),i.canActivateChecks.push(new Ef(r)),o.component?Ku(t,null,s?s.children:null,r,i):Ku(t,null,n,r,i);return i}function tF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ha(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(t.url,e.url)||!ri(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Om(t,e)||!ri(t.queryParams,e.queryParams);case"paramsChange":default:return!Om(t,e)}}function Ju(t,e,n){let r=ss(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?e?Ju(a,e.children.getContext(o),n):Ju(a,null,n):Ju(a,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new cs(e.outlet.component,i)):n.canDeactivateChecks.push(new cs(null,i)):n.canDeactivateChecks.push(new cs(null,i))}function sl(t){return typeof t=="function"}function nF(t){return typeof t=="boolean"}function rF(t){return t&&sl(t.canLoad)}function iF(t){return t&&sl(t.canActivate)}function oF(t){return t&&sl(t.canActivateChild)}function aF(t){return t&&sl(t.canDeactivate)}function sF(t){return t&&sl(t.canMatch)}function NI(t){return t instanceof No||t?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function gs(){return Ur(t=>pp(t.map(e=>e.pipe(mi(1),mp(uf)))).pipe(St(e=>{for(let n of e)if(n!==!0){if(n===uf)return uf;if(n===!1||uF(n))return n}return!0}),Hr(e=>e!==uf),mi(1)))}function uF(t){return fs(t)||t instanceof il}function OI(t){return t.aborted?Ke(void 0).pipe(mi(1)):new rt(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function kI(t){return eu(OI(t))}function lF(t,e){return Nn(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?Ke(ht(fe({},n),{guardsResult:!0})):cF(a,r,i,t).pipe(Nn(s=>s&&nF(s)?dF(r,o,t,e):Ke(s)),St(s=>ht(fe({},n),{guardsResult:s})))})}function cF(t,e,n,r){return on(t).pipe(Nn(i=>vF(i.component,i.route,n,e,r)),yi(i=>i!==!0,!0))}function dF(t,e,n,r){return on(e).pipe(_c(i=>Ha(hF(i.route.parent,r),fF(i.route,r),gF(t,i.path,n),pF(t,i.route,n))),yi(i=>i!==!0,!0))}function fF(t,e){return t!==null&&e&&e(new xm(t)),Ke(!0)}function hF(t,e){return t!==null&&e&&e(new _m(t)),Ke(!0)}function pF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Ke(!0);let i=r.map(o=>Xs(()=>{let a=vs(e)??n,s=ms(o,a),u=iF(s)?s.canActivate(e,t):Fn(a,()=>s(e,t));return va(u).pipe(yi())}));return Ke(i).pipe(gs())}function gF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>JP(a)).filter(a=>a!==null).map(a=>Xs(()=>{let s=a.guards.map(u=>{let l=vs(a.node)??n,c=ms(u,l),d=oF(c)?c.canActivateChild(r,t):Fn(l,()=>c(r,t));return va(d).pipe(yi())});return Ke(s).pipe(gs())}));return Ke(o).pipe(gs())}function vF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ke(!0);let a=o.map(s=>{let u=vs(e)??i,l=ms(s,u),c=aF(l)?l.canDeactivate(t,e,n,r):Fn(u,()=>l(t,e,n,r));return va(c).pipe(yi())});return Ke(a).pipe(gs())}function mF(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return Ke(!0);let a=o.map(s=>{let u=ms(s,t),l=rF(u)?u.canLoad(e,n):Fn(t,()=>u(e,n)),c=va(l);return i?c.pipe(kI(i)):c});return Ke(a).pipe(gs(),PI(r))}function PI(t){return cp(On(e=>{if(typeof e!="boolean")throw Df(t,e)}),St(e=>e===!0))}function yF(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return Ke(!0);let a=o.map(s=>{let u=ms(s,t),l=sF(u)?u.canMatch(e,n):Fn(t,()=>u(e,n)),c=va(l);return i?c.pipe(kI(i)):c});return Ke(a).pipe(gs(),PI(r))}var da=class FI extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,FI.prototype)}},Fm=class LI extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,LI.prototype)}};function bF(t){throw new de(4e3,!1)}function wF(t){throw AI(!1,Qn.GuardRejected)}var DF=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Be])throw bF(`${e.redirectTo}`);i=i.children[Be]}}async applyRedirectCommands(e,n,r,i,o){let a=await EF(n,i,o);if(a instanceof ii)throw new Fm(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new Fm(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ii(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,u])=>{a[s]=this.createSegmentGroup(e,u,r,i)}),new ct(o,a)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function EF(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:a,url:s,outlet:u,params:l,data:c,title:d}=e;return ff(va(Fn(n,()=>r({params:l,data:c,queryParams:i,fragment:o,routeConfig:a,url:s,outlet:u,title:d}))))}var Lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CF(t,e,n,r,i,o){let a=BI(t,e,n);return a.matched?(r=$P(e,r),yF(r,e,n,i,o).pipe(St(s=>s===!0?a:fe({},Lm)))):Ke(a)}function BI(t,e,n){if(e.path==="**")return IF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?fe({},Lm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vP)(n,t,e);if(!i)return fe({},Lm);let o={};Object.entries(i.posParams??{}).forEach(([s,u])=>{o[s]=u.path});let a=i.consumed.length>0?fe(fe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function IF(t){return{matched:!0,parameters:t.length>0?cI(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function aI(t,e,n,r){return n.length>0&&TF(t,n,r)?{segmentGroup:new ct(e,_F(r,new ct(n,t.children))),slicedSegments:[]}:n.length===0&&xF(t,n,r)?{segmentGroup:new ct(t.segments,SF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ct(t.segments,t.children),slicedSegments:n}}function SF(t,e,n,r){let i={};for(let o of n)if(Sf(t,e,o)&&!r[Fr(o)]){let a=new ct([],{});i[Fr(o)]=a}return fe(fe({},r),i)}function _F(t,e){let n={};n[Be]=e;for(let r of t)if(r.path===""&&Fr(r)!==Be){let i=new ct([],{});n[Fr(r)]=i}return n}function TF(t,e,n){return n.some(r=>Sf(t,e,r)&&Fr(r)!==Be)}function xF(t,e,n){return n.some(r=>Sf(t,e,r))}function Sf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function MF(t,e,n){return e.length===0&&!t.children[n]}var AF=class{};async function RF(t,e,n,r,i,o,a="emptyOnly",s){return new OF(t,e,n,r,i,a,o,s).recognize()}var NF=31,OF=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,a,s,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.abortSignal=u,this.applyRedirects=new DF(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,`'${e.segmentGroup}'`)}async recognize(){let e=aI(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new sr(r,n),o=new wf("",i),a=PP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}async match(e){let n=new ls([],Object.freeze({}),Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Be,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Be,n),rootSnapshot:n}}catch(r){if(r instanceof Fm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof da?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let a=await this.processSegment(e,n,r,r.segments,i,!0,o);return a instanceof sr?[a]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let a=[];for(let u of o){let l=r.children[u],c=zP(n,u),d=await this.processSegmentGroup(e,c,l,u,i);a.push(...d)}let s=VI(a);return kF(s),s}async processSegment(e,n,r,i,o,a,s){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,a,s)}catch(l){if(l instanceof da||NI(l))continue;throw l}if(MF(r,i,o))return new AF;throw new da(r)}async processSegmentAgainstRoute(e,n,r,i,o,a,s,u){if(Fr(r)!==a&&(a===Be||!Sf(i,o,r)))throw new da(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,a,u);if(this.allowRedirects&&s)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,a,u);throw new da(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a,s){let{matched:u,parameters:l,consumedSegments:c,positionalParamSegments:d,remainingSegments:f}=BI(n,i,o);if(!u)throw new da(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NF&&(this.allowRedirects=!1));let h=new ls(o,l,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,sI(i),Fr(i),i.component??i._loadedComponent??null,i,uI(i)),p=bf(h,s,this.paramsInheritanceStrategy);if(h.params=Object.freeze(p.params),h.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let m=await this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d,h,e),g=await this.applyRedirects.lineralizeSegments(i,m);return this.processSegment(e,r,n,g.concat(f),a,!1,s)}async matchSegmentAgainstRoute(e,n,r,i,o,a){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let s=await ff(CF(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!s?.matched)throw new da(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:c,consumedSegments:d,remainingSegments:f}=s,h=new ls(d,c,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,sI(r),Fr(r),r.component??r._loadedComponent??null,r,uI(r)),p=bf(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let{segmentGroup:m,slicedSegments:g}=aI(n,d,f,u);if(g.length===0&&m.hasChildren()){let b=await this.processChildren(l,u,m,h);return new sr(h,b)}if(u.length===0&&g.length===0)return new sr(h,[]);let v=Fr(r)===o,y=await this.processSegment(l,u,m,g,v?Be:o,!0,h);return new sr(h,y instanceof sr?[y]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ff(mF(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw wF(n)}return{routes:[],injector:e}}};function kF(t){t.sort((e,n)=>e.value.outlet===Be?-1:n.value.outlet===Be?1:e.value.outlet.localeCompare(n.value.outlet))}function PF(t){let e=t.value.routeConfig;return e&&e.path===""}function VI(t){let e=[],n=new Set;for(let r of t){if(!PF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=VI(r.children);e.push(new sr(r.value,i))}return e.filter(r=>!n.has(r))}function sI(t){return t.data||{}}function uI(t){return t.resolve||{}}var FF=new Ce("",{factory:()=>RF});function LF(t,e,n,r,i,o,a){let s=t.get(FF);return Nn(u=>Ke(u).pipe(Ur(l=>s(t,e,n,r,l.extractedUrl,i,o,a)),St(({state:l,tree:c})=>ht(fe({},u),{targetSnapshot:l,urlAfterRedirects:c}))))}function BF(t,e){return Nn(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ke(n);let o=new Set(i.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let l of jI(u))a.add(l);let s=0;return on(a).pipe(_c(u=>o.has(u)?VF(u,r,t,e):(u.data=bf(u,u.parent,t).resolve,Ke(void 0))),On(()=>s++),Tc(1),Nn(u=>s===a.size?Ke(n):qn))})}function jI(t){let e=t.children.map(n=>jI(n)).flat();return[t,...e]}function VF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!_I(i)&&(o[ol]=i.title),Xs(()=>(t.data=bf(t,t.parent,n).resolve,jF(o,t,e,r).pipe(St(a=>(t._resolvedData=a,t.data=fe(fe({},t.data),a),null)))))}function jF(t,e,n,r){let i=vm(t);if(i.length===0)return Ke({});let o={};return on(i).pipe(Nn(a=>HF(t[a],e,n,r).pipe(yi(),On(s=>{if(s instanceof il)throw Df(new pa,s);o[a]=s}))),Tc(1),St(()=>o),Js(a=>NI(a)?qn:hp(a)))}function HF(t,e,n,r){let i=vs(e)??r,o=ms(t,i),a=o.resolve?o.resolve(e,n):Fn(i,()=>o(e,n));return va(a)}function pm(t){return Ur(e=>{let n=t(e);return n?on(n).pipe(St(()=>e)):Ke(e)})}var HI=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Be);return r}getResolvedTitleForRoute(n){return n.data[ol]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(UF),providedIn:"root"})}return t})(),UF=(()=>{class t extends HI{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Ve(eI))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_f=new Ce("",{factory:()=>({})}),Tf=new Ce(""),UI=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=te(Lv);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await dI(Fn(n,()=>r.loadComponent())),a=await zI($I(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a,a}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await $F(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function $F(t,e,n,r){let i=await dI(Fn(n,()=>t.loadChildren())),o=await zI($I(i)),a;o instanceof Ld||Array.isArray(o)?a=o:a=await e.compileModuleAsync(o),r&&r(t);let s,u,l=!1;return Array.isArray(a)?(u=a,l=!0):(s=a.create(n).injector,u=s.get(Tf,[],{optional:!0,self:!0}).flat()),{routes:u.map(jm),injector:s}}function zF(t){return t&&typeof t=="object"&&"default"in t}function $I(t){return zF(t)?t.default:t}async function zI(t){return t}var Hm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(qF),providedIn:"root"})}return t})(),qF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qI=new Ce("");var GF=()=>{},GI=new Ce(""),WI=(()=>{class t{currentNavigation=je(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=je(null);events=new Lt;transitionAbortWithErrorSubject=new Lt;configLoader=te(UI);environmentInjector=te(gn);destroyRef=te(or);urlSerializer=te(Cf);rootContexts=te(al);location=te(as);inputBindingEnabled=te(If,{optional:!0})!==null;titleStrategy=te(HI);options=te(_f,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=te(Hm);createViewTransition=te(qI,{optional:!0});navigationErrorHandler=te(GI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ke(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Im(i)),r=i=>this.events.next(new Sm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ar(()=>{this.transitions?.next(ht(fe({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new hn(null),this.transitions.pipe(Hr(r=>r!==null),Ur(r=>{let i=!1,o=new AbortController;return Ke(r).pipe(Ur(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),qn;this.currentTransition=r;let s=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:s?ht(fe({},s),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new io(a.id,this.urlSerializer.serialize(a.rawUrl),"",gf.IgnoredSameUrlNavigation)),a.resolve(!1),qn;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ke(a).pipe(Ur(c=>(this.events.next(new hs(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?qn:Promise.resolve(c))),LF(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),On(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=c.urlAfterRedirects,f));let d=new vf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:c,extractedUrl:d,source:f,restoredState:h,extras:p}=a,m=new hs(c,this.urlSerializer.serialize(d),f,h);this.events.next(m);let g=II(this.rootComponentType).snapshot;return this.currentTransition=r=ht(fe({},a),{targetSnapshot:g,urlAfterRedirects:d,extras:ht(fe({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(v=>(v.finalUrl=d,v)),Ke(r)}else return this.events.next(new io(a.id,this.urlSerializer.serialize(a.extractedUrl),"",gf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),qn}),On(a=>{let s=new wm(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),St(a=>(this.currentTransition=r=ht(fe({},a),{guards:XP(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),lF(this.environmentInjector,a=>this.events.next(a)),On(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Df(this.urlSerializer,a.guardsResult);let s=new Dm(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(s)}),Hr(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Qn.GuardRejected),!1)),pm(a=>{if(a.guards.canActivateChecks.length!==0)return Ke(a).pipe(On(s=>{let u=new Em(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(u)}),Ur(s=>{let u=!1;return Ke(s).pipe(BF(this.paramsInheritanceStrategy,this.environmentInjector),On({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(s,"",Qn.NoDataFromResolver)}}))}),On(s=>{let u=new Cm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(u)}))}),pm(a=>{let s=l=>{let c=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let d=vs(l)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,l.routeConfig).then(f=>{l.component=f}))}for(let d of l.children)c.push(...s(d));return c},u=s(a.targetSnapshot.root);return u.length===0?Ke(a):on(Promise.all(u).then(()=>a))}),pm(()=>this.afterPreactivation()),Ur(()=>{let{currentSnapshot:a,targetSnapshot:s}=r,u=this.createViewTransition?.(this.environmentInjector,a.root,s.root);return u?on(u).pipe(St(()=>r)):Ke(r)}),St(a=>{let s=WP(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=ht(fe({},a),{targetRouterState:s}),this.currentNavigation.update(u=>(u.targetRouterState=s,u)),r}),On(()=>{this.events.next(new nl)}),QP(this.rootContexts,n.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),mi(1),eu(OI(o.signal).pipe(Hr(()=>!i&&!r.targetRouterState),On(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Qn.Aborted)}))),On({next:a=>{i=!0,this.currentNavigation.update(s=>(s.abort=GF,s)),this.lastSuccessfulNavigation.set(Ar(this.currentNavigation)),this.events.next(new ro(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),eu(this.transitionAbortWithErrorSubject.pipe(On(a=>{throw a}))),vp(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Js(a=>{if(this.destroyed)return r.resolve(!1),qn;if(i=!0,RI(a))this.events.next(new xi(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),KP(a)?this.events.next(new ps(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let s=new tl(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let u=Fn(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(u instanceof il){let{message:l,cancellationCode:c}=Df(this.urlSerializer,u);this.events.next(new xi(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new ps(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(s),a}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return qn}))}))}cancelNavigationTransition(n,r,i){let o=new xi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ar(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WF(t){return t!==Xu}var ZF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(YF),providedIn:"root"})}return t})(),Bm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},YF=(()=>{class t extends Bm{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xi(t)))(i||t)}})();static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Um=(()=>{class t{urlSerializer=te(Cf);options=te(_f,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=te(as);urlHandlingStrategy=te(Hm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ii;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,a=i??o;return a instanceof ii?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=II(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>te(ZI),providedIn:"root"})}return t})(),ZI=(()=>{class t extends Um{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof hs?this.updateStateMemento():n instanceof io?this.commitTransition(r):n instanceof vf?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof nl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xi&&n.code!==Qn.SupersededByNewNavigation&&n.code!==Qn.Redirect?this.restoreHistory(r):n instanceof tl?this.restoreHistory(r,!0):n instanceof ro&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(n)||o){let s=this.browserPageId,u=fe(fe({},a),this.generateNgRouterState(i,s));this.location.replaceState(n,"",u)}else{let s=fe(fe({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xi(t)))(i||t)}})();static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YI(t,e){t.events.pipe(Hr(n=>n instanceof ro||n instanceof xi||n instanceof tl||n instanceof io),St(n=>n instanceof ro||n instanceof io?0:(n instanceof xi?n.code===Qn.Redirect||n.code===Qn.SupersededByNewNavigation:!1)?2:1),Hr(n=>n!==2),mi(1)).subscribe(()=>{e()})}var KF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$m=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=te(xv);stateManager=te(Um);options=te(_f,{optional:!0})||{};pendingTasks=te(Yi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=te(WI);urlSerializer=te(Cf);location=te(as);urlHandlingStrategy=te(Hm);injector=te(gn);_events=new Lt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=te(ZF);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=te(Tf,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!te(If,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new fn;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ar(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xi&&r.code!==Qn.Redirect&&r.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ro)this.navigated=!0;else if(r instanceof ps){let a=r.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=fe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WF(i.source)},a);this.scheduleNavigation(s,Xu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}UP(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=fe({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let s=this.parseUrl(n);this.scheduleNavigation(s,r,a,o).catch(u=>{this.disposed||this.injector.get(Mr)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ar(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(jm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:a,c=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":c=fe(fe({},this.currentUrlTree.queryParams),o);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}c!==null&&(c=this.removeEmptyProps(c));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=wI(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return DI(d,n,c,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=fs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Xu,null,r)}navigate(n,r={skipLocationChange:!1}){return XF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Lo(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=fe({},KF):r===!1?i=fe({},QF):i=r,fs(n))return tI(this.currentUrlTree,n,i);let o=this.parseUrl(n);return tI(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,u,l;a?(s=a.resolve,u=a.reject,l=a.promise):l=new Promise((d,f)=>{s=d,u=f});let c=this.pendingTasks.add();return YI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:s,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new de(4008,!1)}var JF=new Ce("");function zm(t,...e){return Uo([{provide:Tf,multi:!0,useValue:t},[],{provide:ga,useFactory:eL},{provide:Bd,multi:!0,useFactory:tL},e.map(n=>n.\u0275providers)])}function eL(){return te($m).routerState.root}function tL(){let t=te(Pn);return e=>{let n=t.get(Ji);if(e!==n.components[0])return;let r=t.get($m),i=t.get(nL);t.get(rL)===1&&r.initialNavigation(),t.get(iL,null,{optional:!0})?.setUpPreloading(),t.get(JF,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nL=new Ce("",{factory:()=>new Lt}),rL=new Ce("",{factory:()=>1});var iL=new Ce("");var KI=[];var QI={providers:[Dg(),zm(KI)]};function aL(t,e){if(t&1){let n=ei();Jr(0,"button",3),jd("click",function(){let i=pr(n).$implicit,o=He();return gr(o.toggleFilter(i))}),me(1),kr()}if(t&2){let n=e.$implicit,r=He();wt("btn-primary",r.activeFilters().includes(n)),ie(),Pt(" ",n," ")}}function sL(t,e){if(t&1&&(Jr(0,"li",4)(1,"pre",5),me(2),kr()()),t&2){let n=He().$implicit,r=He();ie(2),qt(r.JSON.stringify(n,null,2))}}function uL(t,e){if(t&1&&jt(0,sL,3,1,"li",4),t&2){let n=e.$implicit;Ht(n?0:-1)}}var qm=class t{inputs=ti.required();msgs=je([]);JSON=JSON;filters=je(["Insert"]);activeFilters=je([]);constructor(){Qo(()=>{let e=this.inputs();e&&(this.filters().includes(e.type)||(this.filters.update(n=>[...n,e.type]),this.activeFilters.update(n=>[...n,e.type])),this.activeFilters().includes(e.type)&&this.msgs.update(n=>[...n,e].slice(-5)))})}toggleFilter(e){this.activeFilters.update(n=>n.includes(e)?n.filter(r=>r!==e):[...n,e])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-events"]],inputs:{inputs:[1,"inputs"]},decls:6,vars:0,consts:[[1,"flex","flex-wrap","gap-2","mb-4"],[1,"btn","btn-sm","rounded-full",3,"btn-primary"],[1,"list","bg-base-100","rounded-box","shadow-md"],[1,"btn","btn-sm","rounded-full",3,"click"],[1,"list-row"],[1,"whitespace-pre-wrap","wrap-break-word"]],template:function(n,r){n&1&&(Jr(0,"div",0),vn(1,aL,2,3,"button",1,Ov),kr(),Jr(3,"ul",2),vn(4,uL,1,1,null,null,vr),kr()),n&2&&(ie(),mn(r.filters()),ie(3),mn(r.msgs()))},encapsulation:2})},XI=qm;var xf=class t{constructor(e){this.zone=e;this.initEventsConnection(),this.initQueueConnection(),this.initStatisticsConnection(),this.initThreadsConnection()}_events=je(null);events=this._events.asReadonly();_queues=je(null);queues=this._queues.asReadonly();connectedThreads=je(!1);connected=to(()=>this.connectedQueues()&&this.connectedEvents()&&this.connectedStatistics()&&this.connectedThreads());_threads=je(null);threads=this._threads.asReadonly();connectedStatistics=je(!1);connectedEvents=je(!1);connectedQueues=je(!1);$statistics=new Lt;initEventsConnection(){let e=new WebSocket("ws://localhost:3131/events");e.onmessage=n=>{this.zone.run(()=>{this.connectedEvents.set(!0);let r=JSON.parse(n.data);this._events.set(r)})},e.onclose=()=>{this.connectedEvents.set(!1),console.warn("Disconnected from Rust. Retrying in 2s..."),setTimeout(()=>this.initEventsConnection(),2e3)}}initQueueConnection(){let e=new WebSocket("ws://localhost:3131/queues");e.onmessage=n=>{this.zone.run(()=>{this.connectedQueues.set(!0);let r=JSON.parse(n.data);this._queues.set(r)})},e.onclose=()=>{this.connectedQueues.set(!1),console.warn("Disconnected from Rust. Retrying in 2s..."),setTimeout(()=>this.initQueueConnection(),2e3)}}initStatisticsConnection(){let e=new WebSocket("ws://localhost:3131/statistics");e.onmessage=n=>{this.zone.run(()=>{this.connectedStatistics.set(!0);let r=JSON.parse(n.data);this.$statistics.next(r)})},e.onclose=()=>{this.connectedStatistics.set(!1),console.warn("Disconnected from Rust. Retrying in 2s..."),setTimeout(()=>this.initStatisticsConnection(),2e3)}}initThreadsConnection(){let e=new WebSocket("ws://localhost:3131/threads");e.onmessage=n=>{this.zone.run(()=>{this.connectedThreads.set(!0),this._threads.set(n.data)})},e.onclose=()=>{this.connectedThreads.set(!1),console.warn("Disconnected from Rust. Retrying in 2s..."),setTimeout(()=>this.initThreadsConnection(),2e3)}}static \u0275fac=function(n){return new(n||t)(Ve(an))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})};var Gm=t=>[t],lL=(t,e)=>e[0],JI=(t,e)=>e[0]+e[1];function cL(t,e){if(t&1&&(oe(0,"div",3)(1,"div",11),gt(2,"img",12),re()()),t&2){He();let n=Fu(0);ie(2),Ot("ngSrc",n)}}function dL(t,e){if(t&1&&(oe(0,"span",8),me(1),Si(2,"number"),re()),t&2){let n=e.$implicit;ie(),Pt("",eo(2,1,n)," IDs/sec")}}function fL(t,e){if(t&1&&(oe(0,"span",8),me(1),Si(2,"number"),re()),t&2){let n=e.$implicit;ie(),Pt("",eo(2,1,n)," IDs/sec")}}function hL(t,e){if(t&1&&(oe(0,"div",16)(1,"span",17),me(2),re(),oe(3,"span",18),me(4),Si(5,"number"),re()()),t&2){let n=e.$implicit;ie(2),qt(n[2]),ie(2),qt(eo(5,2,n[3]))}}function pL(t,e){if(t&1&&(oe(0,"div")(1,"div",13)(2,"span"),me(3,"Plain"),re(),gt(4,"div",14),re(),oe(5,"div",15),vn(6,hL,6,4,"div",16,JI),re()()),t&2){He();let n=Fu(1);ie(6),mn(n)}}function gL(t,e){if(t&1&&(oe(0,"span",23),me(1),Si(2,"number"),re()),t&2){let n=e.$implicit;ie(),Pt(" ",eo(2,1,n)," ")}}function vL(t,e){if(t&1&&(oe(0,"div",22)(1,"span",17),me(2),re(),vn(3,gL,3,3,"span",23,vr),re()),t&2){let n=e.$implicit;ie(2),qt(n[2]),ie(),mn(Lu(1,Gm,n[3]))}}function mL(t,e){if(t&1&&(oe(0,"div")(1,"div",19)(2,"span"),me(3,"Mapped"),re(),gt(4,"div",20),re(),oe(5,"div",21),vn(6,vL,5,3,"div",22,JI),re()()),t&2){He();let n=Fu(2);ie(6),mn(n)}}function yL(t,e){if(t&1&&($d(0)(1)(2),oe(3,"div",1)(4,"div",2),jt(5,cL,3,1,"div",3),oe(6,"span",4),me(7),re(),gt(8,"span",5),oe(9,"div",6)(10,"span",7),me(11,"PLAIN"),re(),vn(12,dL,3,3,"span",8,vr),re(),oe(14,"div",9)(15,"span",7),me(16,"MAPPED"),re(),vn(17,fL,3,3,"span",8,vr),re()(),oe(19,"div",10),jt(20,pL,8,0,"div"),jt(21,mL,8,0,"div"),re()()),t&2){let n=e.$implicit,r=He(),i=Pu(r.getImage(n[0]));ie();let o=Pu(r.plainStatistics().get(n[0]));ie();let a=Pu(r.mappedStatistics().get(n[0]));ie(3),Ht(i?5:-1);let s=r.getTp(n[0]);ie(2),qt(n[0]),ie(5),mn(Lu(7,Gm,s.plain)),ie(5),mn(Lu(9,Gm,s.mapped)),ie(3),Ht(o!=null&&o.length?20:-1),ie(),Ht(a!=null&&a.length?21:-1)}}var Mf=class t{inputs=ti.required();queue$=new Lt;plainStatistics=je(new Map);mappedStatistics=je(new Map);tps=je(new Map);ngOnInit(){this.inputs().subscribe(e=>{this.processData(e)})}processData(e){if(e.type==="Throughput"){let r=e.data;this.tps.update(i=>{let o=new Map(i);for(let a in r.tps)o.set(a,r.tps[a]);return o});return}let n=e.data;n&&this.updateStats(n)}updateStats(e){this.plainStatistics.update(n=>{let r=new Map(n);for(let i in e.engines){let[o,a]=e.engines[i],s=[...o].filter(u=>u[1]==="Plain").sort((u,l)=>u[0]-l[0]);r.set(a,s)}return r}),this.mappedStatistics.update(n=>{let r=new Map(n);for(let i in e.engines){let[o,a]=e.engines[i],s=[...o].filter(u=>u[1]==="Mapped").sort((u,l)=>u[0]-l[0]);r.set(a,s)}return r})}getImage(e){let n=e.toLowerCase();return n.includes("neo")?"/assets/neo.png":n.includes("mongo")?"/assets/mongo.png":n.includes("postgres")?"/assets/pg.png":null}getTp(e){return this.tps().get(e)||{plain:0,mapped:0}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-statistics"]],inputs:{inputs:[1,"inputs"]},decls:3,vars:0,consts:[[1,"flex","flex-col","gap-4"],[1,"card","bg-base-100","border","border-base-300","shadow-sm","overflow-hidden"],[1,"bg-base-200/50","px-3","py-2","flex","items-center","gap-3","border-b","border-base-300"],[1,"avatar","shrink-0"],[1,"text-sm","font-bold","truncate","uppercase","tracking-tight"],[1,"grow"],[1,"badge","badge-outline","badge-secondary","gap-2"],[1,"opacity-70","text-[10px]"],[1,"font-mono","animate-update"],[1,"badge","badge-soft","badge-accent","gap-2"],[1,"p-3","flex","flex-col","gap-4"],[1,"w-8","h-8","rounded","bg-black/20","p-1"],["alt","","fill","",1,"logo-outline","object-contain",3,"ngSrc"],[1,"text-[14px]","font-black","uppercase","text-primary","mb-2","flex","items-center","gap-2"],[1,"h-px","grow","bg-primary/10"],[1,"grid","grid-cols-3","gap-2"],[1,"flex","flex-col","border-l-2","border-primary/30","pl-2"],[1,"text-[14px]","opacity-60","truncate"],[1,"text-xl","font-mono","font-bold","leading-none"],[1,"text-[14px]","font-black","uppercase","text-accent","mb-2","flex","items-center","gap-2"],[1,"h-px","grow","bg-accent/10"],[1,"grid","grid-cols-2","gap-2"],[1,"flex","flex-col","border-l-2","border-accent/30","pl-2"],[1,"text-xl","font-mono","font-bold","leading-none","animate-update"]],template:function(n,r){n&1&&(oe(0,"div",0),vn(1,yL,22,11,"div",1,lL),re()),n&2&&(ie(),mn(r.plainStatistics()))},dependencies:[GC,tm],styles:[".logo-outline[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 0 white) drop-shadow(-1px -1px 0 white) drop-shadow(0 0 8px rgba(255,255,255,.3))}@keyframes _ngcontent-%COMP%_flash-update{0%{transform:scale(1.1);font-weight:900}to{transform:scale(1);font-weight:inherit}}.animate-update[_ngcontent-%COMP%]{display:inline-block;animation:_ngcontent-%COMP%_flash-update .8s ease-out}"]})};var bL=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Nt(Ii),Nt(ar))};static \u0275dir=Wn({type:t})}return t})(),tS=(()=>{class t extends bL{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xi(t)))(i||t)}})();static \u0275dir=Wn({type:t,features:[rs]})}return t})(),nS=new Ce("");var wL=new Ce("",{factory:()=>rS}),rS="always";var DL={provide:nS,useExisting:Vo(()=>oS),multi:!0};function iS(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function EL(t){return t.split(":")[0]}var oS=(()=>{class t extends tS{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=te(Ji).injector;destroyRef=te(or);cdr=te(la);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Rd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=iS(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=EL(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xi(t)))(i||t)}})();static \u0275dir=Wn({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Tt("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[zd([DL]),rs]})}return t})(),aS=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(iS(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(Nt(ar),Nt(Ii),Nt(oS,9))};static \u0275dir=Wn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),CL={provide:nS,useExisting:Vo(()=>sS),multi:!0};function eS(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function IL(t){return t.split(":")[0]}var sS=(()=>{class t extends tS{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let u=a[s],l=this._getOptionValue(u.value);i.push(l)}}else{let a=r.options;for(let s=0;s<a.length;s++){let u=a[s];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=IL(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Xi(t)))(i||t)}})();static \u0275dir=Wn({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Tt("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[zd([CL]),rs]})}return t})(),uS=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(eS(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(eS(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(Nt(ar),Nt(Ii),Nt(sS,9))};static \u0275dir=Wn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var SL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=sa({type:t});static \u0275inj=Ui({})}return t})();var lS=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:wL,useValue:n.callSetDisabledState??rS}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=sa({type:t});static \u0275inj=Ui({imports:[SL]})}return t})();var oi=new Int32Array(2),Af=new Float32Array(oi.buffer),Rf=new Float64Array(oi.buffer),ys=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Nf=(function(t){return t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING",t})(Nf||{});var oo=class t{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new t(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return oi[0]=this.readInt32(e),Af[0]}readFloat64(e){return oi[ys?0:1]=this.readInt32(e),oi[ys?1:0]=this.readInt32(e+4),Rf[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){Af[0]=n,this.writeInt32(e,oi[0])}writeFloat64(e,n){Rf[0]=n,this.writeInt32(e,oi[ys?0:1]),this.writeInt32(e+4,oi[ys?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<4;n++)e+=String.fromCharCode(this.readInt8(this.position_+4+n));return e}__offset(e,n){let r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);let r=this.readInt32(e);e+=4;let i=this.bytes_.subarray(e,e+r);return n===Nf.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=4)throw new Error("FlatBuffers: file identifier must be length "+4);for(let n=0;n<4;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+4+n))return!1;return!0}createScalarList(e,n){let r=[];for(let i=0;i<n;++i){let o=e(i);o!==null&&r.push(o)}return r}createObjList(e,n){let r=[];for(let i=0;i<n;++i){let o=e(i);o!==null&&r.push(o.unpack())}return r}};var ul=class t{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=oo.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);let r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){let i=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){let n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let r=n<<1,i=oo.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let e=this.offset(),n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);let r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);let i=2;this.addInt16(e-this.object_start);let o=(r+i)*2;this.addInt16(o);let a=0,s=this.space;e:for(n=0;n<this.vtables.length;n++){let u=this.bb.capacity()-this.vtables[n];if(o==this.bb.readInt16(u)){for(let l=2;l<o;l+=2)if(this.bb.readInt16(s+l)!=this.bb.readInt16(u+l))continue e;a=this.vtables[n];break}}return a?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,a-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){let i=r?4:0;if(n){let o=n;if(this.prep(this.minalign,8+i),o.length!=4)throw new TypeError("FlatBuffers: file identifier must be length "+4);for(let a=3;a>=0;a--)this.writeInt8(o.charCodeAt(a))}this.prep(this.minalign,4+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){let r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(4,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);let n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){let n=[];for(let r=0;r<e.length;++r){let i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var ue={};z1(ue,{Array:()=>yl,Bool:()=>ll,Date:()=>cl,Dict:()=>dl,DictEntry:()=>ai,Edge:()=>fl,Float:()=>hl,Int:()=>pl,Message:()=>Pf,Node:()=>gl,Text:()=>vl,Time:()=>ml,Value:()=>si,ValueData:()=>kf});var ll=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}value(){let e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startBool(e){e.startObject(1)}static addValue(e,n){e.addFieldInt8(0,+n,0)}static endBool(e){return e.endObject()}static createBool(e,n){return t.startBool(e),t.addValue(e,n),t.endBool(e)}};var cl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}days(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}static startDate(e){e.startObject(1)}static addDays(e,n){e.addFieldInt64(0,n,BigInt("0"))}static endDate(e){return e.endObject()}static createDate(e,n){return t.startDate(e),t.addDays(e,n),t.endDate(e)}};var ai=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictEntry(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictEntry(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}key(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new si).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startDictEntry(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endDictEntry(e){return e.endObject()}};var dl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDict(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDict(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}entries(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}entriesLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startDict(e){e.startObject(1)}static addEntries(e,n){e.addFieldOffset(0,n,0)}static createEntriesVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startEntriesVector(e,n){e.startVector(4,n,4)}static endDict(e){return e.endObject()}static createDict(e,n){return t.startDict(e),t.addEntries(e,n),t.endDict(e)}};var fl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsEdge(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsEdge(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}label(e){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}startId(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}endId(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}properties(e,n){let r=this.bb.__offset(this.bb_pos,12);return r?(n||new ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}propertiesLength(){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startEdge(e){e.startObject(5)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addLabel(e,n){e.addFieldOffset(1,n,0)}static addStartId(e,n){e.addFieldInt64(2,n,BigInt("0"))}static addEndId(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addProperties(e,n){e.addFieldOffset(4,n,0)}static createPropertiesVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startPropertiesVector(e,n){e.startVector(4,n,4)}static endEdge(e){return e.endObject()}static createEdge(e,n,r,i,o,a){return t.startEdge(e),t.addId(e,n),t.addLabel(e,r),t.addStartId(e,i),t.addEndId(e,o),t.addProperties(e,a),t.endEdge(e)}};var hl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloat(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloat(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}number(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}shift(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):0}static startFloat(e){e.startObject(2)}static addNumber(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addShift(e,n){e.addFieldInt8(1,n,0)}static endFloat(e){return e.endObject()}static createFloat(e,n,r){return t.startFloat(e),t.addNumber(e,n),t.addShift(e,r),t.endFloat(e)}};var pl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}value(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}static startInt(e){e.startObject(1)}static addValue(e,n){e.addFieldInt64(0,n,BigInt("0"))}static endInt(e){return e.endObject()}static createInt(e,n){return t.startInt(e),t.addValue(e,n),t.endInt(e)}};var gl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNode(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNode(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}id(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}labels(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+e*4,n):null}labelsLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}properties(e,n){let r=this.bb.__offset(this.bb_pos,8);return r?(n||new ai).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}propertiesLength(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startNode(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addLabels(e,n){e.addFieldOffset(1,n,0)}static createLabelsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startLabelsVector(e,n){e.startVector(4,n,4)}static addProperties(e,n){e.addFieldOffset(2,n,0)}static createPropertiesVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startPropertiesVector(e,n){e.startVector(4,n,4)}static endNode(e){return e.endObject()}static createNode(e,n,r,i){return t.startNode(e),t.addId(e,n),t.addLabels(e,r),t.addProperties(e,i),t.endNode(e)}};var vl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsText(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsText(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}value(e){let n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}static startText(e){e.startObject(1)}static addValue(e,n){e.addFieldOffset(0,n,0)}static endText(e){return e.endObject()}static createText(e,n){return t.startText(e),t.addValue(e,n),t.endText(e)}};var ml=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}ms(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}ns(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}static startTime(e){e.startObject(2)}static addMs(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNs(e,n){e.addFieldInt32(1,n,0)}static endTime(e){return e.endObject()}static createTime(e,n,r){return t.startTime(e),t.addMs(e,n),t.addNs(e,r),t.endTime(e)}};var kf=(d=>(d[d.NONE=0]="NONE",d[d.Int=1]="Int",d[d.Float=2]="Float",d[d.Bool=3]="Bool",d[d.Text=4]="Text",d[d.Time=5]="Time",d[d.Date=6]="Date",d[d.Array=7]="Array",d[d.Dict=8]="Dict",d[d.Node=9]="Node",d[d.Edge=10]="Edge",d))(kf||{});var si=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsValue(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValue(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}dataType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):0}data(e){let n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(e,this.bb_pos+n):null}static startValue(e){e.startObject(2)}static addDataType(e,n){e.addFieldInt8(0,n,0)}static addData(e,n){e.addFieldOffset(1,n,0)}static endValue(e){return e.endObject()}static createValue(e,n,r){return t.startValue(e),t.addDataType(e,n),t.addData(e,r),t.endValue(e)}};var yl=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsArray(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsArray(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}values(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}valuesLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startArray(e){e.startObject(1)}static addValues(e,n){e.addFieldOffset(0,n,0)}static createValuesVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startValuesVector(e,n){e.startVector(4,n,4)}static endArray(e){return e.endObject()}static createArray(e,n){return t.startArray(e),t.addValues(e,n),t.endArray(e)}};var Pf=class t{bb=null;bb_pos=0;__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}topics(e,n){let r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb.__vector(this.bb_pos+r)+e*4,n):null}topicsLength(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}payload(e,n){let r=this.bb.__offset(this.bb_pos,6);return r?(n||new si).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}payloadLength(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}timestamp(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}static startMessage(e){e.startObject(3)}static addTopics(e,n){e.addFieldOffset(0,n,0)}static createTopicsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startTopicsVector(e,n){e.startVector(4,n,4)}static addPayload(e,n){e.addFieldOffset(1,n,0)}static createPayloadVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startPayloadVector(e,n){e.startVector(4,n,4)}static addTimestamp(e,n){e.addFieldInt64(2,n,BigInt("0"))}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i){return t.startMessage(e),t.addTopics(e,n),t.addPayload(e,r),t.addTimestamp(e,i),t.endMessage(e)}};var bl=class t{static pack(e,n=[],r=Date.now()){let i=new ul(1024),o=0;if(e.length>0){let u=e.map(l=>t.toOffset(i,l));o=ue.Message.createPayloadVector(i,u)}let a=0;if(n.length>0){let u=n.map(l=>i.createString(l));a=ue.Message.createTopicsVector(i,u)}ue.Message.startMessage(i),ue.Message.addPayload(i,o),ue.Message.addTimestamp(i,BigInt(r)),a!==0&&ue.Message.addTopics(i,a);let s=ue.Message.endMessage(i);return ue.Message.finishMessageBuffer(i,s),i.asUint8Array()}static toOffset(e,n){let r=ue.ValueData.NONE,i=0;switch(n.type){case"Int":r=ue.ValueData.Int,i=ue.Int.createInt(e,n.value);break;case"Float":r=ue.ValueData.Float,i=ue.Float.createFloat(e,n.number,n.shift);break;case"Bool":r=ue.ValueData.Bool,i=ue.Bool.createBool(e,n.value);break;case"Text":let o=e.createString(n.value);r=ue.ValueData.Text,i=ue.Text.createText(e,o);break;case"Time":r=ue.ValueData.Time,i=ue.Time.createTime(e,n.ms,n.ns);break;case"Date":r=ue.ValueData.Date,i=ue.Date.createDate(e,n.days);break;case"Array":let a=n.values.map(v=>t.toOffset(e,v)),s=ue.Array.createValuesVector(e,a);r=ue.ValueData.Array,i=ue.Array.createArray(e,s);break;case"Dict":let u=Object.entries(n.entries).map(([v,y])=>{let b=e.createString(v),w=t.toOffset(e,y);return ue.DictEntry.startDictEntry(e),ue.DictEntry.addKey(e,b),ue.DictEntry.addValue(e,w),ue.DictEntry.endDictEntry(e)}),l=ue.Dict.createEntriesVector(e,u);r=ue.ValueData.Dict,i=ue.Dict.createDict(e,l);break;case"Node":let c=n.labels.map(v=>e.createString(v)),d=ue.Node.createLabelsVector(e,c),f=Object.entries(n.properties).map(([v,y])=>{let b=e.createString(v),w=t.toOffset(e,y);return ue.DictEntry.startDictEntry(e),ue.DictEntry.addKey(e,b),ue.DictEntry.addValue(e,w),ue.DictEntry.endDictEntry(e)}),h=ue.Node.createPropertiesVector(e,f);r=ue.ValueData.Node,i=ue.Node.createNode(e,n.id,d,h);break;case"Edge":let p=e.createString(n.label),m=Object.entries(n.properties).map(([v,y])=>{let b=e.createString(v),w=t.toOffset(e,y);return ue.DictEntry.startDictEntry(e),ue.DictEntry.addKey(e,b),ue.DictEntry.addValue(e,w),ue.DictEntry.endDictEntry(e)}),g=ue.Edge.createPropertiesVector(e,m);r=ue.ValueData.Edge,i=ue.Edge.createEdge(e,n.id,p,n.startId,n.endId,g);break;case"Null":r=ue.ValueData.NONE,i=0;break}return ue.Value.startValue(e),ue.Value.addDataType(e,r),r!==ue.ValueData.NONE&&ue.Value.addData(e,i),ue.Value.endValue(e)}static unpack(e){let n=new oo(e),r=ue.Message.getRootAsMessage(n),i=[];for(let o=0;o<r.payloadLength();o++){let a=r.payload(o);a&&i.push(t.fromFB(a))}return i}static fromFB(e){switch(e.dataType()){case ue.ValueData.Int:return{type:"Int",value:e.data(new ue.Int).value()};case ue.ValueData.Float:{let r=e.data(new ue.Float);return{type:"Float",number:r.number(),shift:r.shift()}}case ue.ValueData.Bool:return{type:"Bool",value:e.data(new ue.Bool).value()};case ue.ValueData.Text:return{type:"Text",value:e.data(new ue.Text).value()||""};case ue.ValueData.Time:{let r=e.data(new ue.Time);return{type:"Time",ms:r.ms(),ns:r.ns()}}case ue.ValueData.Date:return{type:"Date",days:e.data(new ue.Date).days()};case ue.ValueData.Array:{let r=e.data(new ue.Array),i=[],o=r.valuesLength();for(let a=0;a<o;a++){let s=r.values(a);s&&i.push(t.fromFB(s))}return{type:"Array",values:i}}case ue.ValueData.Dict:{let r=e.data(new ue.Dict);return{type:"Dict",entries:t.unpackProperties(i=>r.entries(i),r.entriesLength())}}case ue.ValueData.Node:{let r=e.data(new ue.Node),i=[],o=r.labelsLength();for(let a=0;a<o;a++){let s=r.labels(a);s!==null&&i.push(s)}return{type:"Node",id:r.id(),labels:i,properties:t.unpackProperties(a=>r.properties(a),r.propertiesLength())}}case ue.ValueData.Edge:{let r=e.data(new ue.Edge);return{type:"Edge",id:r.id(),label:r.label()||"",startId:r.startId(),endId:r.endId(),properties:t.unpackProperties(i=>r.properties(i),r.propertiesLength())}}case ue.ValueData.NONE:default:return{type:"Null"}}}static unpackProperties(e,n){let r={};for(let i=0;i<n;i++){let o=e(i);if(o&&o.key()){let a=o.value();a&&(r[o.key()]=t.fromFB(a))}}return r}};function TL(t,e){if(t&1&&(oe(0,"span"),me(1),re()),t&2){let n=He().$implicit;ie(),qt(n.values[0].value)}}function xL(t,e){if(t&1&&(oe(0,"span",25),me(1),re()),t&2){let n=He().$implicit;ie(),qt(n.values[0].value)}}function ML(t,e){if(t&1&&(oe(0,"div",28),me(1),re()),t&2){let n=He().$implicit;wt("badge-success",n.values[0].value)("badge-error",!n.values[0].value),ie(),Pt(" ",n.values[0].value," ")}}function AL(t,e){if(t&1&&(oe(0,"span",27),me(1),re()),t&2){let n=He().$implicit;ie(),Pt("ID: ",n.values[0].id)}}function RL(t,e){if(t&1&&(oe(0,"div",1)(1,"div",21)(2,"div",22),me(3),re(),oe(4,"div",23)(5,"span",24),me(6),re(),jt(7,TL,2,1,"span")(8,xL,2,1,"span",25)(9,ML,2,5,"div",26)(10,AL,2,1,"span",27),re()()()),t&2){let n,r=e.$implicit;ie(3),Pt("Topic: ",r.topic),ie(3),qt(r.values[0].type),ie(),Ht((n=r.values[0].type)==="Text"?7:n==="Int"?8:n==="Bool"?9:n==="Node"?10:-1)}}function NL(t,e){if(t&1){let n=ei();oe(0,"div",11)(1,"input",29),Tt("change",function(){pr(n);let i=He();return gr(i.boolValue.set(!i.boolValue()))}),re()()}if(t&2){let n=He();ie(),Ot("checked",n.boolValue())}}function OL(t,e){if(t&1){let n=ei();oe(0,"input",30),Tt("input",function(i){pr(n);let o=He();return gr(o.intValue.set(i.target.value))}),re()}if(t&2){let n=He();Ot("value",n.intValue())}}function kL(t,e){if(t&1){let n=ei();oe(0,"input",31),Tt("input",function(i){pr(n);let o=He();return gr(o.nodeId.set(i.target.value))}),re(),oe(1,"input",32),Tt("input",function(i){pr(n);let o=He();return gr(o.nodeLabels.set(i.target.value))}),re()}if(t&2){let n=He();Ot("value",n.nodeId()),ie(),Ot("value",n.nodeLabels())}}function PL(t,e){if(t&1){let n=ei();oe(0,"input",33),Tt("input",function(i){pr(n);let o=He();return gr(o.textValue.set(i.target.value))}),re()}if(t&2){let n=He();Ot("value",n.textValue())}}function FL(t,e){if(t&1){let n=ei();oe(0,"button",34),Tt("click",function(){pr(n);let i=He();return gr(i.stopListen())}),me(1,"Stop"),re()}}function LL(t,e){if(t&1){let n=ei();oe(0,"button",15),Tt("click",function(){pr(n);let i=He();return gr(i.listen())}),me(1,"Listen"),re()}if(t&2){let n=He();Ot("disabled",!n.recTopic())}}function BL(t,e){if(t&1&&(oe(0,"div",19),gt(1,"div",35),oe(2,"span",36),me(3),re(),gt(4,"div",35),re()),t&2){let n=He();ie(3),Pt("Live Stream: ",n.recTopic())}}function VL(t,e){if(t&1&&(oe(0,"span"),me(1),re()),t&2){let n=He().$implicit;ie(),qt(n.values[0].value)}}function jL(t,e){if(t&1&&(oe(0,"span",25),me(1),re()),t&2){let n=He().$implicit;ie(),qt(n.values[0].value)}}function HL(t,e){if(t&1&&(oe(0,"div",28),me(1),re()),t&2){let n=He().$implicit;wt("badge-success",n.values[0].value)("badge-error",!n.values[0].value),ie(),Pt(" ",n.values[0].value," ")}}function UL(t,e){if(t&1&&(oe(0,"span",27),me(1),re()),t&2){let n=He().$implicit;ie(),Pt("ID: ",n.values[0].id)}}function $L(t,e){if(t&1&&(oe(0,"pre",37),me(1),re()),t&2){let n=He().$implicit,r=He();ie(),qt(r.JSON.stringify(n.values[0]))}}function zL(t,e){if(t&1&&(oe(0,"pre",37),me(1),re()),t&2){let n=He().$implicit,r=He();ie(),qt(r.JSON.stringify(n.values[0]))}}function qL(t,e){if(t&1&&(oe(0,"div",16)(1,"div",21)(2,"div",22),me(3),re(),oe(4,"div",23)(5,"span",24),me(6),re(),jt(7,VL,2,1,"span")(8,jL,2,1,"span",25)(9,HL,2,5,"div",26)(10,UL,2,1,"span",27)(11,$L,2,1,"pre",37)(12,zL,2,1,"pre",37),re()()()),t&2){let n,r=e.$implicit;ie(3),Pt("Topic: ",r.topic),ie(3),qt(r.values[0].type),ie(),Ht((n=r.values[0].type)==="Text"?7:n==="Int"?8:n==="Bool"?9:n==="Node"?10:n==="Dict"?11:n==="Array"?12:-1)}}var Ff=class t{messages=je([]);connected=je(!1);listening=je(!1);_received=je([]);socket=je(null);zone=te(an);sendTopic=je("");recTopic=je("");selectedType=je("Text");textValue=je("");intValue=je(0);boolValue=je(!1);nodeId=je(0);nodeLabels=je("");currentValue=to(()=>{switch(this.selectedType()){case"Int":return{type:"Int",value:BigInt(this.intValue())};case"Bool":return{type:"Bool",value:this.boolValue()};case"Node":return{type:"Node",id:BigInt(this.nodeId()),labels:this.nodeLabels().split(",").map(e=>e.trim()).filter(e=>!!e),properties:{}};default:return{type:"Text",value:this.textValue()}}});send(){let e=this.currentValue(),n=bl.pack([e]);console.log(`Sending to ${this.sendTopic()}:`,n),this.textValue.set(""),this.intValue.set(0),this.nodeLabels.set("")}listen(){this.initConnection(this.recTopic()),this.listening.set(!0)}console=console;stopListen(){this.socket.update(e=>(e?.close(1e3,"User requested disconnect"),this.recTopic.set(""),null)),this.connected.set(!1)}initConnection(e){this._received.set([]);let n=new WebSocket(`ws://localhost:3131/channel/${e}`);n.binaryType="arraybuffer",this.socket.set(n),BigInt.prototype.toJSON=function(){return this.toString()},this.connected.set(!0),n.onmessage=r=>{this.zone.run(()=>{let i=new Uint8Array(r.data),o=bl.unpack(i);this._received.update(a=>{let s=a;return s.length>=50&&(console.log("in"),s=a.slice(1,50)),[...s,{topic:e,values:o}].slice(0,50)})})},n.onclose=()=>{this.connected()&&(console.warn("Disconnected from Rust. Retrying in 2s..."),this.connected.set(!1),setTimeout(()=>this.initConnection(e),2e3))}}JSON=JSON;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-roundtrip"]],decls:35,vars:7,consts:[[1,"p-4","flex","flex-col","gap-4"],[1,"chat","chat-start"],[1,"chat-bubble","chat-bubble-primary","flex","flex-col","gap-3","max-w-md","text-base-content"],[1,"input","input-sm","input-bordered","flex","items-center","gap-2"],["type","text","placeholder","Topic",1,"grow",3,"input","value"],[1,"join"],[1,"select","select-sm","select-bordered","join-item",3,"change","value"],["value","Text"],["value","Int"],["value","Bool"],["value","Node"],[1,"join-item","grow","bg-base-100","border","border-base-300","flex","items-center","px-4"],["type","number","placeholder","Number",1,"input","input-sm","input-bordered","join-item","grow",3,"value"],["type","text","placeholder","Value",1,"input","input-sm","input-bordered","join-item","grow",3,"value"],[1,"flex","w-full","justify-end"],[1,"btn","btn-sm",3,"click","disabled"],[1,"chat","chat-end"],[1,"btn","btn-sm"],[1,"btn","btn-sm",3,"disabled"],[1,"flex","items-center","my-6","gap-4"],[1,"flex","flex-col-reverse"],[1,"chat-bubble","chat-bubble-primary"],[1,"text-[10px]","uppercase","font-bold","opacity-50","mb-1"],[1,"flex","items-center","gap-2"],[1,"badge","badge-sm","badge-outline"],[1,"font-mono","text-info"],[1,"badge",3,"badge-success","badge-error"],[1,"text-sm"],[1,"badge"],["type","checkbox",1,"toggle","toggle-info","toggle-xs",3,"change","checked"],["type","number","placeholder","Number",1,"input","input-sm","input-bordered","join-item","grow",3,"input","value"],["type","number","placeholder","ID",1,"input","input-sm","input-bordered","join-item","w-16",3,"input","value"],["type","text","placeholder","Labels...",1,"input","input-sm","input-bordered","join-item","grow",3,"input","value"],["type","text","placeholder","Value",1,"input","input-sm","input-bordered","join-item","grow",3,"input","value"],[1,"btn","btn-sm",3,"click"],[1,"grow","h-px","bg-linear-to-r","from-transparent","via-primary/30","to-transparent"],[1,"text-[10px]","uppercase","tracking-widest","opacity-40","font-bold"],[1,"text-sm","overflow-x-auto","whitespace-pre-wrap"]],template:function(n,r){if(n&1&&(oe(0,"div",0),vn(1,RL,11,3,"div",1,vr),oe(3,"div",1)(4,"div",2)(5,"label",3)(6,"input",4),Tt("input",function(o){return r.sendTopic.set(o.target.value)}),re()(),oe(7,"div",5)(8,"select",6),Tt("change",function(o){return r.selectedType.set(o.target.value)}),oe(9,"option",7),me(10,"Text"),re(),oe(11,"option",8),me(12,"Int"),re(),oe(13,"option",9),me(14,"Bool"),re(),oe(15,"option",10),me(16,"Node"),re()(),jt(17,NL,2,1,"div",11)(18,OL,1,1,"input",12)(19,kL,2,2)(20,PL,1,1,"input",13),re(),oe(21,"div",14)(22,"button",15),Tt("click",function(){return r.send()}),me(23,"Send"),re()()()()(),oe(24,"div",16)(25,"div",2)(26,"label",3)(27,"input",4),Tt("input",function(o){return r.recTopic.set(o.target.value)}),re()(),oe(28,"div",14),jt(29,FL,2,0,"button",17)(30,LL,2,1,"button",18),re()()(),jt(31,BL,5,1,"div",19),oe(32,"div",20),vn(33,qL,13,3,"div",16,vr),re()),n&2){let i;ie(),mn(r.messages()),ie(5),Ot("value",r.sendTopic()),ie(2),Ot("value",r.selectedType()),ie(9),Ht((i=r.selectedType())==="Bool"?17:i==="Int"?18:i==="Node"?19:20),ie(5),Ot("disabled",!r.sendTopic()),ie(5),Ot("value",r.recTopic()),ie(2),Ht(r.connected()?29:30),ie(2),Ht(r.recTopic()!=null&&r.recTopic().trim().length!=0?31:-1),ie(2),mn(r._received())}},dependencies:[lS,aS,uS],encapsulation:2})};var GL=(t,e)=>e.key;function WL(t,e){t&1&&(oe(0,"div",14),me(1," STALE "),re())}function ZL(t,e){t&1&&gt(0,"div",15)}function YL(t,e){if(t&1&&(oe(0,"div",8)(1,"div",9)(2,"span",10),me(3),re(),oe(4,"span",11),me(5),re()(),oe(6,"div",12)(7,"span",13),me(8),Si(9,"date"),re(),jt(10,WL,2,0,"div",14)(11,ZL,1,0,"div",15),re()()),t&2){let n=e.$implicit;Ot("ngClass",n.isStale?"bg-error/10 opacity-60":"bg-base-100 shadow-sm"),ie(2),wt("line-through",n.isStale),ie(),Pt(" ",n.id," "),ie(2),Pt(" Delay: ",n.elapsed,"ms "),ie(3),Pt(" ",Fv(9,7,n.timestamp,"mm:ss.SSS")," "),ie(2),Ht(n.isStale?10:11)}}function KL(t,e){if(t&1&&(oe(0,"div",1),gt(1,"input",2),oe(2,"div",3)(3,"span",4),me(4),re(),oe(5,"span",5),me(6),re()(),oe(7,"div",6)(8,"div",7),vn(9,YL,12,10,"div",8,vr),re()()()),t&2){let n=e.$implicit;ie(4),qt(n.key),ie(2),Pt("",n.value.length," Threads"),ie(3),mn(n.value)}}var Lf=class t{inputs=ti.required();threads=je(new Map);currentTime=je(Date.now());groupedThreads=to(()=>{let e=this.threads(),n=this.currentTime(),r=5e3,i={};for(let o of e){let[a,s]=o,u=a.split(" ")[0]||"Unknown";i[u]||(i[u]=[]),i[u].push({id:a,timestamp:s,isStale:n-s>r,elapsed:n-s})}for(let o in i)i[o].sort((a,s)=>a.isStale!==s.isStale?a.isStale?1:-1:a.id.localeCompare(s.id));return i});constructor(){setInterval(()=>this.currentTime.set(Date.now()),100),Qo(()=>{let e=this.inputs();if(!e)return;let n=Date.now();this.threads.update(r=>{let i=new Map(r);return i.set(e,n),i})})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-threads"]],inputs:{inputs:[1,"inputs"]},decls:4,vars:2,consts:[[1,"space-y-4"],[1,"collapse","collapse-arrow","bg-base-200","border","border-base-300"],["type","checkbox"],[1,"collapse-title","flex","items-center","gap-4"],[1,"badge","badge-primary","font-bold","uppercase"],[1,"text-xs","opacity-50"],[1,"collapse-content"],[1,"grid","grid-cols-1","gap-2"],[1,"flex","justify-between","items-center","p-3","rounded-lg","transition-all","duration-500",3,"ngClass"],[1,"flex","flex-col"],[1,"font-mono","text-sm"],[1,"text-[10px]","opacity-40"],[1,"flex","items-center","gap-3"],[1,"text-[10px]","opacity-50","font-mono"],[1,"badge","badge-error","badge-xs","outline","outline-1","outline-error","animate-pulse"],[1,"w-2","h-2","rounded-full","bg-success","animate-pulse"]],template:function(n,r){n&1&&(oe(0,"div",0),vn(1,KL,11,2,"div",1,GL),Si(3,"keyvalue"),re()),n&2&&(ie(),mn(eo(3,0,r.groupedThreads())))},dependencies:[Xv,Jv,em],encapsulation:2})};function C0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function QL(t){if(Array.isArray(t))return t}function XL(t){if(Array.isArray(t))return C0(t)}function Eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VT(r.key),r)}}function Co(t,e,n){return e&&JL(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tr(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$0(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||n.return==null||n.return()}finally{if(s)throw o}}}}function BT(t,e,n){return(e=VT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function n2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zt(t,e){return QL(t)||t2(t,e)||$0(t,e)||n2()}function uh(t){return XL(t)||e2(t)||$0(t)||r2()}function i2(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function VT(t){var e=i2(t,"string");return typeof e=="symbol"?e:e+""}function en(t){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(t)}function $0(t,e){if(t){if(typeof t=="string")return C0(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C0(t,e):void 0}}var Xt=typeof window>"u"?null:window,cS=Xt?Xt.navigator:null;Xt&&Xt.document;var o2=en(""),jT=en({}),a2=en(function(){}),s2=typeof HTMLElement>"u"?"undefined":en(HTMLElement),$l=function(e){return e&&e.instanceString&&xt(e.instanceString)?e.instanceString():null},Ie=function(e){return e!=null&&en(e)==o2},xt=function(e){return e!=null&&en(e)===a2},bt=function(e){return!ur(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},tt=function(e){return e!=null&&en(e)===jT&&!bt(e)&&e.constructor===Object},u2=function(e){return e!=null&&en(e)===jT},se=function(e){return e!=null&&en(e)===en(1)&&!isNaN(e)},l2=function(e){return se(e)&&Math.floor(e)===e},lh=function(e){if(s2!=="undefined")return e!=null&&e instanceof HTMLElement},ur=function(e){return zl(e)||HT(e)},zl=function(e){return $l(e)==="collection"&&e._private.single},HT=function(e){return $l(e)==="collection"&&!e._private.single},z0=function(e){return $l(e)==="core"},UT=function(e){return $l(e)==="stylesheet"},c2=function(e){return $l(e)==="event"},go=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},d2=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},f2=function(e){return tt(e)&&se(e.x1)&&se(e.x2)&&se(e.y1)&&se(e.y2)},h2=function(e){return u2(e)&&xt(e.then)},p2=function(){return cS&&cS.userAgent.match(/msie|trident|edge/i)},ks=function(e,n){n||(n=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var r=function(){var o=this,a=arguments,s,u=n.apply(o,a),l=r.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return r.cache={},r},q0=ks(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Eh=ks(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),$T=ks(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),dS=function(e){return go(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},lo=function(e,n){return e.slice(-1*n.length)===n},Jt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",g2="rgb[a]?\\(("+Jt+"[%]?)\\s*,\\s*("+Jt+"[%]?)\\s*,\\s*("+Jt+"[%]?)(?:\\s*,\\s*("+Jt+"))?\\)",v2="rgb[a]?\\((?:"+Jt+"[%]?)\\s*,\\s*(?:"+Jt+"[%]?)\\s*,\\s*(?:"+Jt+"[%]?)(?:\\s*,\\s*(?:"+Jt+"))?\\)",m2="hsl[a]?\\(("+Jt+")\\s*,\\s*("+Jt+"[%])\\s*,\\s*("+Jt+"[%])(?:\\s*,\\s*("+Jt+"))?\\)",y2="hsl[a]?\\((?:"+Jt+")\\s*,\\s*(?:"+Jt+"[%])\\s*,\\s*(?:"+Jt+"[%])(?:\\s*,\\s*(?:"+Jt+"))?\\)",b2="\\#[0-9a-fA-F]{3}",w2="\\#[0-9a-fA-F]{6}",zT=function(e,n){return e<n?-1:e>n?1:0},D2=function(e,n){return-1*zT(e,n)},Me=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r!=null)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},E2=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var n=e.length===4,r,i,o,a=16;return n?(r=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(r=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[r,i,o]}},C2=function(e){var n,r,i,o,a,s,u,l;function c(p,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?p+(m-p)*6*g:g<1/2?m:g<2/3?p+(m-p)*(2/3-g)*6:p}var d=new RegExp("^"+m2+"$").exec(e);if(d){if(r=parseInt(d[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r=r%360),r/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,o=parseFloat(d[3]),o<0||o>100)||(o=o/100,a=d[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var f=o<.5?o*(1+i):o+i-o*i,h=2*o-f;s=Math.round(255*c(h,f,r+1/3)),u=Math.round(255*c(h,f,r)),l=Math.round(255*c(h,f,r-1/3))}n=[s,u,l,a]}return n},I2=function(e){var n,r=new RegExp("^"+g2+"$").exec(e);if(r){n=[];for(var i=[],o=1;o<=3;o++){var a=r[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;n.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;n.push(l)}}return n},S2=function(e){return _2[e.toLowerCase()]},qT=function(e){return(bt(e)?e:null)||S2(e)||E2(e)||I2(e)||C2(e)},_2={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},GT=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(tt(a))throw Error("Tried to set map with object key");o<r.length-1?(n[a]==null&&(n[a]={}),n=n[a]):n[a]=e.value}},WT=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(tt(a))throw Error("Tried to get map with object key");if(n=n[a],n==null)return n}return n},Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ql(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wm,fS;function Gl(){if(fS)return Wm;fS=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return Wm=t,Wm}var Zm,hS;function T2(){if(hS)return Zm;hS=1;var t=typeof Bf=="object"&&Bf&&Bf.Object===Object&&Bf;return Zm=t,Zm}var Ym,pS;function Ch(){if(pS)return Ym;pS=1;var t=T2(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Ym=n,Ym}var Km,gS;function x2(){if(gS)return Km;gS=1;var t=Ch(),e=function(){return t.Date.now()};return Km=e,Km}var Qm,vS;function M2(){if(vS)return Qm;vS=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Qm=e,Qm}var Xm,mS;function A2(){if(mS)return Xm;mS=1;var t=M2(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Xm=n,Xm}var Jm,yS;function G0(){if(yS)return Jm;yS=1;var t=Ch(),e=t.Symbol;return Jm=e,Jm}var ey,bS;function R2(){if(bS)return ey;bS=1;var t=G0(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(a){var s=n.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=r.call(a);return l&&(s?a[i]=u:delete a[i]),c}return ey=o,ey}var ty,wS;function N2(){if(wS)return ty;wS=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return ty=n,ty}var ny,DS;function ZT(){if(DS)return ny;DS=1;var t=G0(),e=R2(),n=N2(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?e(s):n(s)}return ny=a,ny}var ry,ES;function O2(){if(ES)return ry;ES=1;function t(e){return e!=null&&typeof e=="object"}return ry=t,ry}var iy,CS;function Wl(){if(CS)return iy;CS=1;var t=ZT(),e=O2(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return iy=r,iy}var oy,IS;function k2(){if(IS)return oy;IS=1;var t=A2(),e=Gl(),n=Wl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=t(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return oy=u,oy}var ay,SS;function P2(){if(SS)return ay;SS=1;var t=Gl(),e=x2(),n=k2(),r="Expected a function",i=Math.max,o=Math.min;function a(s,u,l){var c,d,f,h,p,m,g=0,v=!1,y=!1,b=!0;if(typeof s!="function")throw new TypeError(r);u=n(u)||0,t(l)&&(v=!!l.leading,y="maxWait"in l,f=y?i(n(l.maxWait)||0,u):f,b="trailing"in l?!!l.trailing:b);function w(A){var R=c,O=d;return c=d=void 0,g=A,h=s.apply(O,R),h}function E(A){return g=A,p=setTimeout(I,u),v?w(A):h}function C(A){var R=A-m,O=A-g,k=u-R;return y?o(k,f-O):k}function D(A){var R=A-m,O=A-g;return m===void 0||R>=u||R<0||y&&O>=f}function I(){var A=e();if(D(A))return _(A);p=setTimeout(I,C(A))}function _(A){return p=void 0,b&&c?w(A):(c=d=void 0,h)}function T(){p!==void 0&&clearTimeout(p),g=0,c=m=d=p=void 0}function x(){return p===void 0?h:_(e())}function M(){var A=e(),R=D(A);if(c=arguments,d=this,m=A,R){if(p===void 0)return E(m);if(y)return clearTimeout(p),p=setTimeout(I,u),w(m)}return p===void 0&&(p=setTimeout(I,u)),h}return M.cancel=T,M.flush=x,M}return ay=a,ay}var F2=P2(),Zl=ql(F2),sy=Xt?Xt.performance:null,YT=sy&&sy.now?function(){return sy.now()}:function(){return Date.now()},L2=(function(){if(Xt){if(Xt.requestAnimationFrame)return function(t){Xt.requestAnimationFrame(t)};if(Xt.mozRequestAnimationFrame)return function(t){Xt.mozRequestAnimationFrame(t)};if(Xt.webkitRequestAnimationFrame)return function(t){Xt.webkitRequestAnimationFrame(t)};if(Xt.msRequestAnimationFrame)return function(t){Xt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(YT())},1e3/60)}})(),ch=function(e){return L2(e)},Ni=YT,Ea=9261,KT=65599,_s=5381,QT=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ea,r=n,i;i=e.next(),!i.done;)r=r*KT+i.value|0;return r},Ol=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ea;return n*KT+e|0},kl=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_s;return(n<<5)+n+e|0},B2=function(e,n){return e*2097152+n},ao=function(e){return e[0]*2097152+e[1]},Vf=function(e,n){return[Ol(e[0],n[0]),kl(e[1],n[1])]},_S=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e[i++]:r.done=!0,r}};return QT(a,n)},Sa=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e.charCodeAt(i++):r.done=!0,r}};return QT(a,n)},XT=function(){return V2(arguments)},V2=function(e){for(var n,r=0;r<e.length;r++){var i=e[r];r===0?n=Sa(i):n=Sa(i,n)}return n};function j2(t,e,n,r,i){var o=i*Math.PI/180,a=Math.cos(o)*(t-n)-Math.sin(o)*(e-r)+n,s=Math.sin(o)*(t-n)+Math.cos(o)*(e-r)+r;return{x:a,y:s}}var H2=function(e,n,r,i,o,a){return{x:(e-r)*o+r,y:(n-i)*a+i}};function U2(t,e,n){if(n===0)return t;var r=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,o=e.w/e.h,a=1/o,s=j2(t.x,t.y,r,i,n),u=H2(s.x,s.y,r,i,o,a);return{x:u.x,y:u.y}}var TS=!0,$2=console.warn!=null,z2=console.trace!=null,W0=Number.MAX_SAFE_INTEGER||9007199254740991,JT=function(){return!0},dh=function(){return!1},xS=function(){return 0},Z0=function(){},_t=function(e){throw new Error(e)},ex=function(e){if(e!==void 0)TS=!!e;else return TS},ft=function(e){ex()&&($2?console.warn(e):(console.log(e),z2&&console.trace()))},q2=function(e){return Me({},e)},di=function(e){return e==null?e:bt(e)?e.slice():tt(e)?q2(e):e},G2=function(e){return e.slice()},tx=function(e,n){for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n},W2={},nx=function(){return W2},Dn=function(e){var n=Object.keys(e);return function(r){for(var i={},o=0;o<n.length;o++){var a=n[o],s=r?.[a];i[a]=s===void 0?e[a]:s}return i}},vo=function(e,n,r){for(var i=e.length-1;i>=0;i--)e[i]===n&&e.splice(i,1)},Y0=function(e){e.splice(0,e.length)},Z2=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}},Jn=function(e,n,r){return r&&(n=$T(r,n)),e[n]},Ai=function(e,n,r,i){r&&(n=$T(r,n)),e[n]=i},Y2=(function(){function t(){Eo(this,t),this._obj={}}return Co(t,[{key:"set",value:function(n,r){return this._obj[n]=r,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return this._obj[n]!==void 0}},{key:"get",value:function(n){return this._obj[n]}}])})(),Ri=typeof Map<"u"?Map:Y2,K2="undefined",Q2=(function(){function t(e){if(Eo(this,t),this._obj=Object.create(null),this.size=0,e!=null){var n;e.instanceString!=null&&e.instanceString()===this.instanceString()?n=e.toArray():n=e;for(var r=0;r<n.length;r++)this.add(n[r])}}return Co(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var r=this._obj;r[n]!==1&&(r[n]=1,this.size++)}},{key:"delete",value:function(n){var r=this._obj;r[n]===1&&(r[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return this._obj[n]===1}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(r){return n.has(r)})}},{key:"forEach",value:function(n,r){return this.toArray().forEach(n,r)}}])})(),Ls=(typeof Set>"u"?"undefined":en(Set))!==K2?Set:Q2,Ih=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||n===void 0||!z0(e)){_t("An element must have a core reference and parameters set");return}var i=n.group;if(i==null&&(n.data&&n.data.source!=null&&n.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){_t("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:n.selectable===void 0?!0:!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:n.grabbable===void 0?!0:!!n.grabbable,pannable:n.pannable===void 0?i==="edges":!!n.pannable,active:!1,classes:new Ls,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),n.renderedPosition){var a=n.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];bt(n.classes)?l=n.classes:Ie(n.classes)&&(l=n.classes.split(/\s+/));for(var c=0,d=l.length;c<d;c++){var f=l[c];!f||f===""||o.classes.add(f)}this.createEmitter(),(r===void 0||r)&&this.restore();var h=n.style||n.css;h&&(ft("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},MS=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(r,i,o){var a;tt(r)&&!ur(r)&&(a=r,r=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!xt(i)?i:o,i=xt(i)?i:function(){};for(var s=this._private.cy,u=r=Ie(r)?this.filter(r):r,l=[],c=[],d={},f={},h={},p=0,m,g=this.byGroup(),v=g.nodes,y=g.edges,b=0;b<u.length;b++){var w=u[b],E=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[E]=!0,c.push(w)),f[E]=0)}for(var C=function(){var A=e.bfs?l.shift():l.pop(),R=A.id();if(e.dfs){if(h[R])return 0;h[R]=!0,c.push(A)}var O=f[R],k=d[R],N=k!=null?k.source():null,P=k!=null?k.target():null,V=k==null?void 0:A.same(N)?P[0]:N[0],U;if(U=i(A,k,V,p++,O),U===!0)return m=A,1;if(U===!1)return 1;for(var F=A.connectedEdges().filter(function(J){return(!o||J.source().same(A))&&y.has(J)}),B=0;B<F.length;B++){var G=F[B],Q=G.connectedNodes().filter(function(J){return!J.same(A)&&v.has(J)}),W=Q.id();Q.length!==0&&!h[W]&&(Q=Q[0],l.push(Q),e.bfs&&(h[W]=!0,c.push(Q)),d[W]=G,f[W]=f[R]+1)}},D;l.length!==0&&(D=C(),!(D!==0&&D===1)););for(var I=s.collection(),_=0;_<c.length;_++){var T=c[_],x=d[T.id()];x!=null&&I.push(x),I.push(T)}return{path:s.collection(I),found:s.collection(m)}}},Pl={breadthFirstSearch:MS({bfs:!0}),depthFirstSearch:MS({dfs:!0})};Pl.bfs=Pl.breadthFirstSearch;Pl.dfs=Pl.depthFirstSearch;var Qf={exports:{}},X2=Qf.exports,AS;function J2(){return AS||(AS=1,(function(t,e){(function(){var n,r,i,o,a,s,u,l,c,d,f,h,p,m,g;i=Math.floor,d=Math.min,r=function(v,y){return v<y?-1:v>y?1:0},c=function(v,y,b,w,E){var C;if(b==null&&(b=0),E==null&&(E=r),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=v.length);b<w;)C=i((b+w)/2),E(y,v[C])<0?w=C:b=C+1;return[].splice.apply(v,[b,b-b].concat(y)),y},s=function(v,y,b){return b==null&&(b=r),v.push(y),m(v,0,v.length-1,b)},a=function(v,y){var b,w;return y==null&&(y=r),b=v.pop(),v.length?(w=v[0],v[0]=b,g(v,0,y)):w=b,w},l=function(v,y,b){var w;return b==null&&(b=r),w=v[0],v[0]=y,g(v,0,b),w},u=function(v,y,b){var w;return b==null&&(b=r),v.length&&b(v[0],y)<0&&(w=[v[0],y],y=w[0],v[0]=w[1],g(v,0,b)),y},o=function(v,y){var b,w,E,C,D,I;for(y==null&&(y=r),C=function(){I=[];for(var _=0,T=i(v.length/2);0<=T?_<T:_>T;0<=T?_++:_--)I.push(_);return I}.apply(this).reverse(),D=[],w=0,E=C.length;w<E;w++)b=C[w],D.push(g(v,b,y));return D},p=function(v,y,b){var w;if(b==null&&(b=r),w=v.indexOf(y),w!==-1)return m(v,0,w,b),g(v,w,b)},f=function(v,y,b){var w,E,C,D,I;if(b==null&&(b=r),E=v.slice(0,y),!E.length)return E;for(o(E,b),I=v.slice(y),C=0,D=I.length;C<D;C++)w=I[C],u(E,w,b);return E.sort(b).reverse()},h=function(v,y,b){var w,E,C,D,I,_,T,x,M;if(b==null&&(b=r),y*10<=v.length){if(C=v.slice(0,y).sort(b),!C.length)return C;for(E=C[C.length-1],T=v.slice(y),D=0,_=T.length;D<_;D++)w=T[D],b(w,E)<0&&(c(C,w,0,null,b),C.pop(),E=C[C.length-1]);return C}for(o(v,b),M=[],I=0,x=d(y,v.length);0<=x?I<x:I>x;0<=x?++I:--I)M.push(a(v,b));return M},m=function(v,y,b,w){var E,C,D;for(w==null&&(w=r),E=v[b];b>y;){if(D=b-1>>1,C=v[D],w(E,C)<0){v[b]=C,b=D;continue}break}return v[b]=E},g=function(v,y,b){var w,E,C,D,I;for(b==null&&(b=r),E=v.length,I=y,C=v[y],w=2*y+1;w<E;)D=w+1,D<E&&!(b(v[w],v[D])<0)&&(w=D),v[y]=v[w],y=w,w=2*y+1;return v[y]=C,m(v,I,y,b)},n=(function(){v.push=s,v.pop=a,v.replace=l,v.pushpop=u,v.heapify=o,v.updateItem=p,v.nlargest=f,v.nsmallest=h;function v(y){this.cmp=y??r,this.nodes=[]}return v.prototype.push=function(y){return s(this.nodes,y,this.cmp)},v.prototype.pop=function(){return a(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},v.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},v.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},v.prototype.heapify=function(){return o(this.nodes,this.cmp)},v.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var y;return y=new v,y.nodes=this.nodes.slice(0),y},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v})(),(function(v,y){return t.exports=y()})(this,function(){return n})}).call(X2)})(Qf)),Qf.exports}var uy,RS;function eB(){return RS||(RS=1,uy=J2()),uy}var tB=eB(),Yl=ql(tB),nB=Dn({root:null,weight:function(e){return 1},directed:!1}),rB={dijkstra:function(e){if(!tt(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var r=nB(e),i=r.root,o=r.weight,a=r.directed,s=this,u=o,l=Ie(i)?this.filter(i)[0]:i[0],c={},d={},f={},h=this.byGroup(),p=h.nodes,m=h.edges;m.unmergeBy(function(O){return O.isLoop()});for(var g=function(k){return c[k.id()]},v=function(k,N){c[k.id()]=N,y.updateItem(k)},y=new Yl(function(O,k){return g(O)-g(k)}),b=0;b<p.length;b++){var w=p[b];c[w.id()]=w.same(l)?0:1/0,y.push(w)}for(var E=function(k,N){for(var P=(a?k.edgesTo(N):k.edgesWith(N)).intersect(m),V=1/0,U,F=0;F<P.length;F++){var B=P[F],G=u(B);(G<V||!U)&&(V=G,U=B)}return{edge:U,dist:V}};y.size()>0;){var C=y.pop(),D=g(C),I=C.id();if(f[I]=D,D!==1/0)for(var _=C.neighborhood().intersect(p),T=0;T<_.length;T++){var x=_[T],M=x.id(),A=E(C,x),R=D+A.dist;R<g(x)&&(v(x,R),d[M]={node:C,edge:A.edge})}}return{distanceTo:function(k){var N=Ie(k)?p.filter(k)[0]:k[0];return f[N.id()]},pathTo:function(k){var N=Ie(k)?p.filter(k)[0]:k[0],P=[],V=N,U=V.id();if(N.length>0)for(P.unshift(N);d[U];){var F=d[U];P.unshift(F.edge),P.unshift(F.node),V=F.node,U=V.id()}return s.spawn(P)}}}},iB={kruskal:function(e){e=e||function(b){return 1};for(var n=this.byGroup(),r=n.nodes,i=n.edges,o=r.length,a=new Array(o),s=r,u=function(w){for(var E=0;E<a.length;E++){var C=a[E];if(C.has(w))return E}},l=0;l<o;l++)a[l]=this.spawn(r[l]);for(var c=i.sort(function(b,w){return e(b)-e(w)}),d=0;d<c.length;d++){var f=c[d],h=f.source()[0],p=f.target()[0],m=u(h),g=u(p),v=a[m],y=a[g];m!==g&&(s.merge(f),v.merge(y),a.splice(g,1))}return s}},oB=Dn({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),aB={aStar:function(e){var n=this.cy(),r=oB(e),i=r.root,o=r.goal,a=r.heuristic,s=r.directed,u=r.weight;i=n.collection(i)[0],o=n.collection(o)[0];var l=i.id(),c=o.id(),d={},f={},h={},p=new Yl(function(U,F){return f[U.id()]-f[F.id()]}),m=new Ls,g={},v={},y=function(F,B){p.push(F),m.add(B)},b,w,E=function(){b=p.pop(),w=b.id(),m.delete(w)},C=function(F){return m.has(F)};y(i,l),d[l]=0,f[l]=a(i);for(var D=0;p.size()>0;){if(E(),D++,w===c){for(var I=[],_=o,T=c,x=v[T];I.unshift(_),x!=null&&I.unshift(x),_=g[T],_!=null;)T=_.id(),x=v[T];return{found:!0,distance:d[w],path:this.spawn(I),steps:D}}h[w]=!0;for(var M=b._private.edges,A=0;A<M.length;A++){var R=M[A];if(this.hasElementWithId(R.id())&&!(s&&R.data("source")!==w)){var O=R.source(),k=R.target(),N=O.id()!==w?O:k,P=N.id();if(this.hasElementWithId(P)&&!h[P]){var V=d[w]+u(R);if(!C(P)){d[P]=V,f[P]=V+a(N),y(N,P),g[P]=b,v[P]=R;continue}V<d[P]&&(d[P]=V,f[P]=V+a(N),g[P]=b,v[P]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},sB=Dn({weight:function(e){return 1},directed:!1}),uB={floydWarshall:function(e){for(var n=this.cy(),r=sB(e),i=r.weight,o=r.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,d=c*c,f=function(G){return u.indexOf(G)},h=function(G){return u[G]},p=new Array(d),m=0;m<d;m++){var g=m%c,v=(m-g)/c;v===g?p[m]=0:p[m]=1/0}for(var y=new Array(d),b=new Array(d),w=0;w<l.length;w++){var E=l[w],C=E.source()[0],D=E.target()[0];if(C!==D){var I=f(C),_=f(D),T=I*c+_,x=a(E);if(p[T]>x&&(p[T]=x,y[T]=_,b[T]=E),!o){var M=_*c+I;!o&&p[M]>x&&(p[M]=x,y[M]=I,b[M]=E)}}}for(var A=0;A<c;A++)for(var R=0;R<c;R++)for(var O=R*c+A,k=0;k<c;k++){var N=R*c+k,P=A*c+k;p[O]+p[P]<p[N]&&(p[N]=p[O]+p[P],y[N]=y[O])}var V=function(G){return(Ie(G)?n.filter(G):G)[0]},U=function(G){return f(V(G))},F={distance:function(G,Q){var W=U(G),J=U(Q);return p[W*c+J]},path:function(G,Q){var W=U(G),J=U(Q),ne=h(W);if(W===J)return ne.collection();if(y[W*c+J]==null)return n.collection();var le=n.collection(),X=W,L;for(le.merge(ne);W!==J;)X=W,W=y[W*c+J],L=b[X*c+W],le.merge(L),le.merge(h(W));return le}};return F}},lB=Dn({weight:function(e){return 1},directed:!1,root:null}),cB={bellmanFord:function(e){var n=this,r=lB(e),i=r.weight,o=r.directed,a=r.root,s=i,u=this,l=this.cy(),c=this.byGroup(),d=c.edges,f=c.nodes,h=f.length,p=new Ri,m=!1,g=[];a=l.collection(a)[0],d.unmergeBy(function(Fe){return Fe.isLoop()});for(var v=d.length,y=function(Ae){var _e=p.get(Ae.id());return _e||(_e={},p.set(Ae.id(),_e)),_e},b=function(Ae){return(Ie(Ae)?l.$(Ae):Ae)[0]},w=function(Ae){return y(b(Ae)).dist},E=function(Ae){for(var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,ce=b(Ae),De=[],Ee=ce;;){if(Ee==null)return n.spawn();var ke=y(Ee),Se=ke.edge,$e=ke.pred;if(De.unshift(Ee[0]),Ee.same(_e)&&De.length>0)break;Se!=null&&De.unshift(Se),Ee=$e}return u.spawn(De)},C=0;C<h;C++){var D=f[C],I=y(D);D.same(a)?I.dist=0:I.dist=1/0,I.pred=null,I.edge=null}for(var _=!1,T=function(Ae,_e,ce,De,Ee,ke){var Se=De.dist+ke;Se<Ee.dist&&!ce.same(De.edge)&&(Ee.dist=Se,Ee.pred=Ae,Ee.edge=ce,_=!0)},x=1;x<h;x++){_=!1;for(var M=0;M<v;M++){var A=d[M],R=A.source(),O=A.target(),k=s(A),N=y(R),P=y(O);T(R,O,A,N,P,k),o||T(O,R,A,P,N,k)}if(!_)break}if(_)for(var V=[],U=0;U<v;U++){var F=d[U],B=F.source(),G=F.target(),Q=s(F),W=y(B).dist,J=y(G).dist;if(W+Q<J||!o&&J+Q<W)if(m||(ft("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var ne=[];W+Q<J&&ne.push(B),!o&&J+Q<W&&ne.push(G);for(var le=ne.length,X=0;X<le;X++){var L=ne[X],j=[L];j.push(y(L).edge);for(var $=y(L).pred;j.indexOf($)===-1;)j.push($),j.push(y($).edge),$=y($).pred;j=j.slice(j.indexOf($));for(var Y=j[0].id(),ae=0,we=2;we<j.length;we+=2)j[we].id()<Y&&(Y=j[we].id(),ae=we);j=j.slice(ae).concat(j.slice(0,ae)),j.push(j[0]);var Qe=j.map(function(Fe){return Fe.id()}).join(",");V.indexOf(Qe)===-1&&(g.push(u.spawn(j)),V.push(Qe))}}else break}return{distanceTo:w,pathTo:E,hasNegativeWeightCycle:m,negativeWeightCycles:g}}},dB=Math.sqrt(2),fB=function(e,n,r){r.length===0&&_t("Karger-Stein must be run on a connected (sub)graph");for(var i=r[e],o=i[1],a=i[2],s=n[o],u=n[a],l=r,c=l.length-1;c>=0;c--){var d=l[c],f=d[1],h=d[2];(n[f]===s&&n[h]===u||n[f]===u&&n[h]===s)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var m=l[p];m[1]===u?(l[p]=m.slice(),l[p][1]=s):m[2]===u&&(l[p]=m.slice(),l[p][2]=s)}for(var g=0;g<n.length;g++)n[g]===u&&(n[g]=s);return l},ly=function(e,n,r,i){for(;r>i;){var o=Math.floor(Math.random()*n.length);n=fB(o,e,n),r--}return n},hB={kargerStein:function(){var e=this,n=this.byGroup(),r=n.nodes,i=n.edges;i.unmergeBy(function(P){return P.isLoop()});var o=r.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/dB);if(o<2){_t("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var d=i[c];l.push([c,r.indexOf(d.source()),r.indexOf(d.target())])}for(var f=1/0,h=[],p=new Array(o),m=new Array(o),g=new Array(o),v=function(V,U){for(var F=0;F<o;F++)U[F]=V[F]},y=0;y<=s;y++){for(var b=0;b<o;b++)m[b]=b;var w=ly(m,l.slice(),o,u),E=w.slice();v(m,g);var C=ly(m,w,u,2),D=ly(g,E,u,2);C.length<=D.length&&C.length<f?(f=C.length,h=C,v(m,p)):D.length<=C.length&&D.length<f&&(f=D.length,h=D,v(g,p))}for(var I=this.spawn(h.map(function(P){return i[P[0]]})),_=this.spawn(),T=this.spawn(),x=p[0],M=0;M<p.length;M++){var A=p[M],R=r[M];A===x?_.merge(R):T.merge(R)}var O=function(V){var U=e.spawn();return V.forEach(function(F){U.merge(F),F.connectedEdges().forEach(function(B){e.contains(B)&&!I.contains(B)&&U.merge(B)})}),U},k=[O(_),O(T)],N={cut:I,components:k,partition1:_,partition2:T};return N}},cy,pB=function(e){return{x:e.x,y:e.y}},Sh=function(e,n,r){return{x:e.x*n+r.x,y:e.y*n+r.y}},rx=function(e,n,r){return{x:(e.x-r.x)/n,y:(e.y-r.y)/n}},Ts=function(e){return{x:e[0],y:e[1]}},gB=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},vB=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},mB=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=n;a<r;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},yB=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(n,r):(r<e.length&&e.splice(r,e.length-r),n>0&&e.splice(0,n));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(f,h){return f-h});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+s]:(e[d-1+s]+e[d+s])/2},bB=function(e){return Math.PI*e/180},jf=function(e,n){return Math.atan2(n,e)-Math.PI/2},K0=Math.log2||function(t){return Math.log(t)/Math.log(2)},Q0=function(e){return e>0?1:e<0?-1:0},_a=function(e,n){return Math.sqrt(wa(e,n))},wa=function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i},wB=function(e){for(var n=e.length,r=0,i=0;i<n;i++)r+=e[i];for(var o=0;o<n;o++)e[o]=e[o]/r;return e},un=function(e,n,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*n+i*i*r},As=function(e,n,r,i){return{x:un(e.x,n.x,r.x,i),y:un(e.y,n.y,r.y,i)}},DB=function(e,n,r,i){var o={x:n.x-e.x,y:n.y-e.y},a=_a(e,n),s={x:o.x/a,y:o.y/a};return r=r??0,i=i??r*a,{x:e.x+s.x*i,y:e.y+s.y*i}},Fl=function(e,n,r){return Math.max(e,Math.min(r,n))},jn=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},EB=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},CB=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},IB=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},ix=function(e,n,r){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},Xf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Jf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],r,i,o,a;if(n.length===1)r=i=o=a=n[0];else if(n.length===2)r=o=n[0],a=i=n[1];else if(n.length===4){var s=Zt(n,4);r=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=r,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},NS=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},X0=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},co=function(e,n,r){return e.x1<=n&&n<=e.x2&&e.y1<=r&&r<=e.y2},OS=function(e,n){return co(e,n.x,n.y)},ox=function(e,n){return co(e,n.x1,n.y1)&&co(e,n.x2,n.y2)},SB=(cy=Math.hypot)!==null&&cy!==void 0?cy:function(t,e){return Math.sqrt(t*t+e*e)};function _B(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var n=function(I,_){return{x:I.x+_.x,y:I.y+_.y}},r=function(I,_){return{x:I.x-_.x,y:I.y-_.y}},i=function(I,_){return{x:I.x*_,y:I.y*_}},o=function(I,_){return I.x*_.y-I.y*_.x},a=function(I){var _=SB(I.x,I.y);return _===0?{x:0,y:0}:{x:I.x/_,y:I.y/_}},s=function(I){for(var _=0,T=0;T<I.length;T++){var x=I[T],M=I[(T+1)%I.length];_+=x.x*M.y-M.x*x.y}return _/2},u=function(I,_,T,x){var M=r(_,I),A=r(x,T),R=o(M,A);if(Math.abs(R)<1e-9)return n(I,i(M,.5));var O=o(r(T,I),A)/R;return n(I,i(M,O))},l=t.map(function(D){return{x:D.x,y:D.y}});s(l)<0&&l.reverse();for(var c=l.length,d=[],f=0;f<c;f++){var h=l[f],p=l[(f+1)%c],m=r(p,h),g=a({x:m.y,y:-m.x});d.push(g)}for(var v=d.map(function(D,I){var _=n(l[I],i(D,e)),T=n(l[(I+1)%c],i(D,e));return{p1:_,p2:T}}),y=[],b=0;b<c;b++){var w=v[(b-1+c)%c],E=v[b],C=u(w.p1,w.p2,E.p1,E.p2);y.push(C)}return y}function TB(t,e,n,r,i,o){var a=FB(t,e,n,r,i),s=_B(a,o),u=jn();return s.forEach(function(l){return ix(u,l.x,l.y)}),u}var ax=function(e,n,r,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?mo(o,a):u,c=o/2,d=a/2;l=Math.min(l,c,d);var f=l!==c,h=l!==d,p;if(f){var m=r-c+l-s,g=i-d-s,v=r+c-l+s,y=g;if(p=fo(e,n,r,i,m,g,v,y,!1),p.length>0)return p}if(h){var b=r+c+s,w=i-d+l-s,E=b,C=i+d-l+s;if(p=fo(e,n,r,i,b,w,E,C,!1),p.length>0)return p}if(f){var D=r-c+l-s,I=i+d+s,_=r+c-l+s,T=I;if(p=fo(e,n,r,i,D,I,_,T,!1),p.length>0)return p}if(h){var x=r-c-s,M=i-d+l-s,A=x,R=i+d-l+s;if(p=fo(e,n,r,i,x,M,A,R,!1),p.length>0)return p}var O;{var k=r-c+l,N=i-d+l;if(O=Tl(e,n,r,i,k,N,l+s),O.length>0&&O[0]<=k&&O[1]<=N)return[O[0],O[1]]}{var P=r+c-l,V=i-d+l;if(O=Tl(e,n,r,i,P,V,l+s),O.length>0&&O[0]>=P&&O[1]<=V)return[O[0],O[1]]}{var U=r+c-l,F=i+d-l;if(O=Tl(e,n,r,i,U,F,l+s),O.length>0&&O[0]>=U&&O[1]>=F)return[O[0],O[1]]}{var B=r-c+l,G=i+d-l;if(O=Tl(e,n,r,i,B,G,l+s),O.length>0&&O[0]<=B&&O[1]>=G)return[O[0],O[1]]}return[]},xB=function(e,n,r,i,o,a,s){var u=s,l=Math.min(r,o),c=Math.max(r,o),d=Math.min(i,a),f=Math.max(i,a);return l-u<=e&&e<=c+u&&d-u<=n&&n<=f+u},MB=function(e,n,r,i,o,a,s,u,l){var c={x1:Math.min(r,s,o)-l,x2:Math.max(r,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||n<c.y1||n>c.y2)},AB=function(e,n,r,i){r-=i;var o=n*n-4*e*r;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-n+a)/s,l=(-n-a)/s;return[u,l]},RB=function(e,n,r,i,o){var a=1e-5;e===0&&(e=a),n/=e,r/=e,i/=e;var s,u,l,c,d,f,h,p;if(u=(3*r-n*n)/9,l=-(27*i)+n*(9*r-2*(n*n)),l/=54,s=u*u*u+l*l,o[1]=0,h=n/3,s>0){d=l+Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),f=l-Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),o[0]=-h+d+f,h+=(d+f)/2,o[4]=o[2]=-h,h=Math.sqrt(3)*(-f+d)/2,o[3]=h,o[5]=-h;return}if(o[5]=o[3]=0,s===0){p=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-h+2*p,o[4]=o[2]=-(p+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),p=2*Math.sqrt(u),o[0]=-h+p*Math.cos(c/3),o[2]=-h+p*Math.cos((c+2*Math.PI)/3),o[4]=-h+p*Math.cos((c+4*Math.PI)/3)},NB=function(e,n,r,i,o,a,s,u){var l=1*r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=9*r*o-3*r*r-3*r*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,d=3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*n+2*a*a+2*a*n-u*n,f=1*r*o-r*r+r*e-o*e+i*a-i*i+i*n-a*n,h=[];RB(l,c,d,f,h);for(var p=1e-7,m=[],g=0;g<6;g+=2)Math.abs(h[g+1])<p&&h[g]>=0&&h[g]<=1&&m.push(h[g]);m.push(1),m.push(0);for(var v=-1,y,b,w,E=0;E<m.length;E++)y=Math.pow(1-m[E],2)*r+2*(1-m[E])*m[E]*o+m[E]*m[E]*s,b=Math.pow(1-m[E],2)*i+2*(1-m[E])*m[E]*a+m[E]*m[E]*u,w=Math.pow(y-e,2)+Math.pow(b-n,2),v>=0?w<v&&(v=w):v=w;return v},OB=function(e,n,r,i,o,a){var s=[e-r,n-i],u=[o-r,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*u[0]+s[1]*u[1],f=d*d/l;return d<0?c:f>l?(e-o)*(e-o)+(n-a)*(n-a):c-f},er=function(e,n,r){for(var i,o,a,s,u,l=0,c=0;c<r.length/2;c++)if(i=r[c*2],o=r[c*2+1],c+1<r.length/2?(a=r[(c+1)*2],s=r[(c+1)*2+1]):(a=r[(c+1-r.length/2)*2],s=r[(c+1-r.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>n&&l++;else continue;return l%2!==0},Oi=function(e,n,r,i,o,a,s,u,l){var c=new Array(r.length),d;u[0]!=null?(d=Math.atan(u[1]/u[0]),u[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=u;for(var f=Math.cos(-d),h=Math.sin(-d),p=0;p<c.length/2;p++)c[p*2]=a/2*(r[p*2]*f-r[p*2+1]*h),c[p*2+1]=s/2*(r[p*2+1]*f+r[p*2]*h),c[p*2]+=i,c[p*2+1]+=o;var m;if(l>0){var g=hh(c,-l);m=fh(g)}else m=c;return er(e,n,m)},kB=function(e,n,r,i,o,a,s,u){for(var l=new Array(r.length*2),c=0;c<u.length;c++){var d=u[c];l[c*4+0]=d.startX,l[c*4+1]=d.startY,l[c*4+2]=d.stopX,l[c*4+3]=d.stopY;var f=Math.pow(d.cx-e,2)+Math.pow(d.cy-n,2);if(f<=Math.pow(d.radius,2))return!0}return er(e,n,l)},fh=function(e){for(var n=new Array(e.length/2),r,i,o,a,s,u,l,c,d=0;d<e.length/4;d++){r=e[d*4],i=e[d*4+1],o=e[d*4+2],a=e[d*4+3],d<e.length/4-1?(s=e[(d+1)*4],u=e[(d+1)*4+1],l=e[(d+1)*4+2],c=e[(d+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var f=fo(r,i,o,a,s,u,l,c,!0);n[d*2]=f[0],n[d*2+1]=f[1]}return n},hh=function(e,n){for(var r=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),d=Math.sqrt(l*l+c*c),f=l/d,h=c/d;r[u*4]=i+f*n,r[u*4+1]=o+h*n,r[u*4+2]=a+f*n,r[u*4+3]=s+h*n}return r},PB=function(e,n,r,i,o,a){var s=r-e,u=i-n;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var d=c/l;return[(r-e)*d+e,(i-n)*d+n]},Ia=function(e,n,r,i,o,a,s){return e-=o,n-=a,e/=r/2+s,n/=i/2+s,e*e+n*n<=1},Tl=function(e,n,r,i,o,a,s){var u=[r-e,i-n],l=[e-o,n-a],c=u[0]*u[0]+u[1]*u[1],d=2*(l[0]*u[0]+l[1]*u[1]),f=l[0]*l[0]+l[1]*l[1]-s*s,h=d*d-4*c*f;if(h<0)return[];var p=(-d+Math.sqrt(h))/(2*c),m=(-d-Math.sqrt(h))/(2*c),g=Math.min(p,m),v=Math.max(p,m),y=[];if(g>=0&&g<=1&&y.push(g),v>=0&&v<=1&&y.push(v),y.length===0)return[];var b=y[0]*u[0]+e,w=y[0]*u[1]+n;if(y.length>1){if(y[0]==y[1])return[b,w];var E=y[1]*u[0]+e,C=y[1]*u[1]+n;return[b,w,E,C]}else return[b,w]},dy=function(e,n,r){return n<=e&&e<=r||r<=e&&e<=n?e:e<=n&&n<=r||r<=n&&n<=e?n:r},fo=function(e,n,r,i,o,a,s,u,l){var c=e-o,d=r-e,f=s-o,h=n-a,p=i-n,m=u-a,g=f*h-m*c,v=d*h-p*c,y=m*d-f*p;if(y!==0){var b=g/y,w=v/y,E=.001,C=0-E,D=1+E;return C<=b&&b<=D&&C<=w&&w<=D?[e+b*d,n+b*p]:l?[e+b*d,n+b*p]:[]}else return g===0||v===0?dy(e,r,s)===s?[s,u]:dy(e,r,o)===o?[o,a]:dy(o,s,r)===r?[r,i]:[]:[]},FB=function(e,n,r,i,o){var a=[],s=i/2,u=o/2,l=n,c=r;a.push({x:l+s*e[0],y:c+u*e[1]});for(var d=1;d<e.length/2;d++)a.push({x:l+s*e[d*2],y:c+u*e[d*2+1]});return a},Ll=function(e,n,r,i,o,a,s,u){var l=[],c,d=new Array(r.length),f=!0;a==null&&(f=!1);var h;if(f){for(var p=0;p<d.length/2;p++)d[p*2]=r[p*2]*a+i,d[p*2+1]=r[p*2+1]*s+o;if(u>0){var m=hh(d,-u);h=fh(m)}else h=d}else h=r;for(var g,v,y,b,w=0;w<h.length/2;w++)g=h[w*2],v=h[w*2+1],w<h.length/2-1?(y=h[(w+1)*2],b=h[(w+1)*2+1]):(y=h[0],b=h[1]),c=fo(e,n,i,o,g,v,y,b),c.length!==0&&l.push(c[0],c[1]);return l},LB=function(e,n,r,i,o,a,s,u,l){var c=[],d,f=new Array(r.length*2);l.forEach(function(y,b){b===0?(f[f.length-2]=y.startX,f[f.length-1]=y.startY):(f[b*4-2]=y.startX,f[b*4-1]=y.startY),f[b*4]=y.stopX,f[b*4+1]=y.stopY,d=Tl(e,n,i,o,y.cx,y.cy,y.radius),d.length!==0&&c.push(d[0],d[1])});for(var h=0;h<f.length/4;h++)d=fo(e,n,i,o,f[h*4],f[h*4+1],f[h*4+2],f[h*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var p=[c[0],c[1]],m=Math.pow(p[0]-e,2)+Math.pow(p[1]-n,2),g=1;g<c.length/2;g++){var v=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-n,2);v<=m&&(p[0]=c[g*2],p[1]=c[g*2+1],m=v)}return p}return c},Hf=function(e,n,r){var i=[e[0]-n[0],e[1]-n[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-r)/o;return a<0&&(a=1e-5),[n[0]+a*i[0],n[1]+a*i[1]]},Vn=function(e,n){var r=I0(e,n);return r=sx(r),r},sx=function(e){for(var n,r,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)n=e[2*l],r=e[2*l+1],o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);for(var c=2/(s-o),d=2/(u-a),f=0;f<i;f++)n=e[2*f]=e[2*f]*c,r=e[2*f+1]=e[2*f+1]*d,o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);if(a<-1)for(var h=0;h<i;h++)r=e[2*h+1]=e[2*h+1]+(-1-a);return e},I0=function(e,n){var r=1/e*2*Math.PI,i=e%2===0?Math.PI/2+r/2:Math.PI/2;i+=n;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*r+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},mo=function(e,n){return Math.min(e/4,n/4,8)},ux=function(e,n){return Math.min(e/10,n/10,8)},J0=function(){return 8},BB=function(e,n,r){return[e-2*n+r,2*(n-e),e]},S0=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function fy(t,e){function n(d){for(var f=[],h=0;h<d.length;h++){var p=d[h],m=d[(h+1)%d.length],g={x:m.x-p.x,y:m.y-p.y},v={x:-g.y,y:g.x},y=Math.sqrt(v.x*v.x+v.y*v.y);f.push({x:v.x/y,y:v.y/y})}return f}function r(d,f){var h=1/0,p=-1/0,m=tr(d),g;try{for(m.s();!(g=m.n()).done;){var v=g.value,y=v.x*f.x+v.y*f.y;h=Math.min(h,y),p=Math.max(p,y)}}catch(b){m.e(b)}finally{m.f()}return{min:h,max:p}}function i(d,f){return!(d.max<f.min||f.max<d.min)}var o=[].concat(uh(n(t)),uh(n(e))),a=tr(o),s;try{for(a.s();!(s=a.n()).done;){var u=s.value,l=r(t,u),c=r(e,u);if(!i(l,c))return!1}}catch(d){a.e(d)}finally{a.f()}return!0}var VB=Dn({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),jB={pageRank:function(e){for(var n=VB(e),r=n.dampingFactor,i=n.precision,o=n.iterations,a=n.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,d=l.length,f=d*d,h=c.length,p=new Array(f),m=new Array(d),g=(1-r)/d,v=0;v<d;v++){for(var y=0;y<d;y++){var b=v*d+y;p[b]=0}m[v]=0}for(var w=0;w<h;w++){var E=c[w],C=E.data("source"),D=E.data("target");if(C!==D){var I=l.indexOfId(C),_=l.indexOfId(D),T=a(E),x=_*d+I;p[x]+=T,m[I]+=T}}for(var M=1/d+g,A=0;A<d;A++)if(m[A]===0)for(var R=0;R<d;R++){var O=R*d+A;p[O]=M}else for(var k=0;k<d;k++){var N=k*d+A;p[N]=p[N]/m[A]+g}for(var P=new Array(d),V=new Array(d),U,F=0;F<d;F++)P[F]=1;for(var B=0;B<o;B++){for(var G=0;G<d;G++)V[G]=0;for(var Q=0;Q<d;Q++)for(var W=0;W<d;W++){var J=Q*d+W;V[Q]+=p[J]*P[W]}wB(V),U=P,P=V,V=U;for(var ne=0,le=0;le<d;le++){var X=U[le]-P[le];ne+=X*X}if(ne<i)break}var L={rank:function($){return $=s.collection($)[0],P[l.indexOf($)]}};return L}},kS=Dn({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Rs={degreeCentralityNormalized:function(e){e=kS(e);var n=this.cy(),r=this.nodes(),i=r.length;if(e.directed){for(var c={},d={},f=0,h=0,p=0;p<i;p++){var m=r[p],g=m.id();e.root=m;var v=this.degreeCentrality(e);f<v.indegree&&(f=v.indegree),h<v.outdegree&&(h=v.outdegree),c[g]=v.indegree,d[g]=v.outdegree}return{indegree:function(b){return f==0?0:(Ie(b)&&(b=n.filter(b)),c[b.id()]/f)},outdegree:function(b){return h===0?0:(Ie(b)&&(b=n.filter(b)),d[b.id()]/h)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=r[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(b){return a===0?0:(Ie(b)&&(b=n.filter(b)),o[b.id()]/a)}}}},degreeCentrality:function(e){e=kS(e);var n=this.cy(),r=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=n.collection(o)[0],s){for(var h=o.connectedEdges(),p=h.filter(function(C){return C.target().same(o)&&r.has(C)}),m=h.filter(function(C){return C.source().same(o)&&r.has(C)}),g=p.length,v=m.length,y=0,b=0,w=0;w<p.length;w++)y+=a(p[w]);for(var E=0;E<m.length;E++)b+=a(m[E]);return{indegree:Math.pow(g,1-u)*Math.pow(y,u),outdegree:Math.pow(v,1-u)*Math.pow(b,u)}}else{for(var l=o.connectedEdges().intersection(r),c=l.length,d=0,f=0;f<l.length;f++)d+=a(l[f]);return{degree:Math.pow(c,1-u)*Math.pow(d,u)}}}};Rs.dc=Rs.degreeCentrality;Rs.dcn=Rs.degreeCentralityNormalised=Rs.degreeCentralityNormalized;var PS=Dn({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ns={closenessCentralityNormalized:function(e){for(var n=PS(e),r=n.harmonic,i=n.weight,o=n.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),d=0;d<l.length;d++){for(var f=0,h=l[d],p=0;p<l.length;p++)if(d!==p){var m=c.distance(h,l[p]);r?f+=1/m:f+=m}r||(f=1/f),u<f&&(u=f),s[h.id()]=f}return{closeness:function(v){return u==0?0:(Ie(v)?v=a.filter(v)[0].id():v=v.id(),s[v]/u)}}},closenessCentrality:function(e){var n=PS(e),r=n.root,i=n.weight,o=n.directed,a=n.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var d=l[c];if(!d.same(r)){var f=s.distanceTo(d);a?u+=1/f:u+=f}}return a?u:1/u}};Ns.cc=Ns.closenessCentrality;Ns.ccn=Ns.closenessCentralityNormalised=Ns.closenessCentralityNormalized;var HB=Dn({weight:null,directed:!1}),_0={betweennessCentrality:function(e){for(var n=HB(e),r=n.directed,i=n.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,d={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},f=0;f<s.length;f++){var h=s[f],p=h.id();r?u[p]=h.outgoers().nodes():u[p]=h.openNeighborhood().nodes(),d.set(p,0)}for(var m=function(){for(var b=s[g].id(),w=[],E={},C={},D={},I=new Yl(function(Q,W){return D[Q]-D[W]}),_=0;_<s.length;_++){var T=s[_].id();E[T]=[],C[T]=0,D[T]=1/0}for(C[b]=1,D[b]=0,I.push(b);!I.empty();){var x=I.pop();if(w.push(x),o)for(var M=0;M<u[x].length;M++){var A=u[x][M],R=a.getElementById(x),O=void 0;R.edgesTo(A).length>0?O=R.edgesTo(A)[0]:O=A.edgesTo(R)[0];var k=i(O);A=A.id(),D[A]>D[x]+k&&(D[A]=D[x]+k,I.nodes.indexOf(A)<0?I.push(A):I.updateItem(A),C[A]=0,E[A]=[]),D[A]==D[x]+k&&(C[A]=C[A]+C[x],E[A].push(x))}else for(var N=0;N<u[x].length;N++){var P=u[x][N].id();D[P]==1/0&&(I.push(P),D[P]=D[x]+1),D[P]==D[x]+1&&(C[P]=C[P]+C[x],E[P].push(x))}}for(var V={},U=0;U<s.length;U++)V[s[U].id()]=0;for(;w.length>0;){for(var F=w.pop(),B=0;B<E[F].length;B++){var G=E[F][B];V[G]=V[G]+C[G]/C[F]*(1+V[F])}F!=s[g].id()&&d.set(F,d.get(F)+V[F])}},g=0;g<s.length;g++)m();var v={betweenness:function(b){var w=a.collection(b).id();return d.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=a.collection(b).id();return d.get(w)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};_0.bc=_0.betweennessCentrality;var UB=Dn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),$B=function(e){return UB(e)},zB=function(e,n){for(var r=0,i=0;i<n.length;i++)r+=n[i](e);return r},qB=function(e,n,r){for(var i=0;i<n;i++)e[i*n+i]=r},lx=function(e,n){for(var r,i=0;i<n;i++){r=0;for(var o=0;o<n;o++)r+=e[o*n+i];for(var a=0;a<n;a++)e[a*n+i]=e[a*n+i]/r}},GB=function(e,n,r){for(var i=new Array(r*r),o=0;o<r;o++){for(var a=0;a<r;a++)i[o*r+a]=0;for(var s=0;s<r;s++)for(var u=0;u<r;u++)i[o*r+u]+=e[o*r+s]*n[s*r+u]}return i},WB=function(e,n,r){for(var i=e.slice(0),o=1;o<r;o++)e=GB(e,i,n);return e},ZB=function(e,n,r){for(var i=new Array(n*n),o=0;o<n*n;o++)i[o]=Math.pow(e[o],r);return lx(i,n),i},YB=function(e,n,r,i){for(var o=0;o<r;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(n[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},KB=function(e,n,r,i){for(var o=[],a=0;a<n;a++){for(var s=[],u=0;u<n;u++)Math.round(e[a*n+u]*1e3)/1e3>0&&s.push(r[u]);s.length!==0&&o.push(i.collection(s))}return o},QB=function(e,n){for(var r=0;r<e.length;r++)if(!n[r]||e[r].id()!==n[r].id())return!1;return!0},XB=function(e){for(var n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&QB(e[n],e[r])&&e.splice(r,1);return e},FS=function(e){for(var n=this.nodes(),r=this.edges(),i=this.cy(),o=$B(e),a={},s=0;s<n.length;s++)a[n[s].id()]=s;for(var u=n.length,l=u*u,c=new Array(l),d,f=0;f<l;f++)c[f]=0;for(var h=0;h<r.length;h++){var p=r[h],m=a[p.source().id()],g=a[p.target().id()],v=zB(p,o.attributes);c[m*u+g]+=v,c[g*u+m]+=v}qB(c,u,o.multFactor),lx(c,u);for(var y=!0,b=0;y&&b<o.maxIterations;)y=!1,d=WB(c,u,o.expandFactor),c=ZB(d,u,o.inflateFactor),YB(c,d,l,4)||(y=!0),b++;var w=KB(c,u,n,i);return w=XB(w),w},JB={markovClustering:FS,mcl:FS},eV=function(e){return e},cx=function(e,n){return Math.abs(n-e)},LS=function(e,n,r){return e+cx(n,r)},BS=function(e,n,r){return e+Math.pow(r-n,2)},tV=function(e){return Math.sqrt(e)},nV=function(e,n,r){return Math.max(e,cx(n,r))},wl=function(e,n,r,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:eV,s=i,u,l,c=0;c<e;c++)u=n(c),l=r(c),s=o(s,u,l);return a(s)},Ps={euclidean:function(e,n,r){return e>=2?wl(e,n,r,0,BS,tV):wl(e,n,r,0,LS)},squaredEuclidean:function(e,n,r){return wl(e,n,r,0,BS)},manhattan:function(e,n,r){return wl(e,n,r,0,LS)},max:function(e,n,r){return wl(e,n,r,-1/0,nV)}};Ps["squared-euclidean"]=Ps.squaredEuclidean;Ps.squaredeuclidean=Ps.squaredEuclidean;function _h(t,e,n,r,i,o){var a;return xt(t)?a=t:a=Ps[t]||Ps.euclidean,e===0&&xt(t)?a(i,o):a(e,n,r,i,o)}var rV=Dn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),eb=function(e){return rV(e)},ph=function(e,n,r,i,o){var a=o!=="kMedoids",s=a?function(d){return r[d]}:function(d){return i[d](r)},u=function(f){return i[f](n)},l=r,c=n;return _h(e,i.length,s,u,l,c)},hy=function(e,n,r){for(var i=r.length,o=new Array(i),a=new Array(i),s=new Array(n),u=null,l=0;l<i;l++)o[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var c=0;c<n;c++){u=[];for(var d=0;d<i;d++)u[d]=Math.random()*(a[d]-o[d])+o[d];s[c]=u}return s},dx=function(e,n,r,i,o){for(var a=1/0,s=0,u=0;u<n.length;u++){var l=ph(r,e,n[u],i,o);l<a&&(a=l,s=u)}return s},fx=function(e,n,r){for(var i=[],o=null,a=0;a<n.length;a++)o=n[a],r[o.id()]===e&&i.push(o);return i},iV=function(e,n,r){return Math.abs(n-e)<=r},oV=function(e,n,r){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-n[i][o]);if(a>r)return!1}return!0},aV=function(e,n,r){for(var i=0;i<r;i++)if(e===n[i])return!0;return!1},VS=function(e,n){var r=new Array(n);if(e.length<50)for(var i=0;i<n;i++){for(var o=e[Math.floor(Math.random()*e.length)];aV(o,r,i);)o=e[Math.floor(Math.random()*e.length)];r[i]=o}else for(var a=0;a<n;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},jS=function(e,n,r){for(var i=0,o=0;o<n.length;o++)i+=ph("manhattan",n[o],e,r,"kMedoids");return i},sV=function(e){var n=this.cy(),r=this.nodes(),i=null,o=eb(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=hy(r,o.k,o.attributes)):en(o.testCentroids)==="object"?u=o.testCentroids:u=hy(r,o.k,o.attributes):u=hy(r,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var d=0;d<r.length;d++)i=r[d],s[i.id()]=dx(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var f=0;f<o.k;f++){var h=fx(f,r,s);if(h.length!==0){for(var p=o.attributes.length,m=u[f],g=new Array(p),v=new Array(p),y=0;y<p;y++){v[y]=0;for(var b=0;b<h.length;b++)i=h[b],v[y]+=o.attributes[y](i);g[y]=v[y]/h.length,iV(g[y],m[y],o.sensitivityThreshold)||(l=!0)}u[f]=g,a[f]=n.collection(h)}}c++}return a},uV=function(e){var n=this.cy(),r=this.nodes(),i=null,o=eb(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(en(o.testCentroids)==="object"?s=o.testCentroids:s=VS(r,o.k)):s=VS(r,o.k);for(var d=!0,f=0;d&&f<o.maxIterations;){for(var h=0;h<r.length;h++)i=r[h],u[i.id()]=dx(i,s,o.distance,o.attributes,"kMedoids");d=!1;for(var p=0;p<s.length;p++){var m=fx(p,r,u);if(m.length!==0){c[p]=jS(s[p],m,o.attributes);for(var g=0;g<m.length;g++)l=jS(m[g],m,o.attributes),l<c[p]&&(c[p]=l,s[p]=m[g],d=!0);a[p]=n.collection(m)}}f++}return a},lV=function(e,n,r,i,o){for(var a,s,u=0;u<n.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(r[u][l],o.m);for(var c=0;c<e.length;c++)for(var d=0;d<o.attributes.length;d++){a=0,s=0;for(var f=0;f<n.length;f++)a+=i[f][c]*o.attributes[d](n[f]),s+=i[f][c];e[c][d]=a/s}},cV=function(e,n,r,i,o){for(var a=0;a<e.length;a++)n[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),d=0;d<r.length;d++)for(var f=0;f<i.length;f++){s=0;for(var h=0;h<r.length;h++)u=ph(o.distance,i[f],r[d],o.attributes,"cmeans"),l=ph(o.distance,i[f],r[h],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[f][d]=1/s}},dV=function(e,n,r,i){for(var o=new Array(r.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<n.length;l++){s=-1/0,u=-1;for(var c=0;c<n[0].length;c++)n[l][c]>s&&(s=n[l][c],u=c);o[u].push(e[l])}for(var d=0;d<o.length;d++)o[d]=i.collection(o[d]);return o},HS=function(e){var n=this.cy(),r=this.nodes(),i=eb(e),o,a,s,u,l;u=new Array(r.length);for(var c=0;c<r.length;c++)u[c]=new Array(i.k);s=new Array(r.length);for(var d=0;d<r.length;d++)s[d]=new Array(i.k);for(var f=0;f<r.length;f++){for(var h=0,p=0;p<i.k;p++)s[f][p]=Math.random(),h+=s[f][p];for(var m=0;m<i.k;m++)s[f][m]=s[f][m]/h}a=new Array(i.k);for(var g=0;g<i.k;g++)a[g]=new Array(i.attributes.length);l=new Array(r.length);for(var v=0;v<r.length;v++)l[v]=new Array(i.k);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,lV(a,r,s,l,i),cV(s,u,a,r,i),oV(s,u,i.sensitivityThreshold)||(y=!0),b++;return o=dV(r,s,i,n),{clusters:o,degreeOfMembership:s}},fV={kMeans:sV,kMedoids:uV,fuzzyCMeans:HS,fcm:HS},hV=Dn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),pV={single:"min",complete:"max"},gV=function(e){var n=hV(e),r=pV[n.linkage];return r!=null&&(n.linkage=r),n},US=function(e,n,r,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(_,T){return _h(o.distance,l.length,function(x){return l[x](_)},function(x){return l[x](T)},_,T)},d=0;d<e.length;d++){var f=e[d].key,h=r[f][i[f]];h<s&&(a=f,s=h)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var p=n[a],m=n[i[a]],g;o.mode==="dendrogram"?g={left:p,right:m,key:p.key}:g={value:p.value.concat(m.value),key:p.key},e[p.index]=g,e.splice(m.index,1),n[p.key]=g;for(var v=0;v<e.length;v++){var y=e[v];p.key===y.key?u=1/0:o.linkage==="min"?(u=r[p.key][y.key],r[p.key][y.key]>r[m.key][y.key]&&(u=r[m.key][y.key])):o.linkage==="max"?(u=r[p.key][y.key],r[p.key][y.key]<r[m.key][y.key]&&(u=r[m.key][y.key])):o.linkage==="mean"?u=(r[p.key][y.key]*p.size+r[m.key][y.key]*m.size)/(p.size+m.size):o.mode==="dendrogram"?u=c(y.value,p.value):u=c(y.value[0],p.value[0]),r[p.key][y.key]=r[y.key][p.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(i[w]===p.key||i[w]===m.key){for(var E=w,C=0;C<e.length;C++){var D=e[C].key;r[w][D]<r[w][E]&&(E=D)}i[w]=E}e[b].index=b}return p.key=m.key=p.index=m.index=null,!0},xs=function(e,n,r){e&&(e.value?n.push(e.value):(e.left&&xs(e.left,n),e.right&&xs(e.right,n)))},T0=function(e,n){if(!e)return"";if(e.left&&e.right){var r=T0(e.left,n),i=T0(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},x0=function(e,n,r){if(!e)return[];var i=[],o=[],a=[];return n===0?(e.left&&xs(e.left,i),e.right&&xs(e.right,o),a=i.concat(o),[r.collection(a)]):n===1?e.value?[r.collection(e.value)]:(e.left&&xs(e.left,i),e.right&&xs(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=x0(e.left,n-1,r)),e.right&&(o=x0(e.right,n-1,r)),i.concat(o))},$S=function(e){for(var n=this.cy(),r=this.nodes(),i=gV(e),o=i.attributes,a=function(b,w){return _h(i.distance,o.length,function(E){return o[E](b)},function(E){return o[E](w)},b,w)},s=[],u=[],l=[],c=[],d=0;d<r.length;d++){var f={value:i.mode==="dendrogram"?r[d]:[r[d]],key:d,index:d};s[d]=f,c[d]=f,u[d]=[],l[d]=0}for(var h=0;h<s.length;h++)for(var p=0;p<=h;p++){var m=void 0;i.mode==="dendrogram"?m=h===p?1/0:a(s[h].value,s[p].value):m=h===p?1/0:a(s[h].value[0],s[p].value[0]),u[h][p]=m,u[p][h]=m,m<u[h][l[h]]&&(l[h]=p)}for(var g=US(s,c,u,l,i);g;)g=US(s,c,u,l,i);var v;return i.mode==="dendrogram"?(v=x0(s[0],i.dendrogramDepth,n),i.addDendrogram&&T0(s[0],n)):(v=new Array(s.length),s.forEach(function(y,b){y.key=y.index=null,v[b]=n.collection(y.value)})),v},vV={hierarchicalClustering:$S,hca:$S},mV=Dn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),yV=function(e){var n=e.damping,r=e.preference;.5<=n&&n<1||_t("Damping must range on [0.5, 1).  Got: ".concat(n));var i=["median","mean","min","max"];return i.some(function(o){return o===r})||se(r)||_t("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(r)),mV(e)},bV=function(e,n,r,i){var o=function(s,u){return i[u](s)};return-_h(e,i.length,function(a){return o(n,a)},function(a){return o(r,a)},n,r)},wV=function(e,n){var r=null;return n==="median"?r=yB(e):n==="mean"?r=mB(e):n==="min"?r=gB(e):n==="max"?r=vB(e):r=n,r},DV=function(e,n,r){for(var i=[],o=0;o<e;o++)n[o*e+o]+r[o*e+o]>0&&i.push(o);return i},zS=function(e,n,r){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<r.length;u++){var l=r[u];n[o*e+l]>s&&(a=l,s=n[o*e+l])}a>0&&i.push(a)}for(var c=0;c<r.length;c++)i[r[c]]=r[c];return i},EV=function(e,n,r){for(var i=zS(e,n,r),o=0;o<r.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===r[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var d=0,f=0;f<a.length;f++)d+=n[a[f]*e+a[c]];d>l&&(u=c,l=d)}r[o]=a[u]}return i=zS(e,n,r),i},qS=function(e){for(var n=this.cy(),r=this.nodes(),i=yV(e),o={},a=0;a<r.length;a++)o[r[a].id()]=a;var s,u,l,c,d,f;s=r.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var p=0;p<s;p++)for(var m=0;m<s;m++)p!==m&&(l[p*s+m]=bV(i.distance,r[p],r[m],i.attributes));c=wV(l,i.preference);for(var g=0;g<s;g++)l[g*s+g]=c;d=new Array(u);for(var v=0;v<u;v++)d[v]=0;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;for(var b=new Array(s),w=new Array(s),E=new Array(s),C=0;C<s;C++)b[C]=0,w[C]=0,E[C]=0;for(var D=new Array(s*i.minIterations),I=0;I<D.length;I++)D[I]=0;var _;for(_=0;_<i.maxIterations;_++){for(var T=0;T<s;T++){for(var x=-1/0,M=-1/0,A=-1,R=0,O=0;O<s;O++)b[O]=d[T*s+O],R=f[T*s+O]+l[T*s+O],R>=x?(M=x,x=R,A=O):R>M&&(M=R);for(var k=0;k<s;k++)d[T*s+k]=(1-i.damping)*(l[T*s+k]-x)+i.damping*b[k];d[T*s+A]=(1-i.damping)*(l[T*s+A]-M)+i.damping*b[A]}for(var N=0;N<s;N++){for(var P=0,V=0;V<s;V++)b[V]=f[V*s+N],w[V]=Math.max(0,d[V*s+N]),P+=w[V];P-=w[N],w[N]=d[N*s+N],P+=w[N];for(var U=0;U<s;U++)f[U*s+N]=(1-i.damping)*Math.min(0,P-w[U])+i.damping*b[U];f[N*s+N]=(1-i.damping)*(P-w[N])+i.damping*b[N]}for(var F=0,B=0;B<s;B++){var G=f[B*s+B]+d[B*s+B]>0?1:0;D[_%i.minIterations*s+B]=G,F+=G}if(F>0&&(_>=i.minIterations-1||_==i.maxIterations-1)){for(var Q=0,W=0;W<s;W++){E[W]=0;for(var J=0;J<i.minIterations;J++)E[W]+=D[J*s+W];(E[W]===0||E[W]===i.minIterations)&&Q++}if(Q===s)break}}for(var ne=DV(s,d,f),le=EV(s,l,ne),X={},L=0;L<ne.length;L++)X[ne[L]]=[];for(var j=0;j<r.length;j++){var $=o[r[j].id()],Y=le[$];Y!=null&&X[Y].push(r[j])}for(var ae=new Array(ne.length),we=0;we<ne.length;we++)ae[we]=n.collection(X[ne[we]]);return ae},CV={affinityPropagation:qS,ap:qS},IV=Dn({root:void 0,directed:!1}),SV={hierholzer:function(e){if(!tt(e)){var n=arguments;e={root:n[0],directed:n[1]}}var r=IV(e),i=r.root,o=r.directed,a=this,s=!1,u,l,c;i&&(c=Ie(i)?this.filter(i)[0].id():i[0].id());var d={},f={};o?a.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.indegree(!0),E=y.outdegree(!0),C=w-E,D=E-w;C==1?u?s=!0:u=b:D==1?l?s=!0:l=b:(D>1||C>1)&&(s=!0),d[b]=[],y.outgoers().forEach(function(I){I.isEdge()&&d[b].push(I.id())})}else f[b]=[void 0,y.target().id()]}):a.forEach(function(y){var b=y.id();if(y.isNode()){var w=y.degree(!0);w%2&&(u?l?s=!0:l=b:u=b),d[b]=[],y.connectedEdges().forEach(function(E){return d[b].push(E.id())})}else f[b]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(o){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=a[0].id());var p=function(b){for(var w=b,E=[b],C,D,I;d[w].length;)C=d[w].shift(),D=f[C][0],I=f[C][1],w!=I?(d[I]=d[I].filter(function(_){return _!=C}),w=I):!o&&w!=D&&(d[D]=d[D].filter(function(_){return _!=C}),w=D),E.unshift(C),E.unshift(w);return E},m=[],g=[];for(g=p(c);g.length!=1;)d[g[0]].length==0?(m.unshift(a.getElementById(g.shift())),m.unshift(a.getElementById(g.shift()))):g=p(g.shift()).concat(g);m.unshift(a.getElementById(g.shift()));for(var v in d)if(d[v].length)return h;return h.found=!0,h.trail=this.spawn(m,!0),h}},Uf=function(){var e=this,n={},r=0,i=0,o=[],a=[],s={},u=function(f,h){for(var p=a.length-1,m=[],g=e.spawn();a[p].x!=f||a[p].y!=h;)m.push(a.pop().edge),p--;m.push(a.pop().edge),m.forEach(function(v){var y=v.connectedNodes().intersection(e);g.merge(v),y.forEach(function(b){var w=b.id(),E=b.connectedEdges().intersection(e);g.merge(b),n[w].cutVertex?g.merge(E.filter(function(C){return C.isLoop()})):g.merge(E)})}),o.push(g)},l=function(f,h,p){f===p&&(i+=1),n[h]={id:r,low:r++,cutVertex:!1};var m=e.getElementById(h).connectedEdges().intersection(e);if(m.size()===0)o.push(e.spawn(e.getElementById(h)));else{var g,v,y,b;m.forEach(function(w){g=w.source().id(),v=w.target().id(),y=g===h?v:g,y!==p&&(b=w.id(),s[b]||(s[b]=!0,a.push({x:h,y,edge:w})),y in n?n[h].low=Math.min(n[h].low,n[y].id):(l(f,y,h),n[h].low=Math.min(n[h].low,n[y].low),n[h].id<=n[y].low&&(n[h].cutVertex=!0,u(h,y))))})}};e.forEach(function(d){if(d.isNode()){var f=d.id();f in n||(i=0,l(f,f),n[f].cutVertex=i>1)}});var c=Object.keys(n).filter(function(d){return n[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:o}},_V={hopcroftTarjanBiconnected:Uf,htbc:Uf,htb:Uf,hopcroftTarjanBiconnectedComponents:Uf},$f=function(){var e=this,n={},r=0,i=[],o=[],a=e.spawn(e),s=function(l){o.push(l),n[l]={index:r,low:r++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(m){var g=m.target().id();g!==l&&(g in n||s(g),n[g].explored||(n[l].low=Math.min(n[l].low,n[g].low)))}),n[l].index===n[l].low){for(var d=e.spawn();;){var f=o.pop();if(d.merge(e.getElementById(f)),n[f].low=n[l].index,n[f].explored=!0,f===l)break}var h=d.edgesWith(d),p=d.merge(h);i.push(p),a=a.difference(p)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in n||s(l)}}),{cut:a,components:i}},TV={tarjanStronglyConnected:$f,tsc:$f,tscc:$f,tarjanStronglyConnectedComponents:$f},hx={};[Pl,rB,iB,aB,uB,cB,hB,jB,Rs,Ns,_0,JB,fV,vV,CV,SV,_V,TV].forEach(function(t){Me(hx,t)});var px=0,gx=1,vx=2,jr=function(e){if(!(this instanceof jr))return new jr(e);this.id="Thenable/1.0.7",this.state=px,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};jr.prototype={fulfill:function(e){return GS(this,gx,"fulfillValue",e)},reject:function(e){return GS(this,vx,"rejectReason",e)},then:function(e,n){var r=this,i=new jr;return r.onFulfilled.push(ZS(e,i,"fulfill")),r.onRejected.push(ZS(n,i,"reject")),mx(r),i.proxy}};var GS=function(e,n,r,i){return e.state===px&&(e.state=n,e[r]=i,mx(e)),e},mx=function(e){e.state===gx?WS(e,"onFulfilled",e.fulfillValue):e.state===vx&&WS(e,"onRejected",e.rejectReason)},WS=function(e,n,r){if(e[n].length!==0){var i=e[n];e[n]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](r)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},ZS=function(e,n,r){return function(i){if(typeof e!="function")n[r].call(n,i);else{var o;try{o=e(i)}catch(a){n.reject(a);return}yx(n,o)}}},yx=function(e,n){if(e===n||e.proxy===n){e.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(en(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(o){e.reject(o);return}if(typeof r=="function"){var i=!1;try{r.call(n,function(o){i||(i=!0,o===n?e.reject(new TypeError("circular thenable chain")):yx(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(n)};jr.all=function(t){return new jr(function(e,n){for(var r=new Array(t.length),i=0,o=function(u,l){r[u]=l,i++,i===t.length&&e(r)},a=0;a<t.length;a++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(d){o(s,d)},function(d){n(d)});else{var c=u;o(s,c)}})(a)})};jr.resolve=function(t){return new jr(function(e,n){e(t)})};jr.reject=function(t){return new jr(function(e,n){n(t)})};var Bs=typeof Promise<"u"?Promise:jr,M0=function(e,n,r){var i=z0(e),o=!i,a=this._private=Me({duration:1e3},n,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&xt(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},Ta=M0.prototype;Me(Ta,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n,r=e.target._private.animation;e.queue?n=r.queue:n=r.current,n.push(this),ur(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return e===void 0?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,r=n.playing;return e===void 0?n.progress:(r&&this.pause(),n.progress=e,n.started=!1,r&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(l,c){var d=e[l];d!=null&&(e[l]=e[c],e[c]=d)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return n&&this.play(),this},promise:function(e){var n=this._private,r;switch(e){case"frame":r=n.frames;break;default:case"complete":case"completed":r=n.completes}return new Bs(function(i,o){r.push(function(){i()})})}});Ta.complete=Ta.completed;Ta.run=Ta.play;Ta.running=Ta.playing;var xV={animated:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:n,duration:n,complete:r}):this}},delayAnimation:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:n,duration:n,complete:r}):this}},animation:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();n=Me({},n,r);var d=Object.keys(n).length===0;if(d)return new M0(a[0],n);switch(n.duration===void 0&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200;break}if(l&&(n.style=c.getPropsList(n.style||n.css),n.css=void 0),l&&n.renderedPosition!=null){var f=n.renderedPosition,h=s.pan(),p=s.zoom();n.position=rx(f,p,h)}if(u&&n.panBy!=null){var m=n.panBy,g=s.pan();n.pan={x:g.x+m.x,y:g.y+m.y}}var v=n.center||n.centre;if(u&&v!=null){var y=s.getCenterPan(v.eles,n.zoom);y!=null&&(n.pan=y)}if(u&&n.fit!=null){var b=n.fit,w=s.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(n.pan=w.pan,n.zoom=w.zoom)}if(u&&tt(n.zoom)){var E=s.getZoomedViewport(n.zoom);E!=null?(E.zoomed&&(n.zoom=E.zoom),E.panned&&(n.pan=E.pan)):n.zoom=null}return new M0(a[0],n)}},animate:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;r&&(n=Me({},n,r));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(n.queue===void 0||n.queue),d=l.animation(n,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,d=c.animation.current,f=0;f<d.length;f++){var h=d[f],p=h._private;r&&(p.duration=0)}n&&(c.animation.queue=[]),r||(c.animation.current=[])}return s.notify("draw"),this}}},py,YS;function Th(){if(YS)return py;YS=1;var t=Array.isArray;return py=t,py}var gy,KS;function MV(){if(KS)return gy;KS=1;var t=Th(),e=Wl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(t(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||e(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return gy=i,gy}var vy,QS;function AV(){if(QS)return vy;QS=1;var t=ZT(),e=Gl(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!e(s))return!1;var u=t(s);return u==r||u==i||u==n||u==o}return vy=a,vy}var my,XS;function RV(){if(XS)return my;XS=1;var t=Ch(),e=t["__core-js_shared__"];return my=e,my}var yy,JS;function NV(){if(JS)return yy;JS=1;var t=RV(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return yy=n,yy}var by,e_;function OV(){if(e_)return by;e_=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return by=n,by}var wy,t_;function kV(){if(t_)return wy;t_=1;var t=AV(),e=NV(),n=Gl(),r=OV(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||e(f))return!1;var h=t(f)?c:o;return h.test(r(f))}return wy=d,wy}var Dy,n_;function PV(){if(n_)return Dy;n_=1;function t(e,n){return e?.[n]}return Dy=t,Dy}var Ey,r_;function tb(){if(r_)return Ey;r_=1;var t=kV(),e=PV();function n(r,i){var o=e(r,i);return t(o)?o:void 0}return Ey=n,Ey}var Cy,i_;function xh(){if(i_)return Cy;i_=1;var t=tb(),e=t(Object,"create");return Cy=e,Cy}var Iy,o_;function FV(){if(o_)return Iy;o_=1;var t=xh();function e(){this.__data__=t?t(null):{},this.size=0}return Iy=e,Iy}var Sy,a_;function LV(){if(a_)return Sy;a_=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Sy=t,Sy}var _y,s_;function BV(){if(s_)return _y;s_=1;var t=xh(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;if(t){var s=a[o];return s===e?void 0:s}return r.call(a,o)?a[o]:void 0}return _y=i,_y}var Ty,u_;function VV(){if(u_)return Ty;u_=1;var t=xh(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=this.__data__;return t?o[i]!==void 0:n.call(o,i)}return Ty=r,Ty}var xy,l_;function jV(){if(l_)return xy;l_=1;var t=xh(),e="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=t&&i===void 0?e:i,this}return xy=n,xy}var My,c_;function HV(){if(c_)return My;c_=1;var t=FV(),e=LV(),n=BV(),r=VV(),i=jV();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,My=o,My}var Ay,d_;function UV(){if(d_)return Ay;d_=1;function t(){this.__data__=[],this.size=0}return Ay=t,Ay}var Ry,f_;function bx(){if(f_)return Ry;f_=1;function t(e,n){return e===n||e!==e&&n!==n}return Ry=t,Ry}var Ny,h_;function Mh(){if(h_)return Ny;h_=1;var t=bx();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Ny=e,Ny}var Oy,p_;function $V(){if(p_)return Oy;p_=1;var t=Mh(),e=Array.prototype,n=e.splice;function r(i){var o=this.__data__,a=t(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():n.call(o,a,1),--this.size,!0}return Oy=r,Oy}var ky,g_;function zV(){if(g_)return ky;g_=1;var t=Mh();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return ky=e,ky}var Py,v_;function qV(){if(v_)return Py;v_=1;var t=Mh();function e(n){return t(this.__data__,n)>-1}return Py=e,Py}var Fy,m_;function GV(){if(m_)return Fy;m_=1;var t=Mh();function e(n,r){var i=this.__data__,o=t(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return Fy=e,Fy}var Ly,y_;function WV(){if(y_)return Ly;y_=1;var t=UV(),e=$V(),n=zV(),r=qV(),i=GV();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Ly=o,Ly}var By,b_;function ZV(){if(b_)return By;b_=1;var t=tb(),e=Ch(),n=t(e,"Map");return By=n,By}var Vy,w_;function YV(){if(w_)return Vy;w_=1;var t=HV(),e=WV(),n=ZV();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return Vy=r,Vy}var jy,D_;function KV(){if(D_)return jy;D_=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return jy=t,jy}var Hy,E_;function Ah(){if(E_)return Hy;E_=1;var t=KV();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Hy=e,Hy}var Uy,C_;function QV(){if(C_)return Uy;C_=1;var t=Ah();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return Uy=e,Uy}var $y,I_;function XV(){if(I_)return $y;I_=1;var t=Ah();function e(n){return t(this,n).get(n)}return $y=e,$y}var zy,S_;function JV(){if(S_)return zy;S_=1;var t=Ah();function e(n){return t(this,n).has(n)}return zy=e,zy}var qy,__;function ej(){if(__)return qy;__=1;var t=Ah();function e(n,r){var i=t(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return qy=e,qy}var Gy,T_;function tj(){if(T_)return Gy;T_=1;var t=YV(),e=QV(),n=XV(),r=JV(),i=ej();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=t,o.prototype.delete=e,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Gy=o,Gy}var Wy,x_;function nj(){if(x_)return Wy;x_=1;var t=tj(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||t),o}return n.Cache=t,Wy=n,Wy}var Zy,M_;function rj(){if(M_)return Zy;M_=1;var t=nj(),e=500;function n(r){var i=t(r,function(a){return o.size===e&&o.clear(),a}),o=i.cache;return i}return Zy=n,Zy}var Yy,A_;function wx(){if(A_)return Yy;A_=1;var t=rj(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(e,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return Yy=r,Yy}var Ky,R_;function Dx(){if(R_)return Ky;R_=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return Ky=t,Ky}var Qy,N_;function ij(){if(N_)return Qy;N_=1;var t=G0(),e=Dx(),n=Th(),r=Wl(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return e(s,a)+"";if(r(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return Qy=a,Qy}var Xy,O_;function Ex(){if(O_)return Xy;O_=1;var t=ij();function e(n){return n==null?"":t(n)}return Xy=e,Xy}var Jy,k_;function Cx(){if(k_)return Jy;k_=1;var t=Th(),e=MV(),n=wx(),r=Ex();function i(o,a){return t(o)?o:e(o,a)?[o]:n(r(o))}return Jy=i,Jy}var e0,P_;function nb(){if(P_)return e0;P_=1;var t=Wl();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return e0=e,e0}var t0,F_;function oj(){if(F_)return t0;F_=1;var t=Cx(),e=nb();function n(r,i){i=t(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[e(i[o++])];return o&&o==a?r:void 0}return t0=n,t0}var n0,L_;function aj(){if(L_)return n0;L_=1;var t=oj();function e(n,r,i){var o=n==null?void 0:t(n,r);return o===void 0?i:o}return n0=e,n0}var sj=aj(),uj=ql(sj),r0,B_;function lj(){if(B_)return r0;B_=1;var t=tb(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return r0=e,r0}var i0,V_;function cj(){if(V_)return i0;V_=1;var t=lj();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return i0=e,i0}var o0,j_;function dj(){if(j_)return o0;j_=1;var t=cj(),e=bx(),n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s){var u=o[a];(!(r.call(o,a)&&e(u,s))||s===void 0&&!(a in o))&&t(o,a,s)}return o0=i,o0}var a0,H_;function fj(){if(H_)return a0;H_=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??t,!!i&&(o=="number"||o!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return a0=n,a0}var s0,U_;function hj(){if(U_)return s0;U_=1;var t=dj(),e=Cx(),n=fj(),r=Gl(),i=nb();function o(a,s,u,l){if(!r(a))return a;s=e(s,a);for(var c=-1,d=s.length,f=d-1,h=a;h!=null&&++c<d;){var p=i(s[c]),m=u;if(p==="__proto__"||p==="constructor"||p==="prototype")return a;if(c!=f){var g=h[p];m=l?l(g,p,h):void 0,m===void 0&&(m=r(g)?g:n(s[c+1])?[]:{})}t(h,p,m),h=h[p]}return a}return s0=o,s0}var u0,$_;function pj(){if($_)return u0;$_=1;var t=hj();function e(n,r,i){return n==null?n:t(n,r,i)}return u0=e,u0}var gj=pj(),vj=ql(gj),l0,z_;function mj(){if(z_)return l0;z_=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return l0=t,l0}var c0,q_;function yj(){if(q_)return c0;q_=1;var t=Dx(),e=mj(),n=Th(),r=Wl(),i=wx(),o=nb(),a=Ex();function s(u){return n(u)?t(u,o):r(u)?[u]:e(i(a(u)))}return c0=s,c0}var bj=yj(),wj=ql(bj),Dj={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=Me({},n,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Ie(i)){var d=i.indexOf(".")!==-1,f=d&&wj(i);if(a.allowGetting&&o===void 0){var h;return c&&(a.beforeGet(c),f&&c._private[a.field][i]===void 0?h=uj(c._private[a.field],f):h=c._private[a.field][i]),h}else if(a.allowSetting&&o!==void 0){var p=!a.immutableKeys[i];if(p){var m=BT({},i,o);a.beforeSet(s,m);for(var g=0,v=l.length;g<v;g++){var y=l[g];a.canSet(y)&&(f&&c._private[a.field][i]===void 0?vj(y._private[a.field],f,o):y._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&tt(i)){var b=i,w,E,C=Object.keys(b);a.beforeSet(s,b);for(var D=0;D<C.length;D++){w=C[D],E=b[w];var I=!a.immutableKeys[w];if(I)for(var _=0;_<l.length;_++){var T=l[_];a.canSet(T)&&(T._private[a.field][w]=E)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&xt(i)){var x=i;s.on(a.bindingEvent,x)}else if(a.allowGetting&&i===void 0){var M;return c&&(a.beforeGet(c),M=c._private[a.field]),M}return s}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Me({},n,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(Ie(i)){for(var l=i.split(/\s+/),c=l.length,d=0;d<c;d++){var f=l[d];if(!go(f)){var h=!o.immutableKeys[f];if(h)for(var p=0,m=u.length;p<m;p++)u[p]._private[o.field][f]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var g=0,v=u.length;g<v;g++)for(var y=u[g]._private[o.field],b=Object.keys(y),w=0;w<b.length;w++){var E=b[w],C=!o.immutableKeys[E];C&&(y[E]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},Ej={eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(r,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new Bs(function(s,u){var l=function(h){o.off.apply(o,d),s(h)},c=a.concat([l]),d=c.concat([]);o.on.apply(o,c)})}}},dt={};[xV,Dj,Ej].forEach(function(t){Me(dt,t)});var Cj={animate:dt.animate(),animation:dt.animation(),animated:dt.animated(),clearQueue:dt.clearQueue(),delay:dt.delay(),delayAnimation:dt.delayAnimation(),stop:dt.stop()},eh={classes:function(e){var n=this;if(e===void 0){var r=[];return n[0]._private.classes.forEach(function(p){return r.push(p)}),r}else bt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new Ls(e),a=0;a<n.length;a++){for(var s=n[a],u=s._private,l=u.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return n!=null&&n._private.classes.has(e)},toggleClass:function(e,n){bt(e)||(e=e.match(/\S+/g)||[]);for(var r=this,i=n===void 0,o=[],a=0,s=r.length;a<s;a++)for(var u=r[a],l=u._private.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f),p=!1;n||i&&!h?(l.add(f),p=!0):(!n||i&&h)&&(l.delete(f),p=!0),!c&&p&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var r=this;if(n==null)n=250;else if(n===0)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},n),r}};eh.className=eh.classNames=eh.classes;var et={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Jt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};et.variable="(?:[\\w-.]|(?:\\\\"+et.metaChar+"))+";et.className="(?:[\\w-]|(?:\\\\"+et.metaChar+"))+";et.value=et.string+"|"+et.number;et.id=et.variable;(function(){var t,e,n;for(t=et.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],et.comparatorOp+="|@"+e;for(t=et.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],!(e.indexOf("!")>=0)&&e!=="="&&(et.comparatorOp+="|\\!"+e)})();var yt=function(){return{checks:[]}},he={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},A0=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return D2(t.selector,e.selector)}),Ij=(function(){for(var t={},e,n=0;n<A0.length;n++)e=A0[n],t[e.selector]=e.matches;return t})(),Sj=function(e,n){return Ij[e](n)},_j="("+A0.map(function(t){return t.selector}).join("|")+")",bs=function(e){return e.replace(new RegExp("\\\\("+et.metaChar+")","g"),function(n,r){return r})},so=function(e,n,r){e[e.length-1]=r},R0=[{name:"group",query:!0,regex:"("+et.group+")",populate:function(e,n,r){var i=Zt(r,1),o=i[0];n.checks.push({type:he.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:_j,populate:function(e,n,r){var i=Zt(r,1),o=i[0];n.checks.push({type:he.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+et.id+")",populate:function(e,n,r){var i=Zt(r,1),o=i[0];n.checks.push({type:he.ID,value:bs(o)})}},{name:"className",query:!0,regex:"\\.("+et.className+")",populate:function(e,n,r){var i=Zt(r,1),o=i[0];n.checks.push({type:he.CLASS,value:bs(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+et.variable+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,1),o=i[0];n.checks.push({type:he.DATA_EXIST,field:bs(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+et.variable+")\\s*("+et.comparatorOp+")\\s*("+et.value+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+et.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),n.checks.push({type:he.DATA_COMPARE,field:bs(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+et.boolOp+")\\s*("+et.variable+")\\s*\\]",populate:function(e,n,r){var i=Zt(r,2),o=i[0],a=i[1];n.checks.push({type:he.DATA_BOOL,field:bs(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+et.meta+")\\s*("+et.comparatorOp+")\\s*("+et.number+")\\s*\\]\\]",populate:function(e,n,r){var i=Zt(r,3),o=i[0],a=i[1],s=i[2];n.checks.push({type:he.META_COMPARE,field:bs(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:et.separator,populate:function(e,n){var r=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];r!=null&&(a.subject=r,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=yt();return s}},{name:"directedEdge",separator:!0,regex:et.directedEdge,populate:function(e,n){if(e.currentSubject==null){var r=yt(),i=n,o=yt();return r.checks.push({type:he.DIRECTED_EDGE,source:i,target:o}),so(e,n,r),e.edgeCount++,o}else{var a=yt(),s=n,u=yt();return a.checks.push({type:he.NODE_SOURCE,source:s,target:u}),so(e,n,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:et.undirectedEdge,populate:function(e,n){if(e.currentSubject==null){var r=yt(),i=n,o=yt();return r.checks.push({type:he.UNDIRECTED_EDGE,nodes:[i,o]}),so(e,n,r),e.edgeCount++,o}else{var a=yt(),s=n,u=yt();return a.checks.push({type:he.NODE_NEIGHBOR,node:s,neighbor:u}),so(e,n,a),u}}},{name:"child",separator:!0,regex:et.child,populate:function(e,n){if(e.currentSubject==null){var r=yt(),i=yt(),o=e[e.length-1];return r.checks.push({type:he.CHILD,parent:o,child:i}),so(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=yt(),s=e[e.length-1],u=yt(),l=yt(),c=yt(),d=yt();return a.checks.push({type:he.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:he.TRUE}],d.checks.push({type:he.TRUE}),u.checks.push({type:he.PARENT,parent:d,child:c}),so(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=yt(),h=yt(),p=[{type:he.PARENT,parent:f,child:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:et.descendant,populate:function(e,n){if(e.currentSubject==null){var r=yt(),i=yt(),o=e[e.length-1];return r.checks.push({type:he.DESCENDANT,ancestor:o,descendant:i}),so(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=yt(),s=e[e.length-1],u=yt(),l=yt(),c=yt(),d=yt();return a.checks.push({type:he.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:he.TRUE}],d.checks.push({type:he.TRUE}),u.checks.push({type:he.ANCESTOR,ancestor:d,descendant:c}),so(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=yt(),h=yt(),p=[{type:he.ANCESTOR,ancestor:f,descendant:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:et.subject,populate:function(e,n){if(e.currentSubject!=null&&e.currentSubject!==n)return ft("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var r=e[e.length-1],i=r.checks[0],o=i==null?null:i.type;o===he.DIRECTED_EDGE?i.type=he.NODE_TARGET:o===he.UNDIRECTED_EDGE&&(i.type=he.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];R0.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Tj=function(e){for(var n,r,i,o=0;o<R0.length;o++){var a=R0[o],s=a.name,u=e.match(a.regexObj);if(u!=null){r=u,n=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:n,match:r,name:i,remaining:e}},xj=function(e){var n=e.match(/^\s+/);if(n){var r=n[0];e=e.substring(r.length)}return e},Mj=function(e){var n=this,r=n.inputText=e,i=n[0]=yt();for(n.length=1,r=xj(r);;){var o=Tj(r);if(o.expr==null)return ft("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(n,i,a);if(s===!1)return!1;if(s!=null&&(i=s),r=o.remaining,r.match(/^\s*$/))break}var u=n[n.length-1];n.currentSubject!=null&&(u.subject=n.currentSubject),u.edgeCount=n.edgeCount,u.compoundCount=n.compoundCount;for(var l=0;l<n.length;l++){var c=n[l];if(c.compoundCount>0&&c.edgeCount>0)return ft("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return ft("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&ft("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Aj=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},n=function(c){return Ie(c)?'"'+c+'"':e(c)},r=function(c){return" "+c+" "},i=function(c,d){var f=c.type,h=c.value;switch(f){case he.GROUP:{var p=e(h);return p.substring(0,p.length-1)}case he.DATA_COMPARE:{var m=c.field,g=c.operator;return"["+m+r(e(g))+n(h)+"]"}case he.DATA_BOOL:{var v=c.operator,y=c.field;return"["+e(v)+y+"]"}case he.DATA_EXIST:{var b=c.field;return"["+b+"]"}case he.META_COMPARE:{var w=c.operator,E=c.field;return"[["+E+r(e(w))+n(h)+"]]"}case he.STATE:return h;case he.ID:return"#"+h;case he.CLASS:return"."+h;case he.PARENT:case he.CHILD:return o(c.parent,d)+r(">")+o(c.child,d);case he.ANCESTOR:case he.DESCENDANT:return o(c.ancestor,d)+" "+o(c.descendant,d);case he.COMPOUND_SPLIT:{var C=o(c.left,d),D=o(c.subject,d),I=o(c.right,d);return C+(C.length>0?" ":"")+D+I}case he.TRUE:return""}},o=function(c,d){return c.checks.reduce(function(f,h,p){return f+(d===c&&p===0?"$":"")+i(h,d)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},Rj={parse:Mj,toString:Aj},Ix=function(e,n,r){var i,o=Ie(e),a=se(e),s=Ie(r),u,l,c=!1,d=!1,f=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),d=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+r),c&&(e=u=u.toLowerCase(),r=l=l.toLowerCase()),n){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===r;break;case">":f=!0,i=e>r;break;case">=":f=!0,i=e>=r;break;case"<":f=!0,i=e<r;break;case"<=":f=!0,i=e<=r;break;default:i=!1;break}return d&&(e!=null||!f)&&(i=!i),i},Nj=function(e,n){switch(n){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Oj=function(e){return e!==void 0},rb=function(e,n){return e.data(n)},kj=function(e,n){return e[n]()},Ft=[],It=function(e,n){return e.checks.every(function(r){return Ft[r.type](r,n)})};Ft[he.GROUP]=function(t,e){var n=t.value;return n==="*"||n===e.group()};Ft[he.STATE]=function(t,e){var n=t.value;return Sj(n,e)};Ft[he.ID]=function(t,e){var n=t.value;return e.id()===n};Ft[he.CLASS]=function(t,e){var n=t.value;return e.hasClass(n)};Ft[he.META_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Ix(kj(e,n),r,i)};Ft[he.DATA_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Ix(rb(e,n),r,i)};Ft[he.DATA_BOOL]=function(t,e){var n=t.field,r=t.operator;return Nj(rb(e,n),r)};Ft[he.DATA_EXIST]=function(t,e){var n=t.field;return t.operator,Oj(rb(e,n))};Ft[he.UNDIRECTED_EDGE]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return It(n,i)&&It(r,o)||It(r,i)&&It(n,o)};Ft[he.NODE_NEIGHBOR]=function(t,e){return It(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&It(t.neighbor,n)})};Ft[he.DIRECTED_EDGE]=function(t,e){return It(t.source,e.source())&&It(t.target,e.target())};Ft[he.NODE_SOURCE]=function(t,e){return It(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&It(t.target,n)})};Ft[he.NODE_TARGET]=function(t,e){return It(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&It(t.source,n)})};Ft[he.CHILD]=function(t,e){return It(t.child,e)&&It(t.parent,e.parent())};Ft[he.PARENT]=function(t,e){return It(t.parent,e)&&e.children().some(function(n){return It(t.child,n)})};Ft[he.DESCENDANT]=function(t,e){return It(t.descendant,e)&&e.ancestors().some(function(n){return It(t.ancestor,n)})};Ft[he.ANCESTOR]=function(t,e){return It(t.ancestor,e)&&e.descendants().some(function(n){return It(t.descendant,n)})};Ft[he.COMPOUND_SPLIT]=function(t,e){return It(t.subject,e)&&It(t.left,e)&&It(t.right,e)};Ft[he.TRUE]=function(){return!0};Ft[he.COLLECTION]=function(t,e){var n=t.value;return n.has(e)};Ft[he.FILTER]=function(t,e){var n=t.value;return n(e)};var Pj=function(e){var n=this;if(n.length===1&&n[0].checks.length===1&&n[0].checks[0].type===he.ID)return e.getElementById(n[0].checks[0].value).collection();var r=function(o){for(var a=0;a<n.length;a++){var s=n[a];if(It(s,o))return!0}return!1};return n.text()==null&&(r=function(){return!0}),e.filter(r)},Fj=function(e){for(var n=this,r=0;r<n.length;r++){var i=n[r];if(It(i,e))return!0}return!1},Lj={matches:Fj,filter:Pj},yo=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ie(e)&&e.match(/^\s*$/)||(ur(e)?this.addQuery({checks:[{type:he.COLLECTION,value:e.collection()}]}):xt(e)?this.addQuery({checks:[{type:he.FILTER,value:e}]}):Ie(e)?this.parse(e)||(this.invalid=!0):_t("A selector must be created from a string; found "))},bo=yo.prototype;[Rj,Lj].forEach(function(t){return Me(bo,t)});bo.text=function(){return this.inputText};bo.size=function(){return this.length};bo.eq=function(t){return this[t]};bo.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};bo.addQuery=function(t){this[this.length++]=t};bo.selector=bo.toString;var ho={allAre:function(e){var n=new yo(e);return this.every(function(r){return n.matches(r)})},is:function(e){var n=new yo(e);return this.some(function(r){return n.matches(r)})},some:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(i)return!0}return!1},every:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length,r=e.length;return n!==r?!1:n===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(r){return n.hasElementWithId(r.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(r){return n.hasElementWithId(r.id())})}};ho.allAreNeighbours=ho.allAreNeighbors;ho.has=ho.contains;ho.equal=ho.equals=ho.same;var Er=function(e,n){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":ur(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var d=l[0]._private,f=d.traversalCache=d.traversalCache||{},h=f[n]=f[n]||[],p=Sa(c),m=h[p];return m||(h[p]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},Fs={parent:function(e){var n=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&n.push(a)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];n.push(o)}r=r.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,r=0;r<this.length;r++){var i=this[r],o=i.parents();n=n||o,n=n.intersect(o)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:Er(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var n=[];function r(i){for(var o=0;o<i.length;o++){var a=i[o];n.push(a),a.children().nonempty()&&r(a.children())}}return r(this.children()),this.spawn(n,!0).filter(e)}};function ib(t,e,n,r){for(var i=[],o=new Ls,a=t.cy(),s=a.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];n?i.push(l):s&&r(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&r(i,o,c)}return t}function Sx(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}Fs.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ib(this,t,e,Sx)};function _x(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}Fs.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ib(this,t,e,_x)};function Bj(t,e,n){_x(t,e,n),Sx(t,e,n)}Fs.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ib(this,t,e,Bj)};Fs.ancestors=Fs.parents;var Bl,Tx;Bl=Tx={data:dt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:dt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:dt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:dt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:dt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:dt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Bl.attr=Bl.data;Bl.removeAttr=Bl.removeData;var Vj=Tx,Rh={};function d0(t){return function(e){var n=this;if(e===void 0&&(e=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}else return}}Me(Rh,{degree:d0(function(t,e){return e.source().same(e.target())?2:1}),indegree:d0(function(t,e){return e.target().same(t)?1:0}),outdegree:d0(function(t,e){return e.source().same(t)?1:0})});function ws(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);s!==void 0&&(r===void 0||e(s,r))&&(r=s)}return r}}Me(Rh,{minDegree:ws("degree",function(t,e){return t<e}),maxDegree:ws("degree",function(t,e){return t>e}),minIndegree:ws("indegree",function(t,e){return t<e}),maxIndegree:ws("indegree",function(t,e){return t>e}),minOutdegree:ws("outdegree",function(t,e){return t<e}),maxOutdegree:ws("outdegree",function(t,e){return t>e})});Me(Rh,{totalDegree:function(e){for(var n=0,r=this.nodes(),i=0;i<r.length;i++)n+=r[i].degree(e);return n}});var Vr,xx,Mx=function(e,n,r){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:n.x!=null?n.x-a.x:0,y:n.y!=null?n.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,r),o.dirtyBoundingBoxCache()}}},G_={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){Mx(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Vr=xx={position:dt.data(G_),silentPosition:dt.data(Me({},G_,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){Mx(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(tt(e))n?this.silentPosition(e):this.position(e);else if(xt(e)){var r=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=r(a,o))&&(n?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,r){var i;if(tt(e)?(i={x:se(e.x)?e.x:0,y:se(e.y)?e.y:0},r=n):Ie(e)&&se(n)&&(i={x:0,y:0},i[e]=n),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};r?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,n){return tt(e)?this.shift(e,!0):Ie(e)&&se(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var r=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=tt(e)?e:void 0,u=s!==void 0||n!==void 0&&Ie(e);if(r&&r.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];n!==void 0?c.position(e,(n-a[e])/o):s!==void 0&&c.position(rx(s,o,a))}else{var d=r.position();return s=Sh(d,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,n){var r=this[0],i=this.cy(),o=tt(e)?e:void 0,a=o!==void 0||n!==void 0&&Ie(e),s=i.hasCompoundNodes();if(r&&r.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,d=c&&c.length>0,f=d;d&&(c=c[0]);var h=f?c.position():{x:0,y:0};n!==void 0?l.position(e,n+h[e]):o!==void 0&&l.position({x:o.x+h.x,y:o.y+h.y})}else{var p=r.position(),m=s?r.parent():null,g=m&&m.length>0,v=g;g&&(m=m[0]);var y=v?m.position():{x:0,y:0};return o={x:p.x-y.x,y:p.y-y.y},e===void 0?o:o[e]}else if(!a)return;return this}};Vr.modelPosition=Vr.point=Vr.position;Vr.modelPositions=Vr.points=Vr.positions;Vr.renderedPoint=Vr.renderedPosition;Vr.relativePoint=Vr.relativePosition;var jj=xx,Os,Io;Os=Io={};Io.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};Io.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this)};Io.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},d=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),f=s.position;(d.w===0||d.h===0)&&(d={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},d.x1=f.x-d.w/2,d.x2=f.x+d.w/2,d.y1=f.y-d.h/2,d.y2=f.y+d.h/2);function h(_,T,x){var M=0,A=0,R=T+x;return _>0&&R>0&&(M=T/R*_,A=x/R*_),{biasDiff:M,biasComplementDiff:A}}function p(_,T,x,M){if(x.units==="%")switch(M){case"width":return _>0?x.pfValue*_:0;case"height":return T>0?x.pfValue*T:0;case"average":return _>0&&T>0?x.pfValue*(_+T)/2:0;case"min":return _>0&&T>0?_>T?x.pfValue*T:x.pfValue*_:0;case"max":return _>0&&T>0?_>T?x.pfValue*_:x.pfValue*T:0;default:return 0}else return x.units==="px"?x.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=h(c.width.val-d.w,m,g),w=b.biasDiff,E=b.biasComplementDiff,C=h(c.height.val-d.h,v,y),D=C.biasDiff,I=C.biasComplementDiff;s.autoPadding=p(d.w,d.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(d.w,c.width.val),f.x=(-w+d.x1+d.x2+E)/2,s.autoHeight=Math.max(d.h,c.height.val),f.y=(-D+d.y1+d.y2+I)/2}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;(!o.compoundBoundsClean||t)&&(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Dr=function(e){return e===1/0||e===-1/0?0:e},Br=function(e,n,r,i,o){i-n===0||o-r===0||n==null||r==null||i==null||o==null||(e.x1=n<e.x1?n:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},uo=function(e,n){return n==null?e:Br(e,n.x1,n.y1,n.x2,n.y2)},Dl=function(e,n,r){return Jn(e,n,r)},zf=function(e,n,r){if(!n.cy().headless()){var i=n._private,o=i.rstyle,a=o.arrowWidth/2,s=n.pstyle(r+"-arrow-shape").value,u,l;if(s!=="none"){r==="source"?(u=o.srcX,l=o.srcY):r==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},d=c[r]=c[r]||{};d.x1=u-a,d.y1=l-a,d.x2=u+a,d.y2=l+a,d.w=d.x2-d.x1,d.h=d.y2-d.y1,Xf(d,1),Br(e,d.x1,d.y1,d.x2,d.y2)}}},f0=function(e,n,r){if(!n.cy().headless()){var i;r?i=r+"-":i="";var o=n._private,a=o.rstyle,s=n.pstyle(i+"label").strValue;if(s){var u=n.pstyle("text-halign"),l=n.pstyle("text-valign"),c=Dl(a,"labelWidth",r),d=Dl(a,"labelHeight",r),f=Dl(a,"labelX",r),h=Dl(a,"labelY",r),p=n.pstyle(i+"text-margin-x").pfValue,m=n.pstyle(i+"text-margin-y").pfValue,g=n.isEdge(),v=n.pstyle(i+"text-rotation"),y=n.pstyle("text-outline-width").pfValue,b=n.pstyle("text-border-width").pfValue,w=b/2,E=n.pstyle("text-background-padding").pfValue,C=2,D=d,I=c,_=I/2,T=D/2,x,M,A,R;if(g)x=f-_,M=f+_,A=h-T,R=h+T;else{switch(u.value){case"left":x=f-I,M=f;break;case"center":x=f-_,M=f+_;break;case"right":x=f,M=f+I;break}switch(l.value){case"top":A=h-D,R=h;break;case"center":A=h-T,R=h+T;break;case"bottom":A=h,R=h+D;break}}var O=p-Math.max(y,w)-E-C,k=p+Math.max(y,w)+E+C,N=m-Math.max(y,w)-E-C,P=m+Math.max(y,w)+E+C;x+=O,M+=k,A+=N,R+=P;var V=r||"main",U=o.labelBounds,F=U[V]=U[V]||{};F.x1=x,F.y1=A,F.x2=M,F.y2=R,F.w=M-x,F.h=R-A,F.leftPad=O,F.rightPad=k,F.topPad=N,F.botPad=P;var B=g&&v.strValue==="autorotate",G=v.pfValue!=null&&v.pfValue!==0;if(B||G){var Q=B?Dl(o.rstyle,"labelAngle",r):v.pfValue,W=Math.cos(Q),J=Math.sin(Q),ne=(x+M)/2,le=(A+R)/2;if(!g){switch(u.value){case"left":ne=M;break;case"right":ne=x;break}switch(l.value){case"top":le=R;break;case"bottom":le=A;break}}var X=function(Fe,Ae){return Fe=Fe-ne,Ae=Ae-le,{x:Fe*W-Ae*J+ne,y:Fe*J+Ae*W+le}},L=X(x,A),j=X(x,R),$=X(M,A),Y=X(M,R);x=Math.min(L.x,j.x,$.x,Y.x),M=Math.max(L.x,j.x,$.x,Y.x),A=Math.min(L.y,j.y,$.y,Y.y),R=Math.max(L.y,j.y,$.y,Y.y)}var ae=V+"Rot",we=U[ae]=U[ae]||{};we.x1=x,we.y1=A,we.x2=M,we.y2=R,we.w=M-x,we.h=R-A,Br(e,x,A,M,R),Br(o.labelBounds.all,x,A,M,R)}return e}},W_=function(e,n){if(!n.cy().headless()){var r=n.pstyle("outline-opacity").value,i=n.pstyle("outline-width").value,o=n.pstyle("outline-offset").value,a=i+o;Ax(e,n,r,a,"outside",a/2)}},Ax=function(e,n,r,i,o,a){if(!(r===0||i<=0||o==="inside")){var s=n.cy(),u=n.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=n.position(),d=c.x,f=c.y,h=n.width(),p=n.height();if(l.hasMiterBounds){o==="center"&&(i/=2);var m=l.miterBounds(d,f,h,p,i);uo(e,m)}else a!=null&&a>0&&Jf(e,[a,a,a,a])}},Hj=function(e,n){if(!n.cy().headless()){var r=n.pstyle("border-opacity").value,i=n.pstyle("border-width").pfValue,o=n.pstyle("border-position").value;Ax(e,n,r,i,o)}},Uj=function(e,n){var r=e._private.cy,i=r.styleEnabled(),o=r.headless(),a=jn(),s=e._private,u=e.isNode(),l=e.isEdge(),c,d,f,h,p,m,g=s.rstyle,v=u&&i?e.pstyle("bounds-expansion").pfValue:[0],y=function(Qe){return Qe.pstyle("display").value!=="none"},b=!i||y(e)&&(!l||y(e.source())&&y(e.target()));if(b){var w=0,E=0;i&&n.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(E=e.pstyle("overlay-padding").value));var C=0,D=0;i&&n.includeUnderlays&&(C=e.pstyle("underlay-opacity").value,C!==0&&(D=e.pstyle("underlay-padding").value));var I=Math.max(E,D),_=0,T=0;if(i&&(_=e.pstyle("width").pfValue,T=_/2),u&&n.includeNodes){var x=e.position();p=x.x,m=x.y;var M=e.outerWidth(),A=M/2,R=e.outerHeight(),O=R/2;c=p-A,d=p+A,f=m-O,h=m+O,Br(a,c,f,d,h),i&&W_(a,e),i&&n.includeOutlines&&!o&&W_(a,e),i&&Hj(a,e)}else if(l&&n.includeEdges)if(i&&!o){var k=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),d=Math.max(g.srcX,g.midX,g.tgtX),f=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=T,d+=T,f-=T,h+=T,Br(a,c,f,d,h),k==="haystack"){var N=g.haystackPts;if(N&&N.length===2){if(c=N[0].x,f=N[0].y,d=N[1].x,h=N[1].y,c>d){var P=c;c=d,d=P}if(f>h){var V=f;f=h,h=V}Br(a,c-T,f-T,d+T,h+T)}}else if(k==="bezier"||k==="unbundled-bezier"||lo(k,"segments")||lo(k,"taxi")){var U;switch(k){case"bezier":case"unbundled-bezier":U=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":U=g.linePts;break}if(U!=null)for(var F=0;F<U.length;F++){var B=U[F];c=B.x-T,d=B.x+T,f=B.y-T,h=B.y+T,Br(a,c,f,d,h)}}}else{var G=e.source(),Q=G.position(),W=e.target(),J=W.position();if(c=Q.x,d=J.x,f=Q.y,h=J.y,c>d){var ne=c;c=d,d=ne}if(f>h){var le=f;f=h,h=le}c-=T,d+=T,f-=T,h+=T,Br(a,c,f,d,h)}if(i&&n.includeEdges&&l&&(zf(a,e,"mid-source"),zf(a,e,"mid-target"),zf(a,e,"source"),zf(a,e,"target")),i){var X=e.pstyle("ghost").value==="yes";if(X){var L=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue;Br(a,a.x1+L,a.y1+j,a.x2+L,a.y2+j)}}var $=s.bodyBounds=s.bodyBounds||{};NS($,a),Jf($,v),Xf($,1),i&&(c=a.x1,d=a.x2,f=a.y1,h=a.y2,Br(a,c-I,f-I,d+I,h+I));var Y=s.overlayBounds=s.overlayBounds||{};NS(Y,a),Jf(Y,v),Xf(Y,1);var ae=s.labelBounds=s.labelBounds||{};ae.all!=null?CB(ae.all):ae.all=jn(),i&&n.includeLabels&&(n.includeMainLabels&&f0(a,e,null),l&&(n.includeSourceLabels&&f0(a,e,"source"),n.includeTargetLabels&&f0(a,e,"target")))}return a.x1=Dr(a.x1),a.y1=Dr(a.y1),a.x2=Dr(a.x2),a.y2=Dr(a.y2),a.w=Dr(a.x2-a.x1),a.h=Dr(a.y2-a.y1),a.w>0&&a.h>0&&b&&(Jf(a,v),Xf(a,1)),a},Rx=function(e){var n=0,r=function(a){return(a?1:0)<<n++},i=0;return i+=r(e.incudeNodes),i+=r(e.includeEdges),i+=r(e.includeLabels),i+=r(e.includeMainLabels),i+=r(e.includeSourceLabels),i+=r(e.includeTargetLabels),i+=r(e.includeOverlays),i+=r(e.includeOutlines),i},Nx=function(e){var n=function(s){return Math.round(s)};if(e.isEdge()){var r=e.source().position(),i=e.target().position();return _S([n(r.x),n(r.y),n(i.x),n(i.y)])}else{var o=e.position();return _S([n(o.x),n(o.y)])}},Z_=function(e,n){var r=e._private,i,o=e.isEdge(),a=n==null?Y_:Rx(n),s=a===Y_;if(r.bbCache==null?(i=Uj(e,Vl),r.bbCache=i,r.bbCachePosKey=Nx(e)):i=r.bbCache,!s){var u=e.isNode();i=jn(),(n.includeNodes&&u||n.includeEdges&&!u)&&(n.includeOverlays?uo(i,r.overlayBounds):uo(i,r.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!o||n.includeSourceLabels&&n.includeTargetLabels)?uo(i,r.labelBounds.all):(n.includeMainLabels&&uo(i,r.labelBounds.mainRot),n.includeSourceLabels&&uo(i,r.labelBounds.sourceRot),n.includeTargetLabels&&uo(i,r.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Vl={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Y_=Rx(Vl),K_=Dn(Vl);Io.boundingBox=function(t){var e,n=t===void 0||t.useCache===void 0||t.useCache===!0,r=ks(function(c){var d=c._private;return d.bbCache==null||d.styleDirty||d.bbCachePosKey!==Nx(c)},function(c){return c.id()});if(n&&this.length===1&&!r(this[0]))t===void 0?t=Vl:t=K_(t),e=Z_(this[0],t);else{e=jn(),t=t||Vl;var i=K_(t),o=this,a=o.cy(),s=a.styleEnabled();this.edges().forEach(r),this.nodes().forEach(r),s&&this.recalculateRenderedStyle(n),this.updateCompoundBounds(!n);for(var u=0;u<o.length;u++){var l=o[u];r(l)&&l.dirtyBoundingBoxCache(),uo(e,Z_(l,i))}}return e.x1=Dr(e.x1),e.y1=Dr(e.y1),e.x2=Dr(e.x2),e.y2=Dr(e.y2),e.w=Dr(e.x2-e.x1),e.h=Dr(e.y2-e.y1),e};Io.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Io.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),tt(t)){var o=t;t=function(){return o}}var a=function(c,d){return c._private.bbAtOldPos=t(c,d)},s=function(c){return c._private.bbAtOldPos};n.startBatch(),e.forEach(a).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=EB(this.boundingBox({useCache:!1}));return e.silentPositions(s),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),u};Os.boundingbox=Os.bb=Os.boundingBox;Os.renderedBoundingbox=Os.renderedBoundingBox;var $j=Io,xl,Kl;xl=Kl={};var Ox=function(e){e.uppercaseName=dS(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=dS(e.outerName),xl[e.name]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){if(r.isParent())return r.updateCompoundBounds(),i[e.autoName]||0;var s=r.pstyle(e.name);switch(s.strValue){case"label":return r.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},xl["outer"+e.uppercaseName]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){var s=r[e.name](),u=r.pstyle("border-position").value,l;u==="center"?l=r.pstyle("border-width").pfValue:u==="outside"?l=2*r.pstyle("border-width").pfValue:l=0;var c=2*r.padding();return s+l+c}else return 1},xl["rendered"+e.uppercaseName]=function(){var r=this[0];if(r){var i=r[e.name]();return i*this.cy().zoom()}},xl["rendered"+e.uppercaseOuterName]=function(){var r=this[0];if(r){var i=r[e.outerName]();return i*this.cy().zoom()}}};Ox({name:"width"});Ox({name:"height"});Kl.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Kl.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Kl.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var zj=Kl,qj=function(e,n){if(e.isEdge()&&e.takesUpSpace())return n(e)},Gj=function(e,n){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy();return Sh(n(e),r.zoom(),r.pan())}},Wj=function(e,n){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy(),i=r.pan(),o=r.zoom();return n(e).map(function(a){return Sh(a,o,i)})}},Zj=function(e){return e.renderer().getControlPoints(e)},Yj=function(e){return e.renderer().getSegmentPoints(e)},Kj=function(e){return e.renderer().getSourceEndpoint(e)},Qj=function(e){return e.renderer().getTargetEndpoint(e)},Xj=function(e){return e.renderer().getEdgeMidpoint(e)},Q_={controlPoints:{get:Zj,mult:!0},segmentPoints:{get:Yj,mult:!0},sourceEndpoint:{get:Kj},targetEndpoint:{get:Qj},midpoint:{get:Xj}},Jj=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},eH=Object.keys(Q_).reduce(function(t,e){var n=Q_[e],r=Jj(e);return t[e]=function(){return qj(this,n.get)},n.mult?t[r]=function(){return Wj(this,n.get)}:t[r]=function(){return Gj(this,n.get)},t},{}),tH=Me({},jj,$j,zj,eH);var kx=function(e,n){this.recycle(e,n)};function El(){return!1}function qf(){return!0}kx.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=El,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?qf:El):e!=null&&e.type?n=e:this.type=e,n!=null&&(this.originalEvent=n.originalEvent,this.type=n.type!=null?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:r.x*i+o.x,y:r.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=qf;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=qf;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=qf,this.stopPropagation()},isDefaultPrevented:El,isPropagationStopped:El,isImmediatePropagationStopped:El};var Px=/^([^.]+)(\.(?:[^.]+))?$/,nH=".*",Fx={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},X_=Object.keys(Fx),rH={};function Nh(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rH,e=arguments.length>1?arguments[1]:void 0,n=0;n<X_.length;n++){var r=X_[n];this[r]=t[r]||Fx[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var wo=Nh.prototype,Lx=function(e,n,r,i,o,a,s){xt(i)&&(o=i,i=null),s&&(a==null?a=s:a=Me({},a,s));for(var u=bt(r)?r:r.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!go(c)){var d=c.match(Px);if(d){var f=d[1],h=d[2]?d[2]:null,p=n(e,c,f,h,i,o,a);if(p===!1)break}}}},J_=function(e,n){return e.addEventFields(e.context,n),new kx(n.type,n)},iH=function(e,n,r){if(c2(r)){n(e,r);return}else if(tt(r)){n(e,J_(e,r));return}for(var i=bt(r)?r:r.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!go(a)){var s=a.match(Px);if(s){var u=s[1],l=s[2]?s[2]:null,c=J_(e,{type:u,namespace:l,target:e.context});n(e,c)}}}};wo.on=wo.addListener=function(t,e,n,r,i){return Lx(this,function(o,a,s,u,l,c,d){xt(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:d})},t,e,n,r,i),this};wo.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})};wo.removeListener=wo.off=function(t,e,n,r){var i=this;this.emitting!==0&&(this.listeners=G2(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];Lx(i,function(d,f,h,p,m,g){if((c.type===h||t==="*")&&(!p&&c.namespace!==".*"||c.namespace===p)&&(!m||d.qualifierCompare(c.qualifier,m))&&(!g||c.callback===g))return o.splice(l,1),!1},t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this};wo.removeAllListeners=function(){return this.removeListener("*")};wo.emit=wo.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,bt(e)||(e=[e]),iH(this,function(o,a){n!=null&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var s=function(){var c=r[u];if(c.type===a.type&&(!c.namespace||c.namespace===a.namespace||c.namespace===nH)&&o.eventMatches(o.context,c,a)){var d=[a];e!=null&&Z2(d,e),o.beforeEmit(o.context,c,a),c.conf&&c.conf.one&&(o.listeners=o.listeners.filter(function(p){return p!==c}));var f=o.callbackContext(o.context,c,a),h=c.callback.apply(f,d);o.afterEmit(o.context,c,a),h===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s();o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},t),this.emitting--,this};var oH={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&zl(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Gf=function(e){return Ie(e)?new yo(e):e},Bx={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],r=n._private;r.emitter||(r.emitter=new Nh(oH,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,r){for(var i=Gf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r)}return this},removeListener:function(e,n,r){for(var i=Gf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var n=this[e];n.emitter().removeAllListeners()}return this},one:function(e,n,r){for(var i=Gf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,r)}return this},once:function(e,n,r){for(var i=Gf(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r,{once:!0,onceCollection:this})}},emit:function(e,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().emit(e,n)}return this},emitAndNotify:function(e,n){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,n),this}};dt.eventAliasesOn(Bx);var Vx={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),r=0;r<this.length;r++){var i=this[r];i.isNode()?e.push(i):n.push(i)}return{nodes:e,edges:n}},filter:function(e,n){if(e===void 0)return this;if(Ie(e)||ur(e))return new yo(e).filter(this);if(xt(e)){for(var r=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);s&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){Ie(e)&&(e=this.filter(e));for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r],o=e.has(i);o||n.push(i)}return n}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ie(e)){var n=e;return this.filter(n)}for(var r=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&r.push(c)}return r},xor:function(e){var n=this._private.cy;Ie(e)&&(e=n.$(e));var r=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var d=u[c],f=d._private.data.id,h=l.hasElementWithId(f);h||r.push(d)}};return a(i,o),a(o,i),r},diff:function(e){var n=this._private.cy;Ie(e)&&(e=n.$(e));var r=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,d,f){for(var h=0;h<c.length;h++){var p=c[h],m=p._private.data.id,g=d.hasElementWithId(m);g?o.merge(p):f.push(p)}};return u(a,s,r),u(s,a,i),{left:r,right:i,both:o}},add:function(e){var n=this._private.cy;if(!e)return this;if(Ie(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var n=this._private,r=n.cy;if(!e)return this;if(e&&Ie(e)){var i=e;e=r.mutableElements().filter(i)}for(var o=n.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var n=this[e],r=n.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(r);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var n=this._private,r=e._private.data.id,i=n.map,o=i.get(r);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&Ie(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--){var r=this[n];e(r)&&this.unmergeAt(n)}return this},map:function(e,n){for(var r=[],i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);r.push(s)}return r},reduce:function(e,n){for(var r=n,i=this,o=0;o<i.length;o++)r=e(r,i[o],o,i);return r},max:function(e,n){for(var r=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u>r&&(r=u,i=s)}return{value:r,ele:i}},min:function(e,n){for(var r=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u<r&&(r=u,i=s)}return{value:r,ele:i}}},nt=Vx;nt.u=nt["|"]=nt["+"]=nt.union=nt.or=nt.add;nt["\\"]=nt["!"]=nt["-"]=nt.difference=nt.relativeComplement=nt.subtract=nt.not;nt.n=nt["&"]=nt["."]=nt.and=nt.intersection=nt.intersect;nt["^"]=nt["(+)"]=nt["(-)"]=nt.symmetricDifference=nt.symdiff=nt.xor;nt.fnFilter=nt.filterFn=nt.stdFilter=nt.filter;nt.complement=nt.abscomp=nt.absoluteComplement;var aH={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},jx=function(e,n){var r=e.cy(),i=r.hasCompoundNodes();function o(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?i?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?W0:0}var a=o(e)-o(n);if(a!==0)return a;function s(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(n);if(u!==0)return u;var l=e.pstyle("z-index").value-n.pstyle("z-index").value;return l!==0?l:e.poolIndex()-n.poolIndex()},gh={forEach:function(e,n){if(xt(e))for(var r=this.length,i=0;i<r;i++){var o=this[i],a=n?e.apply(n,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var r=[],i=this.length;n==null&&(n=i),e==null&&(e=0),e<0&&(e=i+e),n<0&&(n=i+n);for(var o=e;o>=0&&o<n&&o<i;o++)r.push(this[o]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!xt(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(jx)},zDepth:function(){var e=this[0];if(e){var n=e._private,r=n.group;if(r==="nodes"){var i=n.data.parent?e.parents().size():0;return e.isParent()?i:W0-1}else{var o=n.source,a=n.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};gh.each=gh.forEach;var sH=function(){var e="undefined",n=(typeof Symbol>"u"?"undefined":en(Symbol))!=e&&en(Symbol.iterator)!=e;n&&(gh[Symbol.iterator]=function(){var r=this,i={value:void 0,done:!1},o=0,a=this.length;return BT({next:function(){return o<a?i.value=r[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};sH();var uH=Dn({nodeDimensionsIncludeLabels:!1}),th={layoutDimensions:function(e){e=uH(e);var n;if(!this.takesUpSpace())n={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();n={w:r.w,h:r.h}}else n={w:this.outerWidth(),h:this.outerHeight()};return(n.w===0||n.h===0)&&(n.w=n.h=1),n},layoutPositions:function(e,n,r){var i=this.nodes().filter(function(E){return!E.isParent()}),o=this.cy(),a=n.eles,s=function(C){return C.id()},u=ks(r,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(C,D,I){var _={x:D.x1+D.w/2,y:D.y1+D.h/2},T={x:(I.x-_.x)*C,y:(I.y-_.y)*C};return{x:_.x+T.x,y:_.y+T.y}},c=n.spacingFactor&&n.spacingFactor!==1,d=function(){if(!c)return null;for(var C=jn(),D=0;D<i.length;D++){var I=i[D],_=u(I,D);ix(C,_.x,_.y)}return C},f=d(),h=ks(function(E,C){var D=u(E,C);if(c){var I=Math.abs(n.spacingFactor);D=l(I,f,D)}return n.transform!=null&&(D=n.transform(E,D)),D},s);if(n.animate){for(var p=0;p<i.length;p++){var m=i[p],g=h(m,p),v=n.animateFilter==null||n.animateFilter(m,p);if(v){var y=m.animation({position:g,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(y)}else m.position(g)}if(n.fit){var b=o.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push(b)}else if(n.zoom!==void 0&&n.pan!==void 0){var w=o.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(w)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),Bs.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(h),n.fit&&o.fit(n.eles,n.padding),n.zoom!=null&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.makeLayout(Me({},e,{eles:this}))}};th.createLayout=th.makeLayout=th.layout;function Hx(t,e,n){var r=n._private,i=r.styleCache=r.styleCache||[],o;return(o=i[t])!=null||(o=i[t]=e(n)),o}function Oh(t,e){return t=Sa(t),function(r){return Hx(t,e,r)}}function kh(t,e){t=Sa(t);var n=function(i){return e.call(i)};return function(){var i=this[0];if(i)return Hx(t,n,i)}}var bn={recalculateRenderedStyle:function(e){var n=this.cy(),r=n.renderer(),i=n.styleEnabled();return r&&i&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),n=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var r;r=this.spawnSelf().merge(this.descendants()).merge(this.parents()),r.merge(r.connectedEdges()),r.forEach(n)}else this.forEach(function(i){n(i),i.connectedEdges().forEach(n)});return this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching()){var r=n._private.batchStyleEles;return r.merge(this),this}var i=n.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var n=0;n<this.length;n++){var r=this[n];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this[0],i=r.cy();if(i.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,i.style().apply(r));var o=r._private.style[e];return o??(n?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var n=this[0];if(n.cy().styleEnabled()&&n){var r=n.pstyle(e);return r.pfValue!==void 0?r.pfValue:r.value}},numericStyleUnits:function(e){var n=this[0];if(n.cy().styleEnabled()&&n)return n.pstyle(e).units},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=this[0];if(r)return n.style().getRenderedStyle(r,e)},style:function(e,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,o=r.style();if(tt(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(Ie(e))if(n===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,n,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,r)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),r=this[0];if(r){var i=r._private,o=r.pstyle("opacity").value;if(!n)return o;var a=i.data.parent?r.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0],r=n.cy().hasCompoundNodes();if(n)return r?n.effectiveOpacity()===0:n.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0];return!!n._private.backgrounding}};function h0(t,e){var n=t._private,r=n.data.parent?t.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!e(o))return!1}return!0}function ob(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||h0(o,r);var u=s.source,l=s.target;return n(u)&&(!a||h0(u,n))&&(u===l||n(l)&&(!a||h0(l,n)))}}}var Vs=Oh("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});bn.takesUpSpace=kh("takesUpSpace",ob({ok:Vs}));var lH=Oh("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Vs(t)}),cH=Oh("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Vs(t)});bn.interactive=kh("interactive",ob({ok:lH,parentOk:cH,edgeOkViaNode:Vs}));bn.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var dH=Oh("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Vs(t)}),fH=Vs;bn.visible=kh("visible",ob({ok:dH,edgeOkViaNode:fH}));bn.hidden=function(){var t=this[0];if(t)return!t.visible()};bn.isBundledBezier=kh("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});bn.bypass=bn.css=bn.style;bn.renderedCss=bn.renderedStyle;bn.removeBypass=bn.removeCss=bn.removeStyle;bn.pstyle=bn.parsedStyle;var po={};function eT(t){return function(){var e=arguments,n=[];if(e.length===2){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(e.length===1&&xt(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&bt(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var d=t.overrideAble(u);if(d!==void 0&&(l=d,!d))return this}l&&(u._private[t.field]=t.value,c&&n.push(u))}var f=this.spawn(n);f.updateStyle(),f.emit(t.event),a&&f.emit(a)}return this}}function js(t){po[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(n!==void 0)return n}return e._private[t.field]}},po[t.on]=eT({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),po[t.off]=eT({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}js({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});js({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});js({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});js({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});po.deselect=po.unselect;po.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};js({field:"active",on:"activate",off:"unactivate"});js({field:"pannable",on:"panify",off:"unpanify"});po.inactive=function(){var t=this[0];if(t)return!t._private.active};var xn={},tT=function(e){return function(r){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var d=l[c],f=d.source(),h=d.target();if(e.noIncomingEdges&&h===s&&f!==s||e.noOutgoingEdges&&f===s&&h!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(r)}},nT=function(e){return function(n){for(var r=this,i=[],o=0;o<r.length;o++){var a=r[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),d=l.target();e.outgoing&&c===a?(i.push(l),i.push(d)):e.incoming&&d===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(n)}},rT=function(e){return function(n){for(var r=this,i=[],o={};;){var a=e.outgoing?r.outgoers():r.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;r=a}return this.spawn(i,!0).filter(n)}};xn.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};Me(xn,{roots:tT({noIncomingEdges:!0}),leaves:tT({noOutgoingEdges:!0}),outgoers:Er(nT({outgoing:!0}),"outgoers"),successors:rT({outgoing:!0}),incomers:Er(nT({incoming:!0}),"incomers"),predecessors:rT({})});Me(xn,{neighborhood:Er(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});xn.neighbourhood=xn.neighborhood;xn.closedNeighbourhood=xn.closedNeighborhood;xn.openNeighbourhood=xn.openNeighborhood;Me(xn,{source:Er(function(e){var n=this[0],r;return n&&(r=n._private.source||n.cy().collection()),r&&e?r.filter(e):r},"source"),target:Er(function(e){var n=this[0],r;return n&&(r=n._private.target||n.cy().collection()),r&&e?r.filter(e):r},"target"),sources:iT({attr:"source"}),targets:iT({attr:"target"})});function iT(t){return function(n){for(var r=[],i=0;i<this.length;i++){var o=this[i],a=o._private[t.attr];a&&r.push(a)}return this.spawn(r,!0).filter(n)}}Me(xn,{edgesWith:Er(oT(),"edgesWith"),edgesTo:Er(oT({thisIsSrc:!0}),"edgesTo")});function oT(t){return function(n){var r=[],i=this._private.cy,o=t||{};Ie(n)&&(n=i.$(n));for(var a=0;a<n.length;a++)for(var s=n[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,d=this.hasElementWithId(c.source)&&n.hasElementWithId(c.target),f=n.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=d||f;h&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!d||o.thisIsTgt&&!f)||r.push(l))}return this.spawn(r,!0)}}Me(xn,{connectedEdges:Er(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Er(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Er(aT(),"parallelEdges"),codirectedEdges:Er(aT({codirected:!0}),"codirectedEdges")});function aT(t){var e={codirected:!1};return t=Me({},e,t),function(r){for(var i=[],o=this.edges(),a=t,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,d=c._private.data.id,f=l.data.target,h=c._private.edges,p=0;p<h.length;p++){var m=h[p],g=m._private.data,v=g.target,y=g.source,b=v===f&&y===d,w=d===v&&f===y;(a.codirected&&b||!a.codirected&&(b||w))&&i.push(m)}return this.spawn(i,!0).filter(r)}}Me(xn,{components:function(e){var n=this,r=n.cy(),i=r.collection(),o=e==null?n.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,d){i.merge(c),o.unmerge(c),d.merge(c)};if(o.empty())return n.spawn();var u=function(){var c=r.collection();a.push(c);var d=o[0];s(d,c),n.bfs({directed:!1,roots:d,visit:function(h){return s(h,c)}}),c.forEach(function(f){f.connectedEdges().forEach(function(h){n.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});xn.componentsOf=xn.components;var wn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){_t("A collection must have a reference to the core");return}var o=new Ri,a=!1;if(!n)n=[];else if(n.length>0&&tt(n[0])&&!zl(n[0])){a=!0;for(var s=[],u=new Ls,l=0,c=n.length;l<c;l++){var d=n[l];d.data==null&&(d.data={});var f=d.data;if(f.id==null)f.id=tx();else if(e.hasElementWithId(f.id)||u.has(f.id))continue;var h=new Ih(e,d,!1);s.push(h),u.add(f.id)}n=s}this.length=0;for(var p=0,m=n.length;p<m;p++){var g=n[p][0];if(g!=null){var v=g._private.data.id;(!r||!o.has(v))&&(r&&o.set(v,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var b=this.lazyMap=new Ri,w=this.eles,E=0;E<w.length;E++){var C=w[E];b.set(C.id(),{index:E,ele:C})}}},r&&(this._private.map=o),a&&!i&&this.restore()},Ct=Ih.prototype=wn.prototype=Object.create(Array.prototype);Ct.instanceString=function(){return"collection"};Ct.spawn=function(t,e){return new wn(this.cy(),t,e)};Ct.spawnSelf=function(){return this.spawn(this)};Ct.cy=function(){return this._private.cy};Ct.renderer=function(){return this._private.cy.renderer()};Ct.element=function(){return this[0]};Ct.collection=function(){return HT(this)?this:new wn(this._private.cy,[this])};Ct.unique=function(){return new wn(this._private.cy,this,!0)};Ct.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Ct.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new wn(e)};Ct.$id=Ct.getElementById;Ct.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this[0]._private.data.id;return e._private.map.get(n).index};Ct.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Ct.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Ct.json=function(t){var e=this.element(),n=this.cy();if(e==null&&t)return this;if(e!=null){var r=e._private;if(tt(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,u=t.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var d=function(m,g,v){var y=t[m];y!=null&&y!==r[m]&&(y?e[g]():e[v]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),n.endBatch(),this}else if(t===void 0){var f={data:di(r.data),position:di(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};f.classes="";var h=0;return r.classes.forEach(function(p){return f.classes+=h++===0?p:" "+p}),f}}};Ct.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t};Ct.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new Ih(t,i,!1);e.push(o)}return new wn(t,e)};Ct.copy=Ct.clone;Ct.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),i=r._private,o=[],a=[],s,u=0,l=n.length;u<l;u++){var c=n[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var d,f=function(){s.splice(d,1),d--};for(d=0;d<s.length;d++){var h=s[d],p=h._private,m=p.data;if(h.clearTraversalCache(),!(!e&&!p.removed)){if(m.id===void 0)m.id=tx();else if(se(m.id))m.id=""+m.id;else if(go(m.id)||!Ie(m.id)){_t("Can not create element with invalid string ID `"+m.id+"`"),f();continue}else if(r.hasElementWithId(m.id)){_t("Can not create second element with ID `"+m.id+"`"),f();continue}}var g=m.id;if(h.isNode()){var v=p.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(h.isEdge()){for(var y=h,b=["source","target"],w=b.length,E=!1,C=0;C<w;C++){var D=b[C],I=m[D];se(I)&&(I=m[D]=""+m[D]),I==null||I===""?(_t("Can not create edge `"+g+"` with unspecified "+D),E=!0):r.hasElementWithId(I)||(_t("Can not create edge `"+g+"` with nonexistant "+D+" `"+I+"`"),E=!0)}if(E){f();continue}var _=r.getElementById(m.source),T=r.getElementById(m.target);_.same(T)?_._private.edges.push(y):(_._private.edges.push(y),T._private.edges.push(y)),y._private.source=_,y._private.target=T}p.map=new Ri,p.map.set(g,{ele:h,index:0}),p.removed=!1,e&&r.addToPool(h)}for(var x=0;x<o.length;x++){var M=o[x],A=M._private.data;se(A.parent)&&(A.parent=""+A.parent);var R=A.parent,O=R!=null;if(O||M._private.parent){var k=M._private.parent?r.collection().merge(M._private.parent):r.getElementById(R);if(k.empty())A.parent=void 0;else if(k[0].removed())ft("Node added with missing parent, reference to parent removed"),A.parent=void 0,M._private.parent=null;else{for(var N=!1,P=k;!P.empty();){if(M.same(P)){N=!0,A.parent=void 0;break}P=P.parent()}N||(k[0]._private.children.push(M),M._private.parent=k[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var V=s.length===n.length?n:new wn(r,s),U=0;U<V.length;U++){var F=V[U];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}var B;i.hasCompoundNodes?B=r.collection().merge(V).merge(V.connectedNodes()).merge(V.parent()):B=V,B.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?V.emitAndNotify("add"):e&&V.emit("add")}return n};Ct.removed=function(){var t=this[0];return t&&t._private.removed};Ct.inside=function(){var t=this[0];return t&&!t._private.removed};Ct.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],i={},o=n._private.cy;function a(R){for(var O=R._private.edges,k=0;k<O.length;k++)u(O[k])}function s(R){for(var O=R._private.children,k=0;k<O.length;k++)u(O[k])}function u(R){var O=i[R.id()];e&&R.removed()||O||(i[R.id()]=!0,R.isNode()?(r.push(R),a(R),s(R)):r.unshift(R))}for(var l=0,c=n.length;l<c;l++){var d=n[l];u(d)}function f(R,O){var k=R._private.edges;vo(k,O),R.clearTraversalCache()}function h(R){R.clearTraversalCache()}var p=[];p.ids={};function m(R,O){O=O[0],R=R[0];var k=R._private.children,N=R.id();vo(k,O),O._private.parent=null,p.ids[N]||(p.ids[N]=!0,p.push(R))}n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var g=0;g<r.length;g++){var v=r[g];if(v.isEdge()){var y=v.source()[0],b=v.target()[0];f(y,v),f(b,v);for(var w=v.parallelEdges(),E=0;E<w.length;E++){var C=w[E];h(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var D=v.parent();D.length!==0&&m(D,v)}e&&(v._private.removed=!0)}var I=o._private.elements;o._private.hasCompoundNodes=!1;for(var _=0;_<I.length;_++){var T=I[_];if(T.isParent()){o._private.hasCompoundNodes=!0;break}}var x=new wn(this.cy(),r);x.size()>0&&(t?x.emitAndNotify("remove"):e&&x.emit("remove"));for(var M=0;M<p.length;M++){var A=p[M];(!e||!A.removed())&&A.updateStyle()}return x};Ct.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,o=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var a=o(t.source),s=o(t.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var p=n[h],m=p._private.data;p.isEdge()&&(u&&(m.source=a),l&&(m.target=s))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(t.parent!==void 0){var c=o(t.parent),d=c===null||e.hasElementWithId(c);if(d){var f=c===null?void 0:c;e.batch(function(){var h=n.remove(r,i);h.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var m=n[p],g=m._private.data;m.isNode()&&(g.parent=f)}h.restore(r,i)}),n.emitAndNotify("move")}}return this};[hx,Cj,eh,ho,Fs,Vj,Rh,tH,Bx,Vx,aH,gh,th,bn,po,xn].forEach(function(t){Me(Ct,t)});var hH={add:function(e){var n,r=this;if(ur(e)){var i=e;if(i._private.cy===r)n=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}n=new wn(r,o)}}else if(bt(e)){var u=e;n=new wn(r,u)}else if(tt(e)&&(bt(e.nodes)||bt(e.edges))){for(var l=e,c=[],d=["nodes","edges"],f=0,h=d.length;f<h;f++){var p=d[f],m=l[p];if(bt(m))for(var g=0,v=m.length;g<v;g++){var y=Me({group:p},m[g]);c.push(y)}}n=new wn(r,c)}else{var b=e;n=new Ih(r,b).collection()}return n},remove:function(e){if(!ur(e)){if(Ie(e)){var n=e;e=this.$(n)}}return e.remove()}};function pH(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var f=c?new Float32Array(u):new Array(u);function h(T,x){return 1-3*x+3*T}function p(T,x){return 3*x-6*T}function m(T){return 3*T}function g(T,x,M){return((h(x,M)*T+p(x,M))*T+m(x))*T}function v(T,x,M){return 3*h(x,M)*T*T+2*p(x,M)*T+m(x)}function y(T,x){for(var M=0;M<i;++M){var A=v(x,t,n);if(A===0)return x;var R=g(x,t,n)-T;x-=R/A}return x}function b(){for(var T=0;T<u;++T)f[T]=g(T*l,t,n)}function w(T,x,M){var A,R,O=0;do R=x+(M-x)/2,A=g(R,t,n)-T,A>0?M=R:x=R;while(Math.abs(A)>a&&++O<s);return R}function E(T){for(var x=0,M=1,A=u-1;M!==A&&f[M]<=T;++M)x+=l;--M;var R=(T-f[M])/(f[M+1]-f[M]),O=x+R*l,k=v(O,t,n);return k>=o?y(T,O):k===0?O:w(T,x,x+l)}var C=!1;function D(){C=!0,(t!==e||n!==r)&&b()}var I=function(x){return C||D(),t===e&&n===r?x:x===0?0:x===1?1:g(E(x),e,r)};I.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var _="generateBezier("+[t,e,n,r]+")";return I.toString=function(){return _},I}var gH=(function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,o){var a={x:r.x+o.dx*i,v:r.v+o.dv*i,tension:r.tension,friction:r.friction};return{dx:a.v,dv:t(a)}}function n(r,i){var o={dx:r.v,dv:t(r)},a=e(r,i*.5,o),s=e(r,i*.5,a),u=e(r,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return r.x=r.x+l*i,r.v=r.v+c*i,r}return function r(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,d=16/1e3,f,h,p;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,f=a!==null,f?(l=r(i,o),h=l/a*d):h=d;p=n(p||s,h),u.push(1+p.x),l+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return f?function(m){return u[m*(u.length-1)|0]}:l}})(),Et=function(e,n,r,i){var o=pH(e,n,r,i);return function(a,s,u){return a+(s-a)*o(u)}},nh={linear:function(e,n,r){return e+(n-e)*r},ease:Et(.25,.1,.25,1),"ease-in":Et(.42,0,1,1),"ease-out":Et(0,0,.58,1),"ease-in-out":Et(.42,0,.58,1),"ease-in-sine":Et(.47,0,.745,.715),"ease-out-sine":Et(.39,.575,.565,1),"ease-in-out-sine":Et(.445,.05,.55,.95),"ease-in-quad":Et(.55,.085,.68,.53),"ease-out-quad":Et(.25,.46,.45,.94),"ease-in-out-quad":Et(.455,.03,.515,.955),"ease-in-cubic":Et(.55,.055,.675,.19),"ease-out-cubic":Et(.215,.61,.355,1),"ease-in-out-cubic":Et(.645,.045,.355,1),"ease-in-quart":Et(.895,.03,.685,.22),"ease-out-quart":Et(.165,.84,.44,1),"ease-in-out-quart":Et(.77,0,.175,1),"ease-in-quint":Et(.755,.05,.855,.06),"ease-out-quint":Et(.23,1,.32,1),"ease-in-out-quint":Et(.86,0,.07,1),"ease-in-expo":Et(.95,.05,.795,.035),"ease-out-expo":Et(.19,1,.22,1),"ease-in-out-expo":Et(1,0,0,1),"ease-in-circ":Et(.6,.04,.98,.335),"ease-out-circ":Et(.075,.82,.165,1),"ease-in-out-circ":Et(.785,.135,.15,.86),spring:function(e,n,r){if(r===0)return nh.linear;var i=gH(e,n,r);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":Et};function sT(t,e,n,r,i){if(r===1||e===n)return n;var o=i(e,n,r);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function uT(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Ds(t,e,n,r,i){var o=i!=null?i.type:null;n<0?n=0:n>1&&(n=1);var a=uT(t,i),s=uT(e,i);if(se(a)&&se(s))return sT(o,a,s,n,r);if(bt(a)&&bt(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],d=s[l];if(c!=null&&d!=null){var f=sT(o,c,d,n,r);u.push(f)}else u.push(d)}return u}}function vH(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,u=a.startTime,l=r?t:t.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=nh.linear;else{var d;if(Ie(s)){var f=c.parse("transition-timing-function",s);d=f.value}else d=s;var h,p;Ie(d)?(h=d,p=[]):(h=d[1],p=d.slice(2).map(function(V){return+V})),p.length>0?(h==="spring"&&p.push(a.duration),a.easingImpl=nh[h].apply(null,p)):a.easingImpl=nh[h]}var m=a.easingImpl,g;if(a.duration===0?g=1:g=(n-u)/a.duration,a.applying&&(g=a.progress),g<0?g=0:g>1&&(g=1),a.delay==null){var v=a.startPosition,y=a.position;if(y&&i&&!t.locked()){var b={};Cl(v.x,y.x)&&(b.x=Ds(v.x,y.x,g,m)),Cl(v.y,y.y)&&(b.y=Ds(v.y,y.y,g,m)),t.position(b)}var w=a.startPan,E=a.pan,C=o.pan,D=E!=null&&r;D&&(Cl(w.x,E.x)&&(C.x=Ds(w.x,E.x,g,m)),Cl(w.y,E.y)&&(C.y=Ds(w.y,E.y,g,m)),t.emit("pan"));var I=a.startZoom,_=a.zoom,T=_!=null&&r;T&&(Cl(I,_)&&(o.zoom=Fl(o.minZoom,Ds(I,_,g,m),o.maxZoom)),t.emit("zoom")),(D||T)&&t.emit("viewport");var x=a.style;if(x&&x.length>0&&i){for(var M=0;M<x.length;M++){var A=x[M],R=A.name,O=A,k=a.startStyle[R],N=c.properties[k.name],P=Ds(k,O,g,m,N);c.overrideBypass(t,R,P)}t.emit("style")}}return a.progress=g,g}function Cl(t,e){return t==null||e==null?!1:se(t)&&se(e)?!0:!!(t&&e)}function mH(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function lT(t,e){var n=e._private.aniEles,r=[];function i(c,d){var f=c._private,h=f.animation.current,p=f.animation.queue,m=!1;if(h.length===0){var g=p.shift();g&&h.push(g)}for(var v=function(C){for(var D=C.length-1;D>=0;D--){var I=C[D];I()}C.splice(0,C.length)},y=h.length-1;y>=0;y--){var b=h[y],w=b._private;if(w.stopped){h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||mH(c,b,t),vH(c,b,t,d),w.applying&&(w.applying=!1),v(w.frames),w.step!=null&&w.step(t),b.completed()&&(h.splice(y,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.completes)),m=!0)}return!d&&h.length===0&&p.length===0&&r.push(c),m}for(var o=!1,a=0;a<n.length;a++){var s=n[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var yH={animate:dt.animate(),animation:dt.animation(),animated:dt.animated(),clearQueue:dt.clearQueue(),delay:dt.delay(),delayAnimation:dt.delayAnimation(),stop:dt.stop(),addToAnimationPool:function(e){var n=this;n.styleEnabled()&&n._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function n(){e._private.animationsRunning&&ch(function(o){lT(o,e),n()})}var r=e.renderer();r&&r.beforeRender?r.beforeRender(function(o,a){lT(a,e)},r.beforeRenderPriorities.animations):n()}},bH={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&zl(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e}},Wf=function(e){return Ie(e)?new yo(e):e},Ux={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Nh(bH,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,r){return this.emitter().on(e,Wf(n),r),this},removeListener:function(e,n,r){return this.emitter().removeListener(e,Wf(n),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,r){return this.emitter().one(e,Wf(n),r),this},once:function(e,n,r){return this.emitter().one(e,Wf(n),r),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};dt.eventAliasesOn(Ux);var N0={png:function(e){var n=this._private.renderer;return e=e||{},n.png(e)},jpg:function(e){var n=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",n.jpg(e)}};N0.jpeg=N0.jpg;var rh={layout:function(e){var n=this;if(e==null){_t("Layout options must be specified to make a layout");return}if(e.name==null){_t("A `name` must be specified to make a layout");return}var r=e.name,i=n.extension("layout",r);if(i==null){_t("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;Ie(e.eles)?o=n.$(e.eles):o=e.eles!=null?e.eles:n.$();var a=new i(Me({},e,{cy:n,eles:o}));return a}};rh.createLayout=rh.makeLayout=rh.layout;var wH={notify:function(e,n){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var i=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();n!=null&&i.merge(n);return}if(r.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,n)}},notifications:function(e){var n=this._private;return e===void 0?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var i=e.batchNotifications[r];i.empty()?n.notify(r):n.notify(r,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o],s=n.getElementById(o);s.data(a)}})}},DH=Dn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),O0={renderTo:function(e,n,r,i){var o=this._private.renderer;return o.renderTo(e,n,r,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this,r=n.extension("renderer",e.name);if(r==null){_t("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&ft("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=DH(e);i.cy=n,n._private.renderer=new r(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var n=e.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(r){var i=r._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};O0.invalidateDimensions=O0.resize;var ih={collection:function(e,n){return Ie(e)?this.$(e):ur(e)?e.collection():bt(e)?(n||(n={}),new wn(this,e,n.unique,n.removed)):new wn(this)},nodes:function(e){var n=this.$(function(r){return r.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(r){return r.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};ih.elements=ih.filter=ih.$;var cn={},Al="t",EH="f";cn.apply=function(t){for(var e=this,n=e._private,r=n.cy,i=r.collection(),o=0;o<t.length;o++){var a=t[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};cn.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c=t[u]===Al,d=e[u]===Al,f=c!==d,h=l.mappedProperties.length>0;if(f||d&&h){var p=void 0;f&&h||f?p=l.properties:h&&(p=l.mappedProperties);for(var m=0;m<p.length;m++){for(var g=p[m],v=g.name,y=!1,b=u+1;b<n.length;b++){var w=n[b],E=e[b]===Al;if(E&&(y=w.properties[g.name]!=null,y))break}!s[v]&&!y&&(s[v]=!0,a.push(v))}}}return r[i]=a,a};cn.getContextMeta=function(t){for(var e=this,n="",r,i=t._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(t);s?n+=Al:n+=EH}return r=e.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};cn.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o],s=e[o]===Al;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return r[e]=i,i};cn.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=r.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=n.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var d=c.mapping,f=d.fnValue=l.value(n);if(f===d.prevFnValue)continue}var h=o[u]={prev:c};r.applyParsedProperty(n,l),h.next=n.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:o}};cn.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function($,Y,ae){return n.getPropertiesHash($,Y,ae)},a=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Ea,_s]}for(var d=function($,Y){return e.styleKeys[Y][0]=Ol($,e.styleKeys[Y][0])},f=function($,Y){return e.styleKeys[Y][1]=kl($,e.styleKeys[Y][1])},h=function($,Y){d($,Y),f($,Y)},p=function($,Y){for(var ae=0;ae<$.length;ae++){var we=$.charCodeAt(ae);d(we,Y),f(we,Y)}},m=2e9,g=function($){return-128<$&&$<128&&Math.floor($)!==$?m-($*1024|0):$},v=0;v<r.length;v++){var y=r[v],b=u[y];if(b!=null){var w=this.properties[y],E=w.type,C=w.groupKey,D=void 0;w.hashOverride!=null?D=w.hashOverride(t,b):b.pfValue!=null&&(D=b.pfValue);var I=w.enums==null?b.value:null,_=D!=null,T=I!=null,x=_||T,M=b.units;if(E.number&&x&&!E.multiple){var A=_?D:I;h(g(A),C),!_&&M!=null&&p(M,C)}else p(b.strValue,C)}}for(var R=[Ea,_s],O=0;O<i.length;O++){var k=i[O],N=e.styleKeys[k];R[0]=Ol(N[0],R[0]),R[1]=kl(N[1],R[1])}e.styleKey=B2(R[0],R[1]);var P=e.styleKeys;e.labelDimsKey=ao(P.labelDimensions);var V=o(t,["label"],P.labelDimensions);if(e.labelKey=ao(V),e.labelStyleKey=ao(Vf(P.commonLabel,V)),!s){var U=o(t,["source-label"],P.labelDimensions);e.sourceLabelKey=ao(U),e.sourceLabelStyleKey=ao(Vf(P.commonLabel,U));var F=o(t,["target-label"],P.labelDimensions);e.targetLabelKey=ao(F),e.targetLabelStyleKey=ao(Vf(P.commonLabel,F))}if(s){var B=e.styleKeys,G=B.nodeBody,Q=B.nodeBorder,W=B.nodeOutline,J=B.backgroundImage,ne=B.compound,le=B.pie,X=B.stripe,L=[G,Q,W,J,ne,le,X].filter(function(j){return j!=null}).reduce(Vf,[Ea,_s]);e.nodeKey=ao(L),e.hasPie=le!=null&&le[0]!==Ea&&le[1]!==_s,e.hasStripe=X!=null&&X[0]!==Ea&&X[1]!==_s}return a!==e.styleKey};cn.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};cn.applyParsedProperty=function(t,e){var n=this,r=e,i=t._private.style,o,a=n.types,s=n.properties[r.name].type,u=r.bypass,l=i[r.name],c=l&&l.bypass,d=t._private,f="mapping",h=function(G){return G==null?null:G.pfValue!=null?G.pfValue:G.value},p=function(){var G=h(l),Q=h(r);n.checkTriggers(t,r.name,G,Q)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(r=e=this.parse(e.name,"bezier",u)),r.delete)return i[r.name]=void 0,p(),!0;if(r.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,p(),!0):!1:(p(),!0);if(r.deleteBypass)return l?l.bypass?(i[r.name]=l.bypassed,p(),!0):!1:(p(),!0);var m=function(){ft("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case a.mapData:{for(var g=r.field.split("."),v=d.data,y=0;y<g.length&&v;y++){var b=g[y];v=v[b]}if(v==null)return m(),!1;var w;if(se(v)){var E=r.fieldMax-r.fieldMin;E===0?w=0:w=(v-r.fieldMin)/E}else return ft("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),s.color){var C=r.valueMin[0],D=r.valueMax[0],I=r.valueMin[1],_=r.valueMax[1],T=r.valueMin[2],x=r.valueMax[2],M=r.valueMin[3]==null?1:r.valueMin[3],A=r.valueMax[3]==null?1:r.valueMax[3],R=[Math.round(C+(D-C)*w),Math.round(I+(_-I)*w),Math.round(T+(x-T)*w),Math.round(M+(A-M)*w)];o={bypass:r.bypass,name:r.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(s.number){var O=r.valueMin+(r.valueMax-r.valueMin)*w;o=this.parse(r.name,O,r.bypass,f)}else return!1;if(!o)return m(),!1;o.mapping=r,r=o;break}case a.data:{for(var k=r.field.split("."),N=d.data,P=0;P<k.length&&N;P++){var V=k[P];N=N[V]}if(N!=null&&(o=this.parse(r.name,N,r.bypass,f)),!o)return m(),!1;o.mapping=r,r=o;break}case a.fn:{var U=r.value,F=r.fnValue!=null?r.fnValue:U(t);if(r.prevFnValue=F,F==null)return ft("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(r.name,F,r.bypass,f),!o)return ft("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=di(r),r=o;break}case void 0:break;default:return!1}return u?(c?r.bypassed=l.bypassed:r.bypassed=l,i[r.name]=r):c?l.bypassed=r:i[r.name]=r,p(),!0};cn.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!e)r._private.style={};else for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};cn.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};cn.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],d=t.pstyle(c),f=e[c];if(f){var h=f.prev,p=h,m=f.next!=null?f.next:d,g=!1,v=void 0,y=1e-6;p&&(se(p.pfValue)&&se(m.pfValue)?(g=m.pfValue-p.pfValue,v=p.pfValue+y*g):se(p.value)&&se(m.value)?(g=m.value-p.value,v=p.value+y*g):bt(p.value)&&bt(m.value)&&(g=p.value[0]!==m.value[0]||p.value[1]!==m.value[1]||p.value[2]!==m.value[2],v=p.strValue),g&&(s[c]=m.strValue,this.applyBypass(t,c,v),u=!0))}}if(!u)return;r.transitioning=!0,new Bs(function(b){a>0?t.delayAnimation(a).play().promise().then(b):b()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)};cn.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);t.removed()||s!=null&&s(n,r,t)&&o(a)};cn.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};cn.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};cn.checkConnectedEdgesBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBoundsOfConnectedEdges},function(i){t.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};cn.checkParallelEdgesBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBoundsOfParallelEdges},function(i){t.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};cn.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r),this.checkConnectedEdgesBoundsTrigger(t,e,n,r),this.checkParallelEdgesBoundsTrigger(t,e,n,r)};var Ql={};Ql.applyBypass=function(t,e,n,r){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(n!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,n,!0);c&&o.push(c)}}else if(Ie(e)){var d=this.parse(e,n,!0);d&&o.push(d)}else if(tt(e)){var f=e;r=n;for(var h=Object.keys(f),p=0;p<h.length;p++){var m=h[p],g=f[m];if(g===void 0&&(g=f[Eh(m)]),g!==void 0){var v=this.parse(m,g,!0);v&&o.push(v)}}}else return!1;if(o.length===0)return!1;for(var y=!1,b=0;b<t.length;b++){for(var w=t[b],E={},C=void 0,D=0;D<o.length;D++){var I=o[D];if(r){var _=w.pstyle(I.name);C=E[I.name]={prev:_}}y=this.applyParsedProperty(w,di(I))||y,r&&(C.next=w.pstyle(I.name))}y&&this.updateStyleHints(w),r&&this.updateTransitions(w,E,a)}return y};Ql.overrideBypass=function(t,e,n){e=q0(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,n):(o.value=n,o.pfValue!=null&&(o.pfValue=n),s?o.strValue="rgb("+n.join(",")+")":u?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(i)),this.checkTriggers(i,e,l,n)}};Ql.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Ql.removeBypasses=function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var o=t[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var d="",f=this.parse(u,d,!0),h=a[l.name]={prev:c};this.applyParsedProperty(o,f),h.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}};var ab={};ab.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};ab.containerCss=function(t){var e=this._private.cy,n=e.container(),r=e.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)};var fi={};fi.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};fi.getRawStyle=function(t,e){var n=this;if(t=t[0],t){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(t,o.name,e);a!=null&&(r[o.name]=a,r[Eh(o.name)]=a)}return r}};fi.getIndexedStyle=function(t,e,n,r){var i=t.pstyle(e)[n][r];return i??t.cy().style().getDefaultProperty(e)[n][0]};fi.getStylePropertyValue=function(t,e,n){var r=this;if(t=t[0],t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(n&&o.number&&s!=null&&se(s)){var c=t.cy().zoom(),d=function(g){return g*c},f=function(g,v){return d(g)+v},h=bt(s),p=h?u.every(function(m){return m!=null}):u!=null;return p?h?s.map(function(m,g){return f(m,u[g])}).join(" "):f(s,u):h?s.map(function(m){return Ie(m)?m:""+d(m)}).join(" "):""+d(s)}else if(l!=null)return l}return null}};fi.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.name,a=t.pstyle(o);a!==void 0&&(tt(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(n[o]=a)}return n};fi.getPropsList=function(t){var e=this,n=[],r=t,i=e.properties;if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],u=r[s],l=i[s]||i[q0(s)],c=this.parse(l.name,u);c&&n.push(c)}return n};fi.getNonDefaultPropertiesHash=function(t,e,n){var r=n.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=t.pstyle(i,!1),o!=null)if(o.pfValue!=null)r[0]=Ol(s,r[0]),r[1]=kl(s,r[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),r[0]=Ol(s,r[0]),r[1]=kl(s,r[1]);return r};fi.getPropertiesHash=fi.getNonDefaultPropertiesHash;var Ph={};Ph.appendFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};Ph.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Ph.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t};var sb={};sb.appendFromString=function(t){var e=this,n=this,r=""+t,i,o,a;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){r.length>i.length?r=r.substr(i.length):r=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=r.match(/^\s*$/);if(l)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){ft("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}i=c[0];var d=c[1];if(d!=="core"){var f=new yo(d);if(f.invalid){ft("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),s();continue}}var h=c[2],p=!1;o=h;for(var m=[];;){var g=o.match(/^\s*$/);if(g)break;var v=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){ft("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),p=!0;break}a=v[0];var y=v[1],b=v[2],w=e.properties[y];if(!w){ft("Skipping property: Invalid property name in: "+a),u();continue}var E=n.parse(y,b);if(!E){ft("Skipping property: Invalid property definition in: "+a),u();continue}m.push({name:y,val:b}),u()}if(p){s();break}n.selector(d);for(var C=0;C<m.length;C++){var D=m[C];n.css(D.name,D.val)}s()}return n};sb.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var Wt={};(function(){var t=Jt,e=v2,n=y2,r=b2,i=w2,o=function(j){return"^"+j+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(j){var $=t+"|\\w+|"+e+"|"+n+"|"+r+"|"+i;return"^"+j+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+$+")\\s*\\,\\s*("+$+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Wt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(j,$){switch(j.length){case 2:return $[0]!=="deg"&&$[0]!=="rad"&&$[1]!=="deg"&&$[1]!=="rad";case 1:return Ie(j[0])||$[0]==="deg"||$[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(j){var $=j.length;return $===1||$===2||$===4}}};var u={zeroNonZero:function(j,$){return(j==null||$==null)&&j!==$||j==0&&$!=0?!0:j!=0&&$==0},any:function(j,$){return j!=$},emptyNonEmpty:function(j,$){var Y=go(j),ae=go($);return Y&&!ae||!Y&&ae}},l=Wt.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],d=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],f=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],m=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(j,$,Y){return j===$?!1:Y.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(j,$){return $.value==="label"?-j.poolIndex():$.pfValue},E=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],C=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],D=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],I=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],_=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],T=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(j,$){return j===$?!1:j==="bezier"||$==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],x=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],M=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],A=[];Wt.pieBackgroundN=16,A.push({name:"pie-size",type:l.sizeMaybePercent}),A.push({name:"pie-hole",type:l.sizeMaybePercent}),A.push({name:"pie-start-angle",type:l.angle});for(var R=1;R<=Wt.pieBackgroundN;R++)A.push({name:"pie-"+R+"-background-color",type:l.color}),A.push({name:"pie-"+R+"-background-size",type:l.percent}),A.push({name:"pie-"+R+"-background-opacity",type:l.zeroOneNumber});var O=[];Wt.stripeBackgroundN=16,O.push({name:"stripe-size",type:l.sizeMaybePercent}),O.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var k=1;k<=Wt.stripeBackgroundN;k++)O.push({name:"stripe-"+k+"-background-color",type:l.color}),O.push({name:"stripe-"+k+"-background-size",type:l.percent}),O.push({name:"stripe-"+k+"-background-opacity",type:l.zeroOneNumber});var N=[],P=Wt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(L){P.forEach(function(j){var $=j+"-"+L.name,Y=L.type,ae=L.triggersBounds;N.push({name:$,type:Y,triggersBounds:ae})})},{});var V=Wt.properties=[].concat(m,b,g,v,y,x,p,h,c,d,f,E,C,D,I,A,O,_,T,N,M),U=Wt.propertyGroups={behavior:m,transition:b,visibility:g,overlay:v,underlay:y,ghost:x,commonLabel:p,labelDimensions:h,mainLabel:c,sourceLabel:d,targetLabel:f,nodeBody:E,nodeBorder:C,nodeOutline:D,backgroundImage:I,pie:A,stripe:O,compound:_,edgeLine:T,edgeArrow:N,core:M},F=Wt.propertyGroupNames={},B=Wt.propertyGroupKeys=Object.keys(U);B.forEach(function(L){F[L]=U[L].map(function(j){return j.name}),U[L].forEach(function(j){return j.groupKey=L})});var G=Wt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Wt.propertyNames=V.map(function(L){return L.name});for(var Q=0;Q<V.length;Q++){var W=V[Q];V[W.name]=W}for(var J=0;J<G.length;J++){var ne=G[J],le=V[ne.pointsTo],X={name:ne.name,alias:!0,pointsTo:le};V.push(X),V[ne.name]=X}})();Wt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};Wt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Me({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Wt.pieBackgroundN;c++){var d=l.name.replace("{{i}}",c),f=l.value;u[d]=f}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Wt.stripeBackgroundN;c++){var d=l.name.replace("{{i}}",c),f=l.value;u[d]=f}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Wt.arrowPrefixes.forEach(function(c){var d=c+"-"+l.name,f=l.value;u[d]=f}),u},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties};Wt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Fh={};Fh.parse=function(t,e,n,r){var i=this;if(xt(e))return i.parseImplWarn(t,e,n,r);var o=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,a=n?"t":"f",s=""+e,u=XT(t,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(t,e,n,r)),(n||r==="mapping")&&(c=di(c),c&&(c.value=di(c.value))),c};Fh.parseImplWarn=function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return!i&&e!=null&&ft("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&ft("The style value of `label` is deprecated for `"+i.name+"`"),i};Fh.parseImpl=function(t,e,n,r){var i=this;t=q0(t);var o=i.properties[t],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=Ie(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(n&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(xt(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};var c,d;if(!(!u||r||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(n)return!1;var f=s.data;return{name:t,value:c,strValue:""+e,mapped:f,field:c[1],bypass:n}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(s.mapData.regex).exec(e))){if(n||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var p=this.parse(t,d[4]);if(!p||p.mapped)return!1;var m=this.parse(t,d[5]);if(!m||m.mapped)return!1;if(p.pfValue===m.pfValue||p.strValue===m.strValue)return ft("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(l.color){var g=p.value,v=m.value,y=g[0]===v[0]&&g[1]===v[1]&&g[2]===v[2]&&(g[3]===v[3]||(g[3]==null||g[3]===1)&&(v[3]==null||v[3]===1));if(y)return!1}return{name:t,value:d,strValue:""+e,mapped:h,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:p.value,valueMax:m.value,bypass:n}}}if(l.multiple&&r!=="multiple"){var b;if(u?b=e.split(/\s+/):bt(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],E=[],C=[],D="",I=!1,_=0;_<b.length;_++){var T=i.parse(t,b[_],n,"multiple");I=I||Ie(T.value),w.push(T.value),C.push(T.pfValue!=null?T.pfValue:T.value),E.push(T.units),D+=(_>0?" ":"")+T.strValue}return l.validate&&!l.validate(w,E)?null:l.singleEnum&&I?w.length===1&&Ie(w[0])?{name:t,value:w[0],strValue:w[0],bypass:n}:null:{name:t,value:w,pfValue:C,strValue:D,bypass:n,units:E}}var x=function(){for(var X=0;X<l.enums.length;X++){var L=l.enums[X];if(L===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(l.number){var M,A="px";if(l.units&&(M=l.units),l.implicitUnits&&(A=l.implicitUnits),!l.unitless)if(u){var R="px|em"+(l.allowPercent?"|\\%":"");M&&(R=M);var O=e.match("^("+Jt+")("+R+")?$");O&&(e=O[1],M=O[2]||A)}else(!M||l.implicitUnits)&&(M=A);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,x();if(l.integer&&!l2(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var k={name:t,value:e,strValue:""+e+(M||""),units:M,bypass:n};return l.unitless||M!=="px"&&M!=="em"?k.pfValue=e:k.pfValue=M==="px"||!M?e:this.getEmSizeInPixels()*e,(M==="ms"||M==="s")&&(k.pfValue=M==="ms"?e:1e3*e),(M==="deg"||M==="rad")&&(k.pfValue=M==="rad"?e:bB(e)),M==="%"&&(k.pfValue=e/100),k}else if(l.propList){var N=[],P=""+e;if(P!=="none"){for(var V=P.split(/\s*,\s*|\s+/),U=0;U<V.length;U++){var F=V[U].trim();i.properties[F]?N.push(F):ft("`"+F+"` is not a valid property name")}if(N.length===0)return null}return{name:t,value:N,strValue:N.length===0?"none":N.join(" "),bypass:n}}else if(l.color){var B=qT(e);return B?{name:t,value:B,pfValue:B,strValue:"rgb("+B[0]+","+B[1]+","+B[2]+")",bypass:n}:null}else if(l.regex||l.regexes){if(l.enums){var G=x();if(G)return G}for(var Q=l.regexes?l.regexes:[l.regex],W=0;W<Q.length;W++){var J=new RegExp(Q[W]),ne=J.exec(e);if(ne)return{name:t,value:l.singleRegexMatchValue?ne[1]:ne,strValue:""+e,bypass:n}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:n}:l.enums?x():null};var ln=function(e){if(!(this instanceof ln))return new ln(e);if(!z0(e)){_t("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Mn=ln.prototype;Mn.instanceString=function(){return"style"};Mn.clear=function(){for(var t=this._private,e=t.cy,n=e.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(n,!0),n.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};Mn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Mn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Mn.selector=function(t){var e=t==="core"?null:new yo(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this};Mn.css=function(){var t=this,e=arguments;if(e.length===1)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];o===void 0&&(o=n[Eh(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Mn.style=Mn.css;Mn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.name.match(/stripe-(\d+)-background-size/)&&n.value&&(this._private.hasStripe=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this};Mn.append=function(t){return UT(t)?t.appendToStyle(this):bt(t)?this.appendFromJson(t):Ie(t)&&this.appendFromString(t),this};ln.fromJson=function(t,e){var n=new ln(t);return n.fromJson(e),n};ln.fromString=function(t,e){return new ln(t).fromString(e)};[cn,Ql,ab,fi,Ph,sb,Wt,Fh].forEach(function(t){Me(Mn,t)});ln.types=Mn.types;ln.properties=Mn.properties;ln.propertyGroups=Mn.propertyGroups;ln.propertyGroupNames=Mn.propertyGroupNames;ln.propertyGroupKeys=Mn.propertyGroupKeys;var CH={style:function(e){if(e){var n=this.setStyle(e);n.update()}return this._private.style},setStyle:function(e){var n=this._private;return UT(e)?n.style=e.generateStyle(this):bt(e)?n.style=ln.fromJson(this,e):Ie(e)?n.style=ln.fromString(this,e):n.style=ln(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},IH="single",xa={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var n=this._private;if(n.selectionType==null&&(n.selectionType=IH),e!==void 0)(e==="additive"||e==="single")&&(n.selectionType=e);else return n.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,n=this._private.pan,r,i,o,a,s;switch(e.length){case 0:return n;case 1:if(Ie(e[0]))return r=e[0],n[r];if(tt(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,se(a)&&(n.x=a),se(s)&&(n.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=e[0],i=e[1],(r==="x"||r==="y")&&se(i)&&(n[r]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,n){var r=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(r.length){case 1:tt(e)&&(s=r[0],u=s.x,l=s.y,se(u)&&(i.x+=u),se(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=n,(o==="x"||o==="y")&&se(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,n){var r=this.getFitViewport(e,n);if(r){var i=this._private;i.zoom=r.zoom,i.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){if(se(e)&&n===void 0&&(n=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var r;if(Ie(e)){var i=e;e=this.$(i)}else if(f2(e)){var o=e;r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else ur(e)||(e=this.mutableElements());if(!(ur(e)&&e.empty())){r=r||e.boundingBox();var a=this.width(),s=this.height(),u;if(n=se(n)?n:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){u=Math.min((a-2*n)/r.w,(s-2*n)/r.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(r.x1+r.x2))/2,y:(s-u*(r.y1+r.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,n){var r=this._private;if(n==null){var i=e;e=i.min,n=i.max}return se(e)&&se(n)&&e<=n?(r.minZoom=e,r.maxZoom=n):se(e)&&n===void 0&&e<=r.maxZoom?r.minZoom=e:se(n)&&e===void 0&&n>=r.minZoom&&(r.maxZoom=n),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n=this._private,r=n.pan,i=n.zoom,o,a,s=!1;if(n.zoomingEnabled||(s=!0),se(e)?a=e:tt(e)&&(a=e.level,e.position!=null?o=Sh(e.position,i,r):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!n.panningEnabled&&(s=!0)),a=a>n.maxZoom?n.maxZoom:a,a=a<n.minZoom?n.minZoom:a,s||!se(a)||a===i||o!=null&&(!se(o.x)||!se(o.y)))return null;if(o!=null){var u=r,l=i,c=a,d={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:a,pan:r}},zoom:function(e){if(e===void 0)return this._private.zoom;var n=this.getZoomedViewport(e),r=this._private;return n==null||!n.zoomed?this:(r.zoom=n.zoom,n.panned&&(r.pan.x=n.pan.x,r.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var n=this._private,r=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(se(e.zoom)||(r=!1),tt(e.pan)||(i=!1),!r&&!i)return this;if(r){var u=e.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&n.panningEnabled){var l=e.pan;se(l.x)&&(n.pan.x=l.x,s=!1),se(l.y)&&(n.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(Ie(e)){var r=e;e=this.mutableElements().filter(r)}else ur(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();n=n===void 0?this._private.zoom:n;var s={x:(o-n*(i.x1+i.x2))/2,y:(a-n*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,n=e.container,r=this;return e.sizeCache=e.sizeCache||(n?(function(){var i=r.window().getComputedStyle(n),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:n.clientWidth-o("padding-left")-o("padding-right"),height:n.clientHeight-o("padding-top")-o("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,r=this.renderedExtent(),i={x1:(r.x1-e.x)/n,x2:(r.x2-e.x)/n,y1:(r.y1-e.y)/n,y2:(r.y2-e.y)/n};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};xa.centre=xa.center;xa.autolockNodes=xa.autolock;xa.autoungrabifyNodes=xa.autoungrabify;var jl={data:dt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:dt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:dt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:dt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};jl.attr=jl.data;jl.removeAttr=jl.removeData;var Hl=function(e){var n=this;e=Me({},e);var r=e.container;r&&!lh(r)&&lh(r[0])&&(r=r[0]);var i=r?r._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];r&&(r._cyreg=i),i.cy=n;var a=Xt!==void 0&&r!==void 0&&!e.headless,s=e;s.layout=Me({name:a?"grid":"null"},s.layout),s.renderer=Me({name:a?"canvas":"null"},s.renderer);var u=function(p,m,g){return m!==void 0?m:g!==void 0?g:p},l=this._private={container:r,ready:!1,options:s,elements:new wn(this),listeners:[],aniEles:new wn(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:se(s.zoom)?s.zoom:1,pan:{x:tt(s.pan)&&se(s.pan.x)?s.pan.x:0,y:tt(s.pan)&&se(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(p,m){var g=p.some(h2);if(g)return Bs.all(p).then(m);m(p)};l.styleEnabled&&n.setStyle([]);var d=Me({},s,s.renderer);n.initRenderer(d);var f=function(p,m,g){n.notifications(!1);var v=n.mutableElements();v.length>0&&v.remove(),p!=null&&(tt(p)||bt(p))&&n.add(p),n.one("layoutready",function(b){n.notifications(!0),n.emit(b),n.one("load",m),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",g),n.emit("done")});var y=Me({},n._private.options.layout);y.eles=n.elements(),n.layout(y).run()};c([s.style,s.elements],function(h){var p=h[0],m=h[1];l.styleEnabled&&n.style().append(p),f(m,function(){n.startAnimationLoop(),l.ready=!0,xt(s.ready)&&n.on("ready",s.ready);for(var g=0;g<o.length;g++){var v=o[g];n.on("ready",v)}i&&(i.readies=[]),n.emit("ready")},s.done)})},vh=Hl.prototype;Me(vh,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Xt;var n=this._private.container.ownerDocument;return n===void 0||n==null?Xt:n.defaultView||Xt},mount:function(e){if(e!=null){var n=this,r=n._private,i=r.options;return!lh(e)&&lh(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=e,r.styleEnabled=!0,n.invalidateSize(),n.initRenderer(Me({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return di(this._private.options)},json:function(e){var n=this,r=n._private,i=n.mutableElements(),o=function(w){return n.getElementById(w.id())};if(tt(e)){if(n.startBatch(),e.elements){var a={},s=function(w,E){for(var C=[],D=[],I=0;I<w.length;I++){var _=w[I];if(!_.data.id){ft("cy.json() cannot handle elements without an ID attribute");continue}var T=""+_.data.id,x=n.getElementById(T);a[T]=!0,x.length!==0?D.push({ele:x,json:_}):(E&&(_.group=E),C.push(_))}n.add(C);for(var M=0;M<D.length;M++){var A=D[M],R=A.ele,O=A.json;R.json(O)}};if(bt(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],d=e.elements[c];bt(d)&&s(d,c)}var f=n.collection();i.filter(function(b){return!a[b.id()]}).forEach(function(b){b.isParent()?f.merge(b):b.remove()}),f.forEach(function(b){return b.children().move({parent:null})}),f.forEach(function(b){return o(b).remove()})}e.style&&n.style(e.style),e.zoom!=null&&e.zoom!==r.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&n.pan(e.pan),e.data&&n.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var m=h[p];e[m]!=null&&n[m](e[m])}return n.endBatch(),this}else{var g=!!e,v={};g?v.elements=this.elements().map(function(b){return b.json()}):(v.elements={},i.forEach(function(b){var w=b.group();v.elements[w]||(v.elements[w]=[]),v.elements[w].push(b.json())})),this._private.styleEnabled&&(v.style=n.style().json()),v.data=di(n.data());var y=r.options;return v.zoomingEnabled=r.zoomingEnabled,v.userZoomingEnabled=r.userZoomingEnabled,v.zoom=r.zoom,v.minZoom=r.minZoom,v.maxZoom=r.maxZoom,v.panningEnabled=r.panningEnabled,v.userPanningEnabled=r.userPanningEnabled,v.pan=di(r.pan),v.boxSelectionEnabled=r.boxSelectionEnabled,v.renderer=di(y.renderer),v.hideEdgesOnViewport=y.hideEdgesOnViewport,v.textureOnViewport=y.textureOnViewport,v.wheelSensitivity=y.wheelSensitivity,v.motionBlur=y.motionBlur,v.multiClickDebounceTime=y.multiClickDebounceTime,v}}});vh.$id=vh.getElementById;[hH,yH,Ux,N0,rh,wH,O0,ih,CH,xa,jl].forEach(function(t){Me(vh,t)});var SH={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},_H={maximal:!1,acyclic:!1},Es=function(e){return e.scratch("breadthfirst")},cT=function(e,n){return e.scratch("breadthfirst",n)};function $x(t){this.options=Me({},SH,_H,t)}$x.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=n.nodes().filter(function(_e){return _e.isChildless()}),i=n,o=t.directed,a=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,u=jn(s?t.boundingBox:structuredClone(e.extent())),l;if(ur(t.roots))l=t.roots;else if(bt(t.roots)){for(var c=[],d=0;d<t.roots.length;d++){var f=t.roots[d],h=e.getElementById(f);c.push(h)}l=e.collection(c)}else if(Ie(t.roots))l=e.$(t.roots);else if(o)l=r.roots();else{var p=n.components();l=e.collection();for(var m=function(){var ce=p[g],De=ce.maxDegree(!1),Ee=ce.filter(function(ke){return ke.degree(!1)===De});l=l.add(Ee)},g=0;g<p.length;g++)m()}var v=[],y={},b=function(ce,De){v[De]==null&&(v[De]=[]);var Ee=v[De].length;v[De].push(ce),cT(ce,{index:Ee,depth:De})},w=function(ce,De){var Ee=Es(ce),ke=Ee.depth,Se=Ee.index;v[ke][Se]=null,ce.isChildless()&&b(ce,De)};i.bfs({roots:l,directed:t.directed,visit:function(ce,De,Ee,ke,Se){var $e=ce[0],Xe=$e.id();$e.isChildless()&&b($e,Se),y[Xe]=!0}});for(var E=[],C=0;C<r.length;C++){var D=r[C];y[D.id()]||E.push(D)}var I=function(ce){for(var De=v[ce],Ee=0;Ee<De.length;Ee++){var ke=De[Ee];if(ke==null){De.splice(Ee,1),Ee--;continue}cT(ke,{depth:ce,index:Ee})}},_=function(ce,De){for(var Ee=Es(ce),ke=ce.incomers().filter(function(Oe){return Oe.isNode()&&n.has(Oe)}),Se=-1,$e=ce.id(),Xe=0;Xe<ke.length;Xe++){var it=ke[Xe],ot=Es(it);Se=Math.max(Se,ot.depth)}if(Ee.depth<=Se){if(!t.acyclic&&De[$e])return null;var at=Se+1;return w(ce,at),De[$e]=at,!0}return!1};if(o&&a){var T=[],x={},M=function(ce){return T.push(ce)},A=function(){return T.shift()};for(r.forEach(function(_e){return T.push(_e)});T.length>0;){var R=A(),O=_(R,x);if(O)R.outgoers().filter(function(_e){return _e.isNode()&&n.has(_e)}).forEach(M);else if(O===null){ft("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var k=0;if(t.avoidOverlap)for(var N=0;N<r.length;N++){var P=r[N],V=P.layoutDimensions(t),U=V.w,F=V.h;k=Math.max(k,U,F)}var B={},G=function(ce){if(B[ce.id()])return B[ce.id()];for(var De=Es(ce).depth,Ee=ce.neighborhood(),ke=0,Se=0,$e=0;$e<Ee.length;$e++){var Xe=Ee[$e];if(!(Xe.isEdge()||Xe.isParent()||!r.has(Xe))){var it=Es(Xe);if(it!=null){var ot=it.index,at=it.depth;if(!(ot==null||at==null)){var Oe=v[at].length;at<De&&(ke+=ot/Oe,Se++)}}}}return Se=Math.max(1,Se),ke=ke/Se,Se===0&&(ke=0),B[ce.id()]=ke,ke},Q=function(ce,De){var Ee=G(ce),ke=G(De),Se=Ee-ke;return Se===0?zT(ce.id(),De.id()):Se};t.depthSort!==void 0&&(Q=t.depthSort);for(var W=v.length,J=0;J<W;J++)v[J].sort(Q),I(J);for(var ne=[],le=0;le<E.length;le++)ne.push(E[le]);var X=function(){for(var ce=0;ce<W;ce++)I(ce)};ne.length&&(v.unshift(ne),W=v.length,X());for(var L=0,j=0;j<W;j++)L=Math.max(v[j].length,L);var $={x:u.x1+u.w/2,y:u.y1+u.h/2},Y=r.reduce(function(_e,ce){return(function(De){return{w:_e.w===-1?De.w:(_e.w+De.w)/2,h:_e.h===-1?De.h:(_e.h+De.h)/2}})(ce.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ae=Math.max(W===1?0:s?(u.h-t.padding*2-Y.h)/(W-1):(u.h-t.padding*2-Y.h)/(W+1),k),we=v.reduce(function(_e,ce){return Math.max(_e,ce.length)},0),Qe=function(ce){var De=Es(ce),Ee=De.depth,ke=De.index;if(t.circle){var Se=Math.min(u.w/2/W,u.h/2/W);Se=Math.max(Se,k);var $e=Se*Ee+Se-(W>0&&v[0].length<=3?Se/2:0),Xe=2*Math.PI/v[Ee].length*ke;return Ee===0&&v[0].length===1&&($e=1),{x:$.x+$e*Math.cos(Xe),y:$.y+$e*Math.sin(Xe)}}else{var it=v[Ee].length,ot=Math.max(it===1?0:s?(u.w-t.padding*2-Y.w)/((t.grid?we:it)-1):(u.w-t.padding*2-Y.w)/((t.grid?we:it)+1),k),at={x:$.x+(ke+1-(it+1)/2)*ot,y:$.y+(Ee+1-(W+1)/2)*ae};return at}},Fe={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Fe).indexOf(t.direction)===-1&&_t("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Fe).join(", ")));var Ae=function(ce){return U2(Qe(ce),u,Fe[t.direction])};return n.nodes().layoutPositions(this,t,Ae),this};var TH={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function zx(t){this.options=Me({},TH,t)}zx.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=jn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,d=0,f=0;f<o.length;f++){var h=o[f],p=h.layoutDimensions(e),m=p.w,g=p.h;d=Math.max(d,m,g)}if(se(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-d,o.length>1&&e.avoidOverlap){d*=1.75;var v=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),b=Math.sqrt(d*d/(v*v+y*y));c=Math.max(b,c)}var w=function(C,D){var I=e.startAngle+D*l*(i?1:-1),_=c*Math.cos(I),T=c*Math.sin(I),x={x:s.x+_,y:s.y+T};return x};return r.nodes().layoutPositions(this,e,w),this};var xH={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function qx(t){this.options=Me({},xH,t)}qx.prototype.run=function(){for(var t=this.options,e=t,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=jn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var d=o[c],f=void 0;f=e.concentric(d),u.push({value:f,node:d}),d._private.scratch.concentric=f}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h],m=p.layoutDimensions(e);l=Math.max(l,m.w,m.h)}u.sort(function(ae,we){return we.value-ae.value});for(var g=e.levelWidth(o),v=[[]],y=v[0],b=0;b<u.length;b++){var w=u[b];if(y.length>0){var E=Math.abs(y[0].value-w.value);E>=g&&(y=[],v.push(y))}y.push(w)}var C=l+e.minNodeSpacing;if(!e.avoidOverlap){var D=v.length>0&&v[0].length>1,I=Math.min(a.w,a.h)/2-C,_=I/(v.length+D?1:0);C=Math.min(C,_)}for(var T=0,x=0;x<v.length;x++){var M=v[x],A=e.sweep===void 0?2*Math.PI-2*Math.PI/M.length:e.sweep,R=M.dTheta=A/Math.max(1,M.length-1);if(M.length>1&&e.avoidOverlap){var O=Math.cos(R)-Math.cos(0),k=Math.sin(R)-Math.sin(0),N=Math.sqrt(C*C/(O*O+k*k));T=Math.max(N,T)}M.r=T,T+=C}if(e.equidistant){for(var P=0,V=0,U=0;U<v.length;U++){var F=v[U],B=F.r-V;P=Math.max(P,B)}V=0;for(var G=0;G<v.length;G++){var Q=v[G];G===0&&(V=Q.r),Q.r=V,V+=P}}for(var W={},J=0;J<v.length;J++)for(var ne=v[J],le=ne.dTheta,X=ne.r,L=0;L<ne.length;L++){var j=ne[L],$=e.startAngle+(n?1:-1)*le*L,Y={x:s.x+X*Math.cos($),y:s.y+X*Math.sin($)};W[j.node.id()]=Y}return i.nodes().layoutPositions(this,e,function(ae){var we=ae.id();return W[we]}),this};var p0,MH={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Lh(t){this.options=Me({},MH,t),this.options.layout=this;var e=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(r)}Lh.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,(t.animate===!0||t.animate===!1)&&n.emit({type:"layoutstart",layout:n}),t.debug===!0?p0=!0:p0=!1;var r=AH(e,n,t);p0&&NH(r),t.randomize&&OH(r);var i=Ni(),o=function(){kH(r,e,t),t.fit===!0&&e.fit(t.padding)},a=function(f){return!(n.stopped||f>=t.numIter||(PH(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var f=t.eles.nodes(),h=Wx(r,t,f);f.layoutPositions(n,t,h)}},u=0,l=!0;if(t.animate===!0){var c=function(){for(var f=0;l&&f<t.refresh;)l=a(u),u++,f++;if(!l)fT(r,t),s();else{var h=Ni();h-i>=t.animationThreshold&&o(),ch(c)}};c()}else{for(;l;)l=a(u),u++;fT(r,t),s()}return this};Lh.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Lh.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var AH=function(e,n,r){for(var i=r.eles.edges(),o=r.eles.nodes(),a=jn(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=r.eles.components(),l={},c=0;c<u.length;c++)for(var d=u[c],f=0;f<d.length;f++){var h=d[f];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var p=o[c],m=p.layoutDimensions(r),g={};g.isLocked=p.locked(),g.id=p.data("id"),g.parentId=p.data("parent"),g.cmptId=l[p.id()],g.children=[],g.positionX=p.position("x"),g.positionY=p.position("y"),g.offsetX=0,g.offsetY=0,g.height=m.w,g.width=m.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(p.style("padding")),g.padRight=parseFloat(p.style("padding")),g.padTop=parseFloat(p.style("padding")),g.padBottom=parseFloat(p.style("padding")),g.nodeRepulsion=xt(r.nodeRepulsion)?r.nodeRepulsion(p):r.nodeRepulsion,s.layoutNodes.push(g),s.idToIndex[g.id]=c}for(var v=[],y=0,b=-1,w=[],c=0;c<s.nodeSize;c++){var p=s.layoutNodes[c],E=p.parentId;E!=null?s.layoutNodes[s.idToIndex[E]].children.push(p.id):(v[++b]=p.id,w.push(p.id))}for(s.graphSet.push(w);y<=b;){var C=v[y++],D=s.idToIndex[C],h=s.layoutNodes[D],I=h.children;if(I.length>0){s.graphSet.push(I);for(var c=0;c<I.length;c++)v[++b]=I[c]}}for(var c=0;c<s.graphSet.length;c++)for(var _=s.graphSet[c],f=0;f<_.length;f++){var T=s.idToIndex[_[f]];s.indexToGraph[T]=c}for(var c=0;c<s.edgeSize;c++){var x=i[c],M={};M.id=x.data("id"),M.sourceId=x.data("source"),M.targetId=x.data("target");var A=xt(r.idealEdgeLength)?r.idealEdgeLength(x):r.idealEdgeLength,R=xt(r.edgeElasticity)?r.edgeElasticity(x):r.edgeElasticity,O=s.idToIndex[M.sourceId],k=s.idToIndex[M.targetId],N=s.indexToGraph[O],P=s.indexToGraph[k];if(N!=P){for(var V=RH(M.sourceId,M.targetId,s),U=s.graphSet[V],F=0,g=s.layoutNodes[O];U.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],F++;for(g=s.layoutNodes[k];U.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],F++;A*=F*r.nestingFactor}M.idealLength=A,M.elasticity=R,s.layoutEdges.push(M)}return s},RH=function(e,n,r){var i=Gx(e,n,0,r);return 2>i.count?0:i.graph},Gx=function(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var d=i.indexToGraph[i.idToIndex[c[0]]],f=Gx(e,n,d,i);if(f.count!==0)if(f.count===1){if(a++,a===2)break}else return f}}return{count:a,graph:r}},NH,OH=function(e,n){for(var r=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*i)}},Wx=function(e,n,r){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(r.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(n.boundingBox){var l=o.w===0?.5:(u.positionX-o.x1)/o.w,c=o.h===0?.5:(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},kH=function(e,n,r){var i=r.layout,o=r.eles.nodes(),a=Wx(e,r,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",r.ready),i.emit({type:"layoutready",layout:this}))},PH=function(e,n,r){FH(e,n),VH(e),jH(e,n),HH(e),UH(e)},FH=function(e,n){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];LH(s,l,e,n)}},dT=function(e){return-1+2*e*Math.random()},LH=function(e,n,r,i){var o=e.cmptId,a=n.cmptId;if(!(o!==a&&!r.isCompound)){var s=n.positionX-e.positionX,u=n.positionY-e.positionY,l=1;s===0&&u===0&&(s=dT(l),u=dT(l));var c=BH(e,n,s,u);if(c>0)var d=i.nodeOverlap*c,f=Math.sqrt(s*s+u*u),h=d*s/f,p=d*u/f;else var m=mh(e,s,u),g=mh(n,-1*s,-1*u),v=g.x-m.x,y=g.y-m.y,b=v*v+y*y,f=Math.sqrt(b),d=(e.nodeRepulsion+n.nodeRepulsion)/b,h=d*v/f,p=d*y/f;e.isLocked||(e.offsetX-=h,e.offsetY-=p),n.isLocked||(n.offsetX+=h,n.offsetY+=p)}},BH=function(e,n,r,i){if(r>0)var o=e.maxX-n.minX;else var o=n.maxX-e.minX;if(i>0)var a=e.maxY-n.minY;else var a=n.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},mh=function(e,n,r){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=r/n,l=a/s,c={};return n===0&&0<r||n===0&&0>r?(c.x=i,c.y=o+a/2,c):0<n&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*r/2/n,c):0>n&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*r/2/n,c):0<r&&(u<=-1*l||u>=l)?(c.x=i+a*n/2/r,c.y=o+a/2,c):(0>r&&(u<=-1*l||u>=l)&&(c.x=i-a*n/2/r,c.y=o-a/2),c)},VH=function(e,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var d=mh(a,l,c),f=mh(u,-1*l,-1*c),h=f.x-d.x,p=f.y-d.y,m=Math.sqrt(h*h+p*p),g=Math.pow(i.idealLength-m,2)/i.elasticity;if(m!==0)var v=g*h/m,y=g*p/m;else var v=0,y=0;a.isLocked||(a.offsetX+=v,a.offsetY+=y),u.isLocked||(u.offsetX-=v,u.offsetY-=y)}}},jH=function(e,n){if(n.gravity!==0)for(var r=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var d=0;d<a;d++){var f=e.layoutNodes[e.idToIndex[o[d]]];if(!f.isLocked){var h=s-f.positionX,p=u-f.positionY,m=Math.sqrt(h*h+p*p);if(m>r){var g=n.gravity*h/m,v=n.gravity*p/m;f.offsetX+=g,f.offsetY+=v}}}}},HH=function(e,n){var r=[],i=0,o=-1;for(r.push.apply(r,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=r[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,d=u.offsetY,f=0;f<l.length;f++){var h=e.layoutNodes[e.idToIndex[l[f]]];h.offsetX+=c,h.offsetY+=d,r[++o]=l[f]}u.offsetX=0,u.offsetY=0}}},UH=function(e,n){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length||i.isLocked)){var o=$H(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Zx(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},$H=function(e,n,r){var i=Math.sqrt(e*e+n*n);if(i>r)var o={x:r*e/i,y:r*n/i};else var o={x:e,y:n};return o},Zx=function(e,n){var r=e.parentId;if(r!=null){var i=n.layoutNodes[n.idToIndex[r]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return Zx(i,n)}},fT=function(e,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var f=c[d];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(y,b){return b.w*b.h-y.w*y.h});for(var h=0,p=0,m=0,g=0,v=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var d=0;d<c.length;d++){var f=c[d];f.isLocked||(f.positionX+=h-c.x1,f.positionY+=p-c.y1)}h+=c.w+n.componentSpacing,m+=c.w+n.componentSpacing,g=Math.max(g,c.h),m>v&&(p+=g+n.componentSpacing,h=0,m=0,g=0)}}},zH={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Yx(t){this.options=Me({},zH,t)}Yx.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=jn(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(o.h===0||o.w===0)r.nodes().layoutPositions(this,e,function(G){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(Q){if(Q==null)return Math.min(u,l);var W=Math.min(u,l);W==u?u=Q:l=Q},d=function(Q){if(Q==null)return Math.max(u,l);var W=Math.max(u,l);W==u?u=Q:l=Q},f=e.rows,h=e.cols!=null?e.cols:e.columns;if(f!=null&&h!=null)u=f,l=h;else if(f!=null&&h==null)u=f,l=Math.ceil(a/u);else if(f==null&&h!=null)l=h,u=Math.ceil(a/l);else if(l*u>a){var p=c(),m=d();(p-1)*m>=a?c(p-1):(m-1)*p>=a&&d(m-1)}else for(;l*u<a;){var g=c(),v=d();(v+1)*g>=a?d(v+1):c(g+1)}var y=o.w/l,b=o.h/u;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var w=0;w<i.length;w++){var E=i[w],C=E._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var D=E.layoutDimensions(e),I=e.avoidOverlapPadding,_=D.w+I,T=D.h+I;y=Math.max(y,_),b=Math.max(b,T)}for(var x={},M=function(Q,W){return!!x["c-"+Q+"-"+W]},A=function(Q,W){x["c-"+Q+"-"+W]=!0},R=0,O=0,k=function(){O++,O>=l&&(O=0,R++)},N={},P=0;P<i.length;P++){var V=i[P],U=e.position(V);if(U&&(U.row!==void 0||U.col!==void 0)){var F={row:U.row,col:U.col};if(F.col===void 0)for(F.col=0;M(F.row,F.col);)F.col++;else if(F.row===void 0)for(F.row=0;M(F.row,F.col);)F.row++;N[V.id()]=F,A(F.row,F.col)}}var B=function(Q,W){var J,ne;if(Q.locked()||Q.isParent())return!1;var le=N[Q.id()];if(le)J=le.col*y+y/2+o.x1,ne=le.row*b+b/2+o.y1;else{for(;M(R,O);)k();J=O*y+y/2+o.x1,ne=R*b+b/2+o.y1,A(R,O),k()}return{x:J,y:ne}};i.layoutPositions(this,e,B)}return this};var qH={ready:function(){},stop:function(){}};function ub(t){this.options=Me({},qH,t)}ub.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this};ub.prototype.stop=function(){return this};var GH={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Kx(t){this.options=Me({},GH,t)}Kx.prototype.run=function(){var t=this.options,e=t.eles,n=e.nodes(),r=xt(t.positions);function i(o){if(t.positions==null)return pB(o.position());if(r)return t.positions(o);var a=t.positions[o._private.data.id];return a??null}return n.layoutPositions(this,t,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var WH={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function Qx(t){this.options=Me({},WH,t)}Qx.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=jn(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,t,i),this};var ZH=[{name:"breadthfirst",impl:$x},{name:"circle",impl:zx},{name:"concentric",impl:qx},{name:"cose",impl:Lh},{name:"grid",impl:Yx},{name:"null",impl:ub},{name:"preset",impl:Kx},{name:"random",impl:Qx}];function Xx(t){this.options=t,this.notifications=0}var hT=function(){},pT=function(){throw new Error("A headless instance can not render images")};Xx.prototype={recalculateRenderedStyle:hT,notify:function(){this.notifications++},init:hT,isHeadless:function(){return!0},png:pT,jpg:pT};var lb={};lb.arrowShapeWidth=.3;lb.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(l,c,d,f,h,p,m){var g=h.x-d/2-m,v=h.x+d/2+m,y=h.y-d/2-m,b=h.y+d/2+m,w=g<=l&&l<=v&&y<=c&&c<=b;return w},r=function(l,c,d,f,h){var p=l*Math.cos(f)-c*Math.sin(f),m=l*Math.sin(f)+c*Math.cos(f),g=p*d,v=m*d,y=g+h.x,b=v+h.y;return{x:y,y:b}},i=function(l,c,d,f){for(var h=[],p=0;p<l.length;p+=2){var m=l[p],g=l[p+1];h.push(r(m,g,c,d,f))}return h},o=function(l){for(var c=[],d=0;d<l.length;d++){var f=l[d];c.push(f.x,f.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Ie(c)&&(c=t[c]),t[l]=Me({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(f,h,p,m,g,v){var y=o(i(this.points,p+2*v,m,g)),b=er(f,h,y);return b},roughCollide:n,draw:function(f,h,p,m){var g=i(this.points,h,p,m);e.arrowShapeImpl("polygon")(f,g)},spacing:function(f){return 0},gap:a},c)};s("none",{collide:dh,roughCollide:dh,draw:Z0,spacing:xS,gap:xS}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=this.controlPoint,g=r(m[0],m[1],c,d,f);e.arrowShapeImpl(this.name)(l,p,g)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,d,f,h,p,m){var g=o(i(this.points,d+2*m,f,h)),v=o(i(this.pointsTee,d+2*m,f,h)),y=er(l,c,g)||er(l,c,v);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=i(this.pointsTee,c,d,f);e.arrowShapeImpl(this.name)(l,p,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,d,f,h,p,m){var g=h,v=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*m)*this.radius,2),y=o(i(this.points,d+2*m,f,h));return er(l,c,y)||v},draw:function(l,c,d,f,h){var p=i(this.pointsTr,c,d,f);e.arrowShapeImpl(this.name)(l,p,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var d=this.baseCrossLinePts.slice(),f=c/l,h=3,p=5;return d[h]=d[h]-f,d[p]=d[p]-f,d},collide:function(l,c,d,f,h,p,m){var g=o(i(this.points,d+2*m,f,h)),v=o(i(this.crossLinePts(d,p),d+2*m,f,h)),y=er(l,c,g)||er(l,c,v);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=i(this.crossLinePts(c,h),c,d,f);e.arrowShapeImpl(this.name)(l,p,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,d,f,h,p,m){var g=h,v=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*m)*this.radius,2);return v},draw:function(l,c,d,f,h){e.arrowShapeImpl(this.name)(l,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Aa={};Aa.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom(),l=((t-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};Aa.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=this.cy.window().getComputedStyle(t),r=function(v){return parseFloat(n.getPropertyValue(v))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=t.clientWidth,s=t.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,d=e.width/(a+c),f=a-u,h=s-l,p=e.left+i.left+o.left,m=e.top+i.top+o.top;return this.containerBB=[p,m,f,h,d]};Aa.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Aa.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]};Aa.findNearestElements=function(t,e,n,r){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(r?24:8)/u,d=(r?8:2)/u,f=(r?8:2)/u,h=1/0,p,m;n&&(a=a.interactive);function g(D,I){if(D.isNode()){if(m)return;m=D,s.push(D)}if(D.isEdge()&&(I==null||I<h))if(p){if(p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var _=0;_<s.length;_++)if(s[_].isEdge()){s[_]=D,p=D,h=I??h;break}}}else s.push(D),p=D,h=I??h}function v(D){var I=D.outerWidth()+2*d,_=D.outerHeight()+2*d,T=I/2,x=_/2,M=D.position(),A=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,R=D._private.rscratch;if(M.x-T<=t&&t<=M.x+T&&M.y-x<=e&&e<=M.y+x){var O=o.nodeShapes[i.getNodeShape(D)];if(O.checkPoint(t,e,0,I,_,M.x,M.y,A,R))return g(D,0),!0}}function y(D){var I=D._private,_=I.rscratch,T=D.pstyle("width").pfValue,x=D.pstyle("arrow-scale").value,M=T/2+c,A=M*M,R=M*2,P=I.source,V=I.target,O;if(_.edgeType==="segments"||_.edgeType==="straight"||_.edgeType==="haystack"){for(var k=_.allpts,N=0;N+3<k.length;N+=2)if(xB(t,e,k[N],k[N+1],k[N+2],k[N+3],R)&&A>(O=OB(t,e,k[N],k[N+1],k[N+2],k[N+3])))return g(D,O),!0}else if(_.edgeType==="bezier"||_.edgeType==="multibezier"||_.edgeType==="self"||_.edgeType==="compound"){for(var k=_.allpts,N=0;N+5<_.allpts.length;N+=4)if(MB(t,e,k[N],k[N+1],k[N+2],k[N+3],k[N+4],k[N+5],R)&&A>(O=NB(t,e,k[N],k[N+1],k[N+2],k[N+3],k[N+4],k[N+5])))return g(D,O),!0}for(var P=P||I.source,V=V||I.target,U=i.getArrowWidth(T,x),F=[{name:"source",x:_.arrowStartX,y:_.arrowStartY,angle:_.srcArrowAngle},{name:"target",x:_.arrowEndX,y:_.arrowEndY,angle:_.tgtArrowAngle},{name:"mid-source",x:_.midX,y:_.midY,angle:_.midsrcArrowAngle},{name:"mid-target",x:_.midX,y:_.midY,angle:_.midtgtArrowAngle}],N=0;N<F.length;N++){var B=F[N],G=o.arrowShapes[D.pstyle(B.name+"-arrow-shape").value],Q=D.pstyle("width").pfValue;if(G.roughCollide(t,e,U,B.angle,{x:B.x,y:B.y},Q,c)&&G.collide(t,e,U,B.angle,{x:B.x,y:B.y},Q,c))return g(D),!0}l&&s.length>0&&(v(P),v(V))}function b(D,I,_){return Jn(D,I,_)}function w(D,I){var _=D._private,T=f,x;I?x=I+"-":x="",D.boundingBox();var M=_.labelBounds[I||"main"],A=D.pstyle(x+"label").value,R=D.pstyle("text-events").strValue==="yes";if(!(!R||!A)){var O=b(_.rscratch,"labelX",I),k=b(_.rscratch,"labelY",I),N=b(_.rscratch,"labelAngle",I),P=D.pstyle(x+"text-margin-x").pfValue,V=D.pstyle(x+"text-margin-y").pfValue,U=M.x1-T-P,F=M.x2+T-P,B=M.y1-T-V,G=M.y2+T-V;if(N){var Q=Math.cos(N),W=Math.sin(N),J=function(Y,ae){return Y=Y-O,ae=ae-k,{x:Y*Q-ae*W+O,y:Y*W+ae*Q+k}},ne=J(U,B),le=J(U,G),X=J(F,B),L=J(F,G),j=[ne.x+P,ne.y+V,X.x+P,X.y+V,L.x+P,L.y+V,le.x+P,le.y+V];if(er(t,e,j))return g(D),!0}else if(co(M,t,e))return g(D),!0}}for(var E=a.length-1;E>=0;E--){var C=a[E];C.isNode()?v(C)||w(C):y(C)||w(C)||w(C,"source")||w(C,"target")}return s};Aa.getAllInBox=function(t,e,n,r){var i=this.getCachedZSortedEles().interactive,o=this.cy.zoom(),a=2/o,s=[],u=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),d=Math.max(e,r);t=u,n=l,e=c,r=d;var f=jn({x1:t,y1:e,x2:n,y2:r}),h=[{x:f.x1,y:f.y1},{x:f.x2,y:f.y1},{x:f.x2,y:f.y2},{x:f.x1,y:f.y2}],p=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function m(Y,ae,we){return Jn(Y,ae,we)}function g(Y,ae){var we=Y._private,Qe=a,Fe="";Y.boundingBox();var Ae=we.labelBounds.main;if(!Ae)return null;var _e=m(we.rscratch,"labelX",ae),ce=m(we.rscratch,"labelY",ae),De=m(we.rscratch,"labelAngle",ae),Ee=Y.pstyle(Fe+"text-margin-x").pfValue,ke=Y.pstyle(Fe+"text-margin-y").pfValue,Se=Ae.x1-Qe-Ee,$e=Ae.x2+Qe-Ee,Xe=Ae.y1-Qe-ke,it=Ae.y2+Qe-ke;if(De){var ot=Math.cos(De),at=Math.sin(De),Oe=function(Z,S){return Z=Z-_e,S=S-ce,{x:Z*ot-S*at+_e,y:Z*at+S*ot+ce}};return[Oe(Se,Xe),Oe($e,Xe),Oe($e,it),Oe(Se,it)]}else return[{x:Se,y:Xe},{x:$e,y:Xe},{x:$e,y:it},{x:Se,y:it}]}function v(Y,ae,we,Qe){function Fe(Ae,_e,ce){return(ce.y-Ae.y)*(_e.x-Ae.x)>(_e.y-Ae.y)*(ce.x-Ae.x)}return Fe(Y,we,Qe)!==Fe(ae,we,Qe)&&Fe(Y,ae,we)!==Fe(Y,ae,Qe)}for(var y=0;y<i.length;y++){var b=i[y];if(b.isNode()){var w=b,E=w.pstyle("text-events").strValue==="yes",C=w.pstyle("box-selection").strValue,D=w.pstyle("box-select-labels").strValue==="yes";if(C==="none")continue;var I=(C==="overlap"||D)&&E,_=w.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:I});if(C==="contain"){var T=!1;if(D&&E){var x=g(w);x&&fy(x,h)&&(s.push(w),T=!0)}!T&&ox(f,_)&&s.push(w)}else if(C==="overlap"&&X0(f,_)){var M=w.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),A=[{x:M.x1,y:M.y1},{x:M.x2,y:M.y1},{x:M.x2,y:M.y2},{x:M.x1,y:M.y2}];if(fy(A,h))s.push(w);else{var R=g(w);R&&fy(R,h)&&s.push(w)}}}else{var O=b,k=O._private,N=k.rscratch,P=O.pstyle("box-selection").strValue;if(P==="none")continue;if(P==="contain"){if(N.startX!=null&&N.startY!=null&&!co(f,N.startX,N.startY)||N.endX!=null&&N.endY!=null&&!co(f,N.endX,N.endY))continue;if(N.edgeType==="bezier"||N.edgeType==="multibezier"||N.edgeType==="self"||N.edgeType==="compound"||N.edgeType==="segments"||N.edgeType==="haystack"){for(var V=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts,U=!0,F=0;F<V.length;F++)if(!OS(f,V[F])){U=!1;break}U&&s.push(O)}else N.edgeType==="straight"&&s.push(O)}else if(P==="overlap"){var B=!1;if(N.startX!=null&&N.startY!=null&&N.endX!=null&&N.endY!=null&&(co(f,N.startX,N.startY)||co(f,N.endX,N.endY)))s.push(O),B=!0;else if(!B&&N.edgeType==="haystack"){for(var G=k.rstyle.haystackPts,Q=0;Q<G.length;Q++)if(OS(f,G[Q])){s.push(O),B=!0;break}}if(!B){var W=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts;if((!W||W.length<2)&&N.edgeType==="straight"&&N.startX!=null&&N.startY!=null&&N.endX!=null&&N.endY!=null&&(W=[{x:N.startX,y:N.startY},{x:N.endX,y:N.endY}]),!W||W.length<2)continue;for(var J=0;J<W.length-1;J++){for(var ne=W[J],le=W[J+1],X=0;X<p.length;X++){var L=Zt(p[X],2),j=L[0],$=L[1];if(v(ne,le,j,$)){s.push(O),B=!0;break}}if(B)break}}}}}return s};var yh={};yh.calculateArrowAngles=function(t){var e=t._private.rscratch,n=e.edgeType==="haystack",r=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,d,f,h,v,y;if(n?(c=e.haystackPts[0],d=e.haystackPts[1],f=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,f=e.arrowEndX,h=e.arrowEndY),v=e.midX,y=e.midY,o)u=c-e.segpts[0],l=d-e.segpts[1];else if(i||a||s||r){var p=e.allpts,m=un(p[0],p[2],p[4],.1),g=un(p[1],p[3],p[5],.1);u=c-m,l=d-g}else u=c-v,l=d-y;e.srcArrowAngle=jf(u,l);var v=e.midX,y=e.midY;if(n&&(v=(c+f)/2,y=(d+h)/2),u=f-c,l=h-d,o){var p=e.allpts;if(p.length/2%2===0){var b=p.length/2,w=b-2;u=p[b]-p[w],l=p[b+1]-p[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=p.length/2-1,w=b-2;u=p[b]-p[w],l=p[b+1]-p[w+1]}}else if(i||a||s){var p=e.allpts,E=e.ctrlpts,C,D,I,_;if(E.length/2%2===0){var T=p.length/2-1,x=T+2,M=x+2;C=un(p[T],p[x],p[M],0),D=un(p[T+1],p[x+1],p[M+1],0),I=un(p[T],p[x],p[M],1e-4),_=un(p[T+1],p[x+1],p[M+1],1e-4)}else{var x=p.length/2-1,T=x-2,M=x+2;C=un(p[T],p[x],p[M],.4999),D=un(p[T+1],p[x+1],p[M+1],.4999),I=un(p[T],p[x],p[M],.5),_=un(p[T+1],p[x+1],p[M+1],.5)}u=I-C,l=_-D}if(e.midtgtArrowAngle=jf(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var p=e.allpts;if(p.length/2%2!==0){if(!e.isRound){var b=p.length/2-1,A=b+2;u=-(p[A]-p[b]),l=-(p[A+1]-p[b+1])}}}if(e.midsrcArrowAngle=jf(u,l),o)u=f-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(i||a||s||r){var p=e.allpts,R=p.length,m=un(p[R-6],p[R-4],p[R-2],.9),g=un(p[R-5],p[R-3],p[R-1],.9);u=f-m,l=h-g}else u=f-v,l=h-y;e.tgtArrowAngle=jf(u,l)};yh.getArrowWidth=yh.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(t*13.37,.9),29)*e,n[t+", "+e]=r,r)};var k0,P0,ci={},wr={},gT,vT,Ca,oh,Mi,ma,Da,ui,Cs,Zf,Jx,e1,F0,L0,mT,yT=function(e,n,r){r.x=n.x-e.x,r.y=n.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},YH=function(e,n){n.x=e.x*-1,n.y=e.y*-1,n.nx=e.nx*-1,n.ny=e.ny*-1,n.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},KH=function(e,n,r,i,o){if(e!==mT?yT(n,e,ci):YH(wr,ci),yT(n,r,wr),gT=ci.nx*wr.ny-ci.ny*wr.nx,vT=ci.nx*wr.nx-ci.ny*-wr.ny,Mi=Math.asin(Math.max(-1,Math.min(1,gT))),Math.abs(Mi)<1e-6){k0=n.x,P0=n.y,Da=Cs=0;return}Ca=1,oh=!1,vT<0?Mi<0?Mi=Math.PI+Mi:(Mi=Math.PI-Mi,Ca=-1,oh=!0):Mi>0&&(Ca=-1,oh=!0),n.radius!==void 0?Cs=n.radius:Cs=i,ma=Mi/2,Zf=Math.min(ci.len/2,wr.len/2),o?(ui=Math.abs(Math.cos(ma)*Cs/Math.sin(ma)),ui>Zf?(ui=Zf,Da=Math.abs(ui*Math.sin(ma)/Math.cos(ma))):Da=Cs):(ui=Math.min(Zf,Cs),Da=Math.abs(ui*Math.sin(ma)/Math.cos(ma))),F0=n.x+wr.nx*ui,L0=n.y+wr.ny*ui,k0=F0-wr.ny*Da*Ca,P0=L0+wr.nx*Da*Ca,Jx=n.x+ci.nx*ui,e1=n.y+ci.ny*ui,mT=n};function t1(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function cb(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(KH(t,e,n,r,i),{cx:k0,cy:P0,radius:Da,startX:Jx,startY:e1,stopX:F0,stopY:L0,startAngle:ci.ang+Math.PI/2*Ca,endAngle:wr.ang-Math.PI/2*Ca,counterClockwise:oh})}var Ul=.01,QH=Math.sqrt(2*Ul),An={};An.findMidptPtsEtc=function(t,e){var n=e.posPts,r=e.intersectionPts,i=e.vectorNormInverse,o,a=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(E,C,D,I){var _=I-C,T=D-E,x=Math.sqrt(T*T+_*_);return{x:-_/x,y:T/x}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":o=n;break;case"intersection":o=r;break;case"endpoints":{if(u){var d=this.manualEndptToPx(t.source()[0],a),f=Zt(d,2),h=f[0],p=f[1],m=this.manualEndptToPx(t.target()[0],s),g=Zt(m,2),v=g[0],y=g[1],b={x1:h,y1:p,x2:v,y2:y};i=l(h,p,v,y),o=b}else ft("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=r;break}}return{midptPts:o,vectorNormInverse:i}};An.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),d=s.width(),f=a.height(),h=s.height(),p=n.pstyle("haystack-radius").value,m=p/2;i.haystackPts=i.allpts=[i.source.x*c*m+u.x,i.source.y*f*m+u.y,i.target.x*d*m+l.x,i.target.y*h*m+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};An.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),o=t.pstyle("segment-radii"),a=t.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var d=r.pfValue[c],f=i.pfValue[c],h=1-d,p=d,m=this.findMidptPtsEtc(t,e),g=m.midptPts,v=m.vectorNormInverse,y={x:g.x1*h+g.x2*p,y:g.y1*h+g.y2*p};n.segpts.push(y.x+v.x*f,y.y+v.y*f),n.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),n.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};An.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,d=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var f=n,h=d;r&&(f=0,h=u);var p=l-Math.PI/2,m=p-c/2,g=p+c/2,v=l+"_"+c;f=o[v]===void 0?o[v]=0:++o[v],i.ctrlpts=[a.x+Math.cos(m)*1.4*h*(f/3+1),a.y+Math.sin(m)*1.4*h*(f/3+1),a.x+Math.cos(g)*1.4*h*(f/3+1),a.y+Math.sin(g)*1.4*h*(f/3+1)]};An.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,d=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),h=f?f.pfValue[0]:void 0,p=n,m=d;r&&(p=0,m=h);var g=50,v={x:o.x-s/2,y:o.y-u/2},y={x:a.x-l/2,y:a.y-c/2},b={x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},w=.5,E=Math.max(w,Math.log(s*Ul)),C=Math.max(w,Math.log(l*Ul));i.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*m*(p/3+1)*E,b.x-(1+Math.pow(g,1.12)/100)*m*(p/3+1)*C,b.y]};An.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};An.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,d=u.value[0],f=r;o.edgeType=f?"multibezier":"bezier",o.ctrlpts=[];for(var h=0;h<l;h++){var p=(.5-e.eles.length/2+n)*a*(i?-1:1),m=void 0,g=Q0(p);f&&(c=s?s.pfValue[h]:a,d=u.value[h]),r?m=c:m=c!==void 0?g*c:void 0;var v=m!==void 0?m:p,y=1-d,b=d,w=this.findMidptPtsEtc(t,e),E=w.midptPts,C=w.vectorNormInverse,D={x:E.x1*y+E.x2*b,y:E.y1*y+E.y2*b};o.ctrlpts.push(D.x+C.x*v,D.y+C.y*v)}};An.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,d=e.srcW,f=e.srcH,h=e.tgtW,p=e.tgtH,m=t.pstyle("edge-distances").value,g=m!=="node-position",v=t.pstyle("taxi-direction").value,y=v,b=t.pstyle("taxi-turn"),w=b.units==="%",E=b.pfValue,C=E<0,D=t.pstyle("taxi-turn-min-distance").pfValue,I=g?(d+h)/2:0,_=g?(f+p)/2:0,T=c.x2-c.x1,x=c.y2-c.y1,M=function(S,H){return S>0?Math.max(S-H,0):Math.min(S+H,0)},A=M(T,I),R=M(x,_),O=!1;y===l?v=Math.abs(A)>Math.abs(R)?i:r:y===u||y===s?(v=r,O=!0):(y===o||y===a)&&(v=i,O=!0);var k=v===r,N=k?R:A,P=k?x:T,V=Q0(P),U=!1;!(O&&(w||C))&&(y===s&&P<0||y===u&&P>0||y===o&&P>0||y===a&&P<0)&&(V*=-1,N=V*Math.abs(N),U=!0);var F;if(w){var B=E<0?1+E:E;F=B*N}else{var G=E<0?N:0;F=G+E*V}var Q=function(S){return Math.abs(S)<D||Math.abs(S)>=Math.abs(N)},W=Q(F),J=Q(Math.abs(N)-Math.abs(F)),ne=W||J;if(ne&&!U)if(k){var le=Math.abs(P)<=f/2,X=Math.abs(T)<=h/2;if(le){var L=(c.x1+c.x2)/2,j=c.y1,$=c.y2;n.segpts=[L,j,L,$]}else if(X){var Y=(c.y1+c.y2)/2,ae=c.x1,we=c.x2;n.segpts=[ae,Y,we,Y]}else n.segpts=[c.x1,c.y2]}else{var Qe=Math.abs(P)<=d/2,Fe=Math.abs(x)<=p/2;if(Qe){var Ae=(c.y1+c.y2)/2,_e=c.x1,ce=c.x2;n.segpts=[_e,Ae,ce,Ae]}else if(Fe){var De=(c.x1+c.x2)/2,Ee=c.y1,ke=c.y2;n.segpts=[De,Ee,De,ke]}else n.segpts=[c.x2,c.y1]}else if(k){var Se=c.y1+F+(g?f/2*V:0),$e=c.x1,Xe=c.x2;n.segpts=[$e,Se,Xe,Se]}else{var it=c.x1+F+(g?d/2*V:0),ot=c.y1,at=c.y2;n.segpts=[it,ot,it,at]}if(n.isRound){var Oe=t.pstyle("taxi-radius").value,ge=t.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(Oe),n.isArcRadius=new Array(n.segpts.length/2).fill(ge)}};An.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if(n.edgeType==="bezier"){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,f=e.tgtCornerRadius,h=e.srcRs,p=e.tgtRs,m=!se(n.startX)||!se(n.startY),g=!se(n.arrowStartX)||!se(n.arrowStartY),v=!se(n.endX)||!se(n.endY),y=!se(n.arrowEndX)||!se(n.arrowEndY),b=3,w=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,E=b*w,C=_a({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),D=C<E,I=_a({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),_=I<E,T=!1;if(m||g||D){T=!0;var x={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},M=Math.sqrt(x.x*x.x+x.y*x.y),A={x:x.x/M,y:x.y/M},R=Math.max(o,a),O={x:n.ctrlpts[0]+A.x*2*R,y:n.ctrlpts[1]+A.y*2*R},k=l.intersectLine(r.x,r.y,o,a,O.x,O.y,0,d,h);D?(n.ctrlpts[0]=n.ctrlpts[0]+A.x*(E-C),n.ctrlpts[1]=n.ctrlpts[1]+A.y*(E-C)):(n.ctrlpts[0]=k[0]+A.x*E,n.ctrlpts[1]=k[1]+A.y*E)}if(v||y||_){T=!0;var N={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},P=Math.sqrt(N.x*N.x+N.y*N.y),V={x:N.x/P,y:N.y/P},U=Math.max(o,a),F={x:n.ctrlpts[0]+V.x*2*U,y:n.ctrlpts[1]+V.y*2*U},B=c.intersectLine(i.x,i.y,s,u,F.x,F.y,0,f,p);_?(n.ctrlpts[0]=n.ctrlpts[0]+V.x*(E-I),n.ctrlpts[1]=n.ctrlpts[1]+V.y*(E-I)):(n.ctrlpts[0]=B[0]+V.x*E,n.ctrlpts[1]=B[1]+V.y*E)}T&&this.findEndpoints(t)}};An.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);e.allpts.push(e.endX,e.endY);var r,i;e.ctrlpts.length/2%2===0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,i=.5,e.midX=un(e.allpts[r],e.allpts[r+2],e.allpts[r+4],i),e.midY=un(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(cb({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},f=e.roundCorners[c/2];if(f.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=d.x,e.midY=d.y,e.midVector=[d.y-h.y,h.x-d.x]}else{var p=[d.x-f.cx,d.y-f.cy],m=f.radius/Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));p=p.map(function(g){return g*m}),e.midX=f.cx+p[0],e.midY=f.cy+p[1],e.midVector=p}}}}};An.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||se(e.startX)&&se(e.startY)&&se(e.endX)&&se(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,ft("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};An.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),o=new Ri,a=function(_,T){return[].concat(uh(_),[T?1:0]).join("-")},s=[],u=[],l=0;l<t.length;l++){var c=t[l],d=c._private,f=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(f==="haystack"){u.push(c);continue}var h=f==="unbundled-bezier"||lo(f,"segments")||f==="straight"||f==="straight-triangle"||lo(f,"taxi"),p=f==="unbundled-bezier"||f==="bezier",m=d.source,g=d.target,v=m.poolIndex(),y=g.poolIndex(),b=[v,y].sort(),w=a(b,h),E=o.get(w);E==null&&(E={eles:[]},s.push({pairId:b,edgeIsUnbundled:h}),o.set(w,E)),E.eles.push(c),h&&(E.hasUnbundled=!0),p&&(E.hasBezier=!0)}}for(var C=function(){var _=s[D],T=_.pairId,x=_.edgeIsUnbundled,M=a(T,x),A=o.get(M),R;if(!A.hasUnbundled){var O=A.eles[0].parallelEdges().filter(function(ge){return ge.isBundledBezier()});Y0(A.eles),O.forEach(function(ge){return A.eles.push(ge)}),A.eles.sort(function(ge,Z){return ge.poolIndex()-Z.poolIndex()})}var k=A.eles[0],N=k.source(),P=k.target();if(N.poolIndex()>P.poolIndex()){var V=N;N=P,P=V}var U=A.srcPos=N.position(),F=A.tgtPos=P.position(),B=A.srcW=N.outerWidth(),G=A.srcH=N.outerHeight(),Q=A.tgtW=P.outerWidth(),W=A.tgtH=P.outerHeight(),J=A.srcShape=n.nodeShapes[e.getNodeShape(N)],ne=A.tgtShape=n.nodeShapes[e.getNodeShape(P)],le=A.srcCornerRadius=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue,X=A.tgtCornerRadius=P.pstyle("corner-radius").value==="auto"?"auto":P.pstyle("corner-radius").pfValue,L=A.tgtRs=P._private.rscratch,j=A.srcRs=N._private.rscratch;A.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var $=0;$<A.eles.length;$++){var Y=A.eles[$],ae=Y[0]._private.rscratch,we=Y.pstyle("curve-style").value,Qe=we==="unbundled-bezier"||lo(we,"segments")||lo(we,"taxi"),Fe=!N.same(Y.source());if(!A.calculatedIntersection&&N!==P&&(A.hasBezier||A.hasUnbundled)){A.calculatedIntersection=!0;var Ae=J.intersectLine(U.x,U.y,B,G,F.x,F.y,0,le,j),_e=A.srcIntn=Ae,ce=ne.intersectLine(F.x,F.y,Q,W,U.x,U.y,0,X,L),De=A.tgtIntn=ce,Ee=A.intersectionPts={x1:Ae[0],x2:ce[0],y1:Ae[1],y2:ce[1]},ke=A.posPts={x1:U.x,x2:F.x,y1:U.y,y2:F.y},Se=ce[1]-Ae[1],$e=ce[0]-Ae[0],Xe=Math.sqrt($e*$e+Se*Se);se(Xe)&&Xe>=QH||(Xe=Math.sqrt(Math.max($e*$e,Ul)+Math.max(Se*Se,Ul)));var it=A.vector={x:$e,y:Se},ot=A.vectorNorm={x:it.x/Xe,y:it.y/Xe},at={x:-ot.y,y:ot.x};A.nodesOverlap=!se(Xe)||ne.checkPoint(Ae[0],Ae[1],0,Q,W,F.x,F.y,X,L)||J.checkPoint(ce[0],ce[1],0,B,G,U.x,U.y,le,j),A.vectorNormInverse=at,R={nodesOverlap:A.nodesOverlap,dirCounts:A.dirCounts,calculatedIntersection:!0,hasBezier:A.hasBezier,hasUnbundled:A.hasUnbundled,eles:A.eles,srcPos:F,srcRs:L,tgtPos:U,tgtRs:j,srcW:Q,srcH:W,tgtW:B,tgtH:G,srcIntn:De,tgtIntn:_e,srcShape:ne,tgtShape:J,posPts:{x1:ke.x2,y1:ke.y2,x2:ke.x1,y2:ke.y1},intersectionPts:{x1:Ee.x2,y1:Ee.y2,x2:Ee.x1,y2:Ee.y1},vector:{x:-it.x,y:-it.y},vectorNorm:{x:-ot.x,y:-ot.y},vectorNormInverse:{x:-at.x,y:-at.y}}}var Oe=Fe?R:A;ae.nodesOverlap=Oe.nodesOverlap,ae.srcIntn=Oe.srcIntn,ae.tgtIntn=Oe.tgtIntn,ae.isRound=we.startsWith("round"),i&&(N.isParent()||N.isChild()||P.isParent()||P.isChild())&&(N.parents().anySame(P)||P.parents().anySame(N)||N.same(P)&&N.isParent())?e.findCompoundLoopPoints(Y,Oe,$,Qe):N===P?e.findLoopPoints(Y,Oe,$,Qe):we.endsWith("segments")?e.findSegmentsPoints(Y,Oe):we.endsWith("taxi")?e.findTaxiPoints(Y,Oe):we==="straight"||!Qe&&A.eles.length%2===1&&$===Math.floor(A.eles.length/2)?e.findStraightEdgePoints(Y):e.findBezierPoints(Y,Oe,$,Qe,Fe),e.findEndpoints(Y),e.tryToCorrectInvalidPoints(Y,Oe),e.checkForInvalidEdgeWarning(Y),e.storeAllpts(Y),e.storeEdgeProjections(Y),e.calculateArrowAngles(Y),e.recalculateEdgeLabelProjections(Y),e.calculateLabelAngles(Y)}},D=0;D<s.length;D++)C();this.findHaystackPoints(u)}};function n1(t){var e=[];if(t!=null){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}An.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="segments")return n1(e.segpts)};An.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return n1(e.ctrlpts)};An.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Xl={};Xl.manualEndptToPx=function(t,e){var n=this,r=t.position(),i=t.outerWidth(),o=t.outerHeight(),a=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=r.x,s[1]+=r.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[r.x+Math.cos(u)*l,r.y+Math.sin(u)*l];return n.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,i,o,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,a)}};Xl.findEndpoints=function(t){var e,n,r,i,o=this,a,s=t.source()[0],u=t.target()[0],l=s.position(),c=u.position(),d=t.pstyle("target-arrow-shape").value,f=t.pstyle("source-arrow-shape").value,h=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,m=s._private.rscratch,g=u._private.rscratch,v=t.pstyle("curve-style").value,y=t._private.rscratch,b=y.edgeType,w=lo(v,"taxi"),E=b==="self"||b==="compound",C=b==="bezier"||b==="multibezier"||E,D=b!=="bezier",I=b==="straight"||b==="segments",_=b==="segments",T=C||D||I,x=E||w,M=t.pstyle("source-endpoint"),A=x?"outside-to-node":M.value,R=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,O=t.pstyle("target-endpoint"),k=x?"outside-to-node":O.value,N=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;y.srcManEndpt=M,y.tgtManEndpt=O;var P,V,U,F,B=(e=(O==null||(n=O.pfValue)===null||n===void 0?void 0:n.length)===2?O.pfValue:null)!==null&&e!==void 0?e:[0,0],G=(r=(M==null||(i=M.pfValue)===null||i===void 0?void 0:i.length)===2?M.pfValue:null)!==null&&r!==void 0?r:[0,0];if(C){var Q=[y.ctrlpts[0],y.ctrlpts[1]],W=D?[y.ctrlpts[y.ctrlpts.length-2],y.ctrlpts[y.ctrlpts.length-1]]:Q;P=W,V=Q}else if(I){var J=_?y.segpts.slice(0,2):[c.x+B[0],c.y+B[1]],ne=_?y.segpts.slice(y.segpts.length-2):[l.x+G[0],l.y+G[1]];P=ne,V=J}if(k==="inside-to-node")a=[c.x,c.y];else if(O.units)a=this.manualEndptToPx(u,O);else if(k==="outside-to-line")a=y.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?U=P:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(U=[l.x,l.y]),a=o.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),U[0],U[1],0,N,g),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var le=u._private.rscratch,X=le.labelWidth,L=le.labelHeight,j=le.labelX,$=le.labelY,Y=X/2,ae=L/2,we=u.pstyle("text-valign").value;we==="top"?$-=ae:we==="bottom"&&($+=ae);var Qe=u.pstyle("text-halign").value;Qe==="left"?j-=Y:Qe==="right"&&(j+=Y);var Fe=Ll(U[0],U[1],[j-Y,$-ae,j+Y,$-ae,j+Y,$+ae,j-Y,$+ae],c.x,c.y);if(Fe.length>0){var Ae=l,_e=wa(Ae,Ts(a)),ce=wa(Ae,Ts(Fe)),De=_e;if(ce<_e&&(a=Fe,De=ce),Fe.length>2){var Ee=wa(Ae,{x:Fe[2],y:Fe[3]});Ee<De&&(a=[Fe[2],Fe[3]])}}}var ke=Hf(a,P,o.arrowShapes[d].spacing(t)+h),Se=Hf(a,P,o.arrowShapes[d].gap(t)+h);if(y.endX=Se[0],y.endY=Se[1],y.arrowEndX=ke[0],y.arrowEndY=ke[1],A==="inside-to-node")a=[l.x,l.y];else if(M.units)a=this.manualEndptToPx(s,M);else if(A==="outside-to-line")a=y.srcIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?F=V:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(F=[c.x,c.y]),a=o.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),F[0],F[1],0,R,m),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var $e=s._private.rscratch,Xe=$e.labelWidth,it=$e.labelHeight,ot=$e.labelX,at=$e.labelY,Oe=Xe/2,ge=it/2,Z=s.pstyle("text-valign").value;Z==="top"?at-=ge:Z==="bottom"&&(at+=ge);var S=s.pstyle("text-halign").value;S==="left"?ot-=Oe:S==="right"&&(ot+=Oe);var H=Ll(F[0],F[1],[ot-Oe,at-ge,ot+Oe,at-ge,ot+Oe,at+ge,ot-Oe,at+ge],l.x,l.y);if(H.length>0){var z=c,q=wa(z,Ts(a)),K=wa(z,Ts(H)),pe=q;if(K<q&&(a=[H[0],H[1]],pe=K),H.length>2){var ee=wa(z,{x:H[2],y:H[3]});ee<pe&&(a=[H[2],H[3]])}}}var ye=Hf(a,V,o.arrowShapes[f].spacing(t)+p),ve=Hf(a,V,o.arrowShapes[f].gap(t)+p);y.startX=ve[0],y.startY=ve[1],y.arrowStartX=ye[0],y.arrowStartY=ye[1],T&&(!se(y.startX)||!se(y.startY)||!se(y.endX)||!se(y.endY)?y.badLine=!0:y.badLine=!1)};Xl.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Xl.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var db={};function XH(t,e,n){for(var r=function(l,c,d,f){return un(l,c,d,f)},i=e._private,o=i.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var s=t.bezierProjPcts[a];o.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}db.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)XH(this,t,n.allpts.slice(i,i+6))}else if(r==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]});else if(r==="haystack"){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};db.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var hi={};hi.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!go(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,d=i.rscratch,f=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}d.labelX=n,d.labelY=r,f.labelX=n,f.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var r1=function(e,n){var r=Math.atan(n/e);return e===0&&r<0&&(r=r*-1),r},i1=function(e,n){var r=n.x-e.x,i=n.y-e.y;return r1(r,i)},JH=function(e,n,r,i){var o=Fl(0,i-.001,1),a=Fl(0,i+.001,1),s=As(e,n,r,o),u=As(e,n,r,a);return i1(s,u)};hi.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(d,f,h){Ai(n.rscratch,d,f,h),Ai(n.rstyle,d,f,h)};a("labelX",null,e.x),a("labelY",null,e.y);var s=r1(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var d=[],f=0;f+5<r.allpts.length;f+=4){var h={x:r.allpts[f],y:r.allpts[f+1]},p={x:r.allpts[f+2],y:r.allpts[f+3]},m={x:r.allpts[f+4],y:r.allpts[f+5]};d.push({p0:h,p1:p,p2:m,startDist:0,length:0,segments:[]})}var g=n.rstyle.bezierPts,v=i.bezierProjPcts.length;function y(D,I,_,T,x){var M=_a(I,_),A=D.segments[D.segments.length-1],R={p0:I,p1:_,t0:T,t1:x,startDist:A?A.startDist+A.length:0,length:M};D.segments.push(R),D.length+=M}for(var b=0;b<d.length;b++){var w=d[b],E=d[b-1];E&&(w.startDist=E.startDist+E.length),y(w,w.p0,g[b*v],0,i.bezierProjPcts[0]);for(var C=0;C<v-1;C++)y(w,g[b*v+C],g[b*v+C+1],i.bezierProjPcts[C],i.bezierProjPcts[C+1]);y(w,g[b*v+v-1],w.p2,i.bezierProjPcts[v-1],1)}return u.cache=d},l=function(d){var f,h=d==="source";if(o[d]){var p=t.pstyle(d+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=u(),g,v=0,y=0,b=0;b<m.length;b++){for(var w=m[h?b:m.length-1-b],E=0;E<w.segments.length;E++){var C=w.segments[h?E:w.segments.length-1-E],D=b===m.length-1&&E===w.segments.length-1;if(v=y,y+=C.length,y>=p||D){g={cp:w,segment:C};break}}if(g)break}var I=g.cp,_=g.segment,T=(p-v)/_.length,x=_.t1-_.t0,M=h?_.t0+x*T:_.t1-x*T;M=Fl(0,M,1),e=As(I.p0,I.p1,I.p2,M),f=JH(I.p0,I.p1,I.p2,M);break}case"straight":case"segments":case"haystack":{for(var A=0,R,O,k,N,P=r.allpts.length,V=0;V+3<P&&(h?(k={x:r.allpts[V],y:r.allpts[V+1]},N={x:r.allpts[V+2],y:r.allpts[V+3]}):(k={x:r.allpts[P-2-V],y:r.allpts[P-1-V]},N={x:r.allpts[P-4-V],y:r.allpts[P-3-V]}),R=_a(k,N),O=A,A+=R,!(A>=p));V+=2);var U=p-O,F=U/R;F=Fl(0,F,1),e=DB(k,N,F),f=i1(k,N);break}}a("labelX",d,e.x),a("labelY",d,e.y),a("labelAutoAngle",d,f)}};l("source"),l("target"),this.applyLabelDimensions(t)}};hi.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};hi.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=Sa(r,t._private.labelDimsKey);if(Jn(n.rscratch,"prefixedLabelDimsKey",e)!==i){Ai(n.rscratch,"prefixedLabelDimsKey",e,i);var o=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,u=Jn(n.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=o.height/l,d=c*a,f=o.width,h=o.height+(l-1)*(a-1)*c;Ai(n.rstyle,"labelWidth",e,f),Ai(n.rscratch,"labelWidth",e,f),Ai(n.rstyle,"labelHeight",e,h),Ai(n.rscratch,"labelHeight",e,h),Ai(n.rscratch,"labelLineHeight",e,d)}};hi.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(G,Q){return Q?(Ai(n.rscratch,G,e,Q),Q):Jn(n.rscratch,G,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="\u200B",c=i.split(`
`),d=t.pstyle("text-max-width").pfValue,f=t.pstyle("text-overflow-wrap").value,h=f==="anywhere",p=[],m=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var v=c[g],y=this.calculateLabelDimensions(t,v),b=y.width;if(h){var w=v.split("").join(l);v=w}if(b>d){var E=v.matchAll(m),C="",D=0,I=tr(E),_;try{for(I.s();!(_=I.n()).done;){var T=_.value,x=T[0],M=v.substring(D,T.index);D=T.index+x.length;var A=C.length===0?M:C+M+x,R=this.calculateLabelDimensions(t,A),O=R.width;O<=d?C+=M+x:(C&&p.push(C),C=M+x)}}catch(B){I.e(B)}finally{I.f()}C.match(/^[\s\u200b]+$/)||p.push(C)}else p.push(v)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var k=t.pstyle("text-max-width").pfValue,N="",P="\u2026",V=!1;if(this.calculateLabelDimensions(t,i).width<k)return i;for(var U=0;U<i.length;U++){var F=this.calculateLabelDimensions(t,N+i[U]+P).width;if(F>k)break;N+=i[U],U===i.length-1&&(V=!0)}return V||(N+=P),N}return i};hi.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};hi.calculateLabelDimensions=function(t,e){var n=this,r=n.cy.window(),i=r.document,o=0,a=t.pstyle("font-style").strValue,s=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var f=c.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(a," ").concat(l," ").concat(s,"px ").concat(u);for(var h=0,p=0,m=e.split(`
`),g=0;g<m.length;g++){var v=m[g],y=d.measureText(v),b=Math.ceil(y.width),w=s;h=Math.max(b,h),p+=w}return h+=o,p+=o,{width:h,height:p}};hi.calculateLabelAngle=function(t,e){var n=t._private,r=n.rscratch,i=t.isEdge(),o=e?e+"-":"",a=t.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?r.labelAutoAngle:s==="autorotate"?0:a.pfValue};hi.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private,i=r.rscratch;i.labelAngle=e.calculateLabelAngle(t),n&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var o1={},bT=28,wT=!1;o1.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(n==="cutrectangle"&&(t.width()<bT||t.height()<bT))return wT||(ft("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),wT=!0),"rectangle";if(t.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n};var Bh={};Bh.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(a){var s=a.target;r(s)}).on("style.* background.*",function(a){var s=a.target;r(s,!1)});var i=function(a){if(a){var s=n.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(r(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++){var f=s[d];f(a,e)}n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)};Bh.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Bh.recalculateRenderedStyle=function(t,e){var n=function(w){return w._private.rstyle.cleanConnected};if(t.length!==0){var r=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,u=s.rstyle;a.isEdge()&&(!n(a.source())||!n(a.target()))&&(u.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):r.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],d=c._private,f=d.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),f.nodeX=h.x,f.nodeY=h.y,f.nodeW=c.pstyle("width").pfValue,f.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var m=r[p],g=m._private,v=g.rstyle,y=g.rscratch;v.srcX=y.arrowStartX,v.srcY=y.arrowStartY,v.tgtX=y.arrowEndX,v.tgtY=y.arrowEndY,v.midX=y.midX,v.midY=y.midY,v.labelAngle=y.labelAngle,v.sourceLabelAngle=y.sourceLabelAngle,v.targetLabelAngle=y.targetLabelAngle}}}};var Vh={};Vh.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}}};Vh.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Vh.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(jx),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var a1={};[Aa,yh,An,Xl,db,hi,o1,Bh,Vh].forEach(function(t){Me(a1,t)});var s1={};s1.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[t]=i[t]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=t,a};var Hs={};Hs.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++){var s=t[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(t);return u.on.apply(u,i)};Hs.binder=function(t){var e=this,n=e.cy.window(),r=t===n||t===n.document||t===n.document.body||d2(t);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var d=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:d}),(t.addEventListener||t.on).apply(t,d),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Hs.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Hs.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Hs.load=function(){var t=this,e=t.cy.window(),n=function(S){return S.selected()},r=function(S){var H=S.getRootNode();if(H&&H.nodeType===11&&H.host!==void 0)return H},i=function(S,H,z,q){S==null&&(S=t.cy);for(var K=0;K<H.length;K++){var pe=H[K];S.emit({originalEvent:z,type:pe,position:q})}},o=function(S){return S.shiftKey||S.metaKey||S.ctrlKey},a=function(S,H){var z=!0;if(t.cy.hasCompoundNodes()&&S&&S.pannable())for(var q=0;H&&q<H.length;q++){var S=H[q];if(S.isNode()&&S.isParent()&&!S.pannable()){z=!1;break}}else z=!0;return z},s=function(S){S[0]._private.grabbed=!0},u=function(S){S[0]._private.grabbed=!1},l=function(S){S[0]._private.rscratch.inDragLayer=!0},c=function(S){S[0]._private.rscratch.inDragLayer=!1},d=function(S){S[0]._private.rscratch.isGrabTarget=!0},f=function(S){S[0]._private.rscratch.isGrabTarget=!1},h=function(S,H){var z=H.addToList,q=z.has(S);!q&&S.grabbable()&&!S.locked()&&(z.merge(S),s(S))},p=function(S,H){if(S.cy().hasCompoundNodes()&&!(H.inDragLayer==null&&H.addToList==null)){var z=S.descendants();H.inDragLayer&&(z.forEach(l),z.connectedEdges().forEach(l)),H.addToList&&h(z,H)}},m=function(S,H){H=H||{};var z=S.cy().hasCompoundNodes();H.inDragLayer&&(S.forEach(l),S.neighborhood().stdFilter(function(q){return!z||q.isEdge()}).forEach(l)),H.addToList&&S.forEach(function(q){h(q,H)}),p(S,H),y(S,{inDragLayer:H.inDragLayer}),t.updateCachedGrabbedEles()},g=m,v=function(S){S&&(t.getCachedZSortedEles().forEach(function(H){u(H),c(H),f(H)}),t.updateCachedGrabbedEles())},y=function(S,H){if(!(H.inDragLayer==null&&H.addToList==null)&&S.cy().hasCompoundNodes()){var z=S.ancestors().orphans();if(!z.same(S)){var q=z.descendants().spawnSelf().merge(z).unmerge(S).unmerge(S.descendants()),K=q.connectedEdges();H.inDragLayer&&(K.forEach(l),q.forEach(l)),H.addToList&&q.forEach(function(pe){h(pe,H)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",E=typeof ResizeObserver<"u";w?(t.removeObserver=new MutationObserver(function(Z){for(var S=0;S<Z.length;S++){var H=Z[S],z=H.removedNodes;if(z)for(var q=0;q<z.length;q++){var K=z[q];if(K===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Z){t.destroy()});var C=Zl(function(){t.cy.resize()},100);w&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),E&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var D=function(S,H){for(;S!=null;)H(S),S=S.parentNode},I=function(){t.invalidateContainerClientCoordsCache()};D(t.container,function(Z){t.registerBinding(Z,"transitionend",I),t.registerBinding(Z,"animationend",I),t.registerBinding(Z,"scroll",I)}),t.registerBinding(t.container,"contextmenu",function(Z){Z.preventDefault()});var _=function(){return t.selection[4]!==0},T=function(S){for(var H=t.findContainerClientCoords(),z=H[0],q=H[1],K=H[2],pe=H[3],ee=S.touches?S.touches:[S],ye=!1,ve=0;ve<ee.length;ve++){var xe=ee[ve];if(z<=xe.clientX&&xe.clientX<=z+K&&q<=xe.clientY&&xe.clientY<=q+pe){ye=!0;break}}if(!ye)return!1;for(var We=t.container,Ue=S.target,be=Ue.parentNode,Ye=!1;be;){if(be===We){Ye=!0;break}be=be.parentNode}return!!Ye};t.registerBinding(t.container,"mousedown",function(S){if(T(S)&&!(t.hoverData.which===1&&S.which!==1)){S.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=S.which;var H=t.cy,z=[S.clientX,S.clientY],q=t.projectIntoViewport(z[0],z[1]),K=t.selection,pe=t.findNearestElements(q[0],q[1],!0,!1),ee=pe[0],ye=t.dragData.possibleDragElements;t.hoverData.mdownPos=q,t.hoverData.mdownGPos=z;var ve=function(Ze){return{originalEvent:S,type:Ze,position:{x:q[0],y:q[1]}}},xe=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Ze=t.hoverData.down;Ze?Ze.emit(ve("taphold")):H.emit(ve("taphold"))}},t.tapholdDuration)};if(S.which==3){t.hoverData.cxtStarted=!0;var We={originalEvent:S,type:"cxttapstart",position:{x:q[0],y:q[1]}};ee?(ee.activate(),ee.emit(We),t.hoverData.down=ee):H.emit(We),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(S.which==1){ee&&ee.activate();{if(ee!=null&&t.nodeIsGrabbable(ee)){var Ue=function(Ze){Ze.emit(ve("grab"))};if(d(ee),!ee.selected())ye=t.dragData.possibleDragElements=H.collection(),g(ee,{addToList:ye}),ee.emit(ve("grabon")).emit(ve("grab"));else{ye=t.dragData.possibleDragElements=H.collection();var be=H.$(function(Ye){return Ye.isNode()&&Ye.selected()&&t.nodeIsGrabbable(Ye)});m(be,{addToList:ye}),ee.emit(ve("grabon")),be.forEach(Ue)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=ee,t.hoverData.downs=pe,t.hoverData.downTime=new Date().getTime()}i(ee,["mousedown","tapstart","vmousedown"],S,{x:q[0],y:q[1]}),ee==null?(K[4]=1,t.data.bgActivePosistion={x:q[0],y:q[1]},t.redrawHint("select",!0),t.redraw()):ee.pannable()&&(K[4]=1),xe()}K[0]=K[2]=q[0],K[1]=K[3]=q[1]}},!1);var x=r(t.container);t.registerBinding([e,x],"mousemove",function(S){var H=t.hoverData.capture;if(!(!H&&!T(S))){var z=!1,q=t.cy,K=q.zoom(),pe=[S.clientX,S.clientY],ee=t.projectIntoViewport(pe[0],pe[1]),ye=t.hoverData.mdownPos,ve=t.hoverData.mdownGPos,xe=t.selection,We=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(We=t.findNearestElement(ee[0],ee[1],!0,!1));var Ue=t.hoverData.last,be=t.hoverData.down,Ye=[ee[0]-xe[2],ee[1]-xe[3]],Ze=t.dragData.possibleDragElements,Yt;if(ve){var Mt=pe[0]-ve[0],Rn=Mt*Mt,Ut=pe[1]-ve[1],nn=Ut*Ut,Kt=Rn+nn;t.hoverData.isOverThresholdDrag=Yt=Kt>=t.desktopTapThreshold2}var dn=o(S);Yt&&(t.hoverData.tapholdCancelled=!0);var Fi=function(){var lr=t.hoverData.dragDelta=t.hoverData.dragDelta||[];lr.length===0?(lr.push(Ye[0]),lr.push(Ye[1])):(lr[0]+=Ye[0],lr[1]+=Ye[1])};z=!0,i(We,["mousemove","vmousemove","tapdrag"],S,{x:ee[0],y:ee[1]});var $t=function(lr){return{originalEvent:S,type:lr,position:{x:ee[0],y:ee[1]}}},gi=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||q.emit($t("boxstart")),xe[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(Yt){var vi=$t("cxtdrag");be?be.emit(vi):q.emit(vi),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||We!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit($t("cxtdragout")),t.hoverData.cxtOver=We,We&&We.emit($t("cxtdragover")))}}else if(t.hoverData.dragging){if(z=!0,q.panningEnabled()&&q.userPanningEnabled()){var Na;if(t.hoverData.justStartedPan){var tc=t.hoverData.mdownPos;Na={x:(ee[0]-tc[0])*K,y:(ee[1]-tc[1])*K},t.hoverData.justStartedPan=!1}else Na={x:Ye[0]*K,y:Ye[1]*K};q.panBy(Na),q.emit($t("dragpan")),t.hoverData.dragged=!0}ee=t.projectIntoViewport(S.clientX,S.clientY)}else if(xe[4]==1&&(be==null||be.pannable())){if(Yt){if(!t.hoverData.dragging&&q.boxSelectionEnabled()&&(dn||!q.panningEnabled()||!q.userPanningEnabled()))gi();else if(!t.hoverData.selecting&&q.panningEnabled()&&q.userPanningEnabled()){var To=a(be,t.hoverData.downs);To&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,xe[4]=0,t.data.bgActivePosistion=Ts(ye),t.redrawHint("select",!0),t.redraw())}be&&be.pannable()&&be.active()&&be.unactivate()}}else{if(be&&be.pannable()&&be.active()&&be.unactivate(),(!be||!be.grabbed())&&We!=Ue&&(Ue&&i(Ue,["mouseout","tapdragout"],S,{x:ee[0],y:ee[1]}),We&&i(We,["mouseover","tapdragover"],S,{x:ee[0],y:ee[1]}),t.hoverData.last=We),be)if(Yt){if(q.boxSelectionEnabled()&&dn)be&&be.grabbed()&&(v(Ze),be.emit($t("freeon")),Ze.emit($t("free")),t.dragData.didDrag&&(be.emit($t("dragfreeon")),Ze.emit($t("dragfree")))),gi();else if(be&&be.grabbed()&&t.nodeIsDraggable(be)){var Un=!t.dragData.didDrag;Un&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||m(Ze,{inDragLayer:!0});var Cn={x:0,y:0};if(se(Ye[0])&&se(Ye[1])&&(Cn.x+=Ye[0],Cn.y+=Ye[1],Un)){var $n=t.hoverData.dragDelta;$n&&se($n[0])&&se($n[1])&&(Cn.x+=$n[0],Cn.y+=$n[1])}t.hoverData.draggingEles=!0,Ze.silentShift(Cn).emit($t("position")).emit($t("drag")),t.redrawHint("drag",!0),t.redraw()}}else Fi();z=!0}if(xe[2]=ee[0],xe[3]=ee[1],z)return S.stopPropagation&&S.stopPropagation(),S.preventDefault&&S.preventDefault(),!1}},!1);var M,A,R;t.registerBinding(e,"mouseup",function(S){if(!(t.hoverData.which===1&&S.which!==1&&t.hoverData.capture)){var H=t.hoverData.capture;if(H){t.hoverData.capture=!1;var z=t.cy,q=t.projectIntoViewport(S.clientX,S.clientY),K=t.selection,pe=t.findNearestElement(q[0],q[1],!0,!1),ee=t.dragData.possibleDragElements,ye=t.hoverData.down,ve=o(S);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ye&&ye.unactivate();var xe=function(Mt){return{originalEvent:S,type:Mt,position:{x:q[0],y:q[1]}}};if(t.hoverData.which===3){var We=xe("cxttapend");if(ye?ye.emit(We):z.emit(We),!t.hoverData.cxtDragged){var Ue=xe("cxttap");ye?ye.emit(Ue):z.emit(Ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(pe,["mouseup","tapend","vmouseup"],S,{x:q[0],y:q[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(i(ye,["click","tap","vclick"],S,{x:q[0],y:q[1]}),A=!1,S.timeStamp-R<=z.multiClickDebounceTime()?(M&&clearTimeout(M),A=!0,R=null,i(ye,["dblclick","dbltap","vdblclick"],S,{x:q[0],y:q[1]})):(M=setTimeout(function(){A||i(ye,["oneclick","onetap","voneclick"],S,{x:q[0],y:q[1]})},z.multiClickDebounceTime()),R=S.timeStamp)),ye==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!o(S)&&(z.$(n).unselect(["tapunselect"]),ee.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=ee=z.collection()),pe==ye&&!t.dragData.didDrag&&!t.hoverData.selecting&&pe!=null&&pe._private.selectable&&(t.hoverData.dragging||(z.selectionType()==="additive"||ve?pe.selected()?pe.unselect(["tapunselect"]):pe.select(["tapselect"]):ve||(z.$(n).unmerge(pe).unselect(["tapunselect"]),pe.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var be=z.collection(t.getAllInBox(K[0],K[1],K[2],K[3]));t.redrawHint("select",!0),be.length>0&&t.redrawHint("eles",!0),z.emit(xe("boxend"));var Ye=function(Mt){return Mt.selectable()&&!Mt.selected()};z.selectionType()==="additive"||ve||z.$(n).unmerge(be).unselect(),be.emit(xe("box")).stdFilter(Ye).select().emit(xe("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!K[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Ze=ye&&ye.grabbed();v(ee),Ze&&(ye.emit(xe("freeon")),ee.emit(xe("free")),t.dragData.didDrag&&(ye.emit(xe("dragfreeon")),ee.emit(xe("dragfree"))))}}K[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var O=[],k=4,N,P=1e5,V=function(S,H){for(var z=0;z<S.length;z++)if(S[z]%H!==0)return!1;return!0},U=function(S){for(var H=Math.abs(S[0]),z=1;z<S.length;z++)if(Math.abs(S[z])!==H)return!1;return!0},F=function(S){var H=!1,z=S.deltaY;if(z==null&&(S.wheelDeltaY!=null?z=S.wheelDeltaY/4:S.wheelDelta!=null&&(z=S.wheelDelta/4)),z!==0){if(N==null)if(O.length>=k){var q=O;if(N=V(q,5),!N){var K=Math.abs(q[0]);N=U(q)&&K>5}if(N)for(var pe=0;pe<q.length;pe++)P=Math.min(Math.abs(q[pe]),P)}else O.push(z),H=!0;else N&&(P=Math.min(Math.abs(z),P));if(!t.scrollingPage){var ee=t.cy,ye=ee.zoom(),ve=ee.pan(),xe=t.projectIntoViewport(S.clientX,S.clientY),We=[xe[0]*ye+ve.x,xe[1]*ye+ve.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||_()){S.preventDefault();return}if(ee.panningEnabled()&&ee.userPanningEnabled()&&ee.zoomingEnabled()&&ee.userZoomingEnabled()){S.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ue;H&&Math.abs(z)>5&&(z=Q0(z)*5),Ue=z/-250,N&&(Ue/=P,Ue*=3),Ue=Ue*t.wheelSensitivity;var be=S.deltaMode===1;be&&(Ue*=33);var Ye=ee.zoom()*Math.pow(10,Ue);S.type==="gesturechange"&&(Ye=t.gestureStartZoom*S.scale),ee.zoom({level:Ye,renderedPosition:{x:We[0],y:We[1]}}),ee.emit({type:S.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:S,position:{x:xe[0],y:xe[1]}})}}}};t.registerBinding(t.container,"wheel",F,!0),t.registerBinding(e,"scroll",function(S){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(S){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||S.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Z){t.hasTouchStarted||F(Z)},!0),t.registerBinding(t.container,"mouseout",function(S){var H=t.projectIntoViewport(S.clientX,S.clientY);t.cy.emit({originalEvent:S,type:"mouseout",position:{x:H[0],y:H[1]}})},!1),t.registerBinding(t.container,"mouseover",function(S){var H=t.projectIntoViewport(S.clientX,S.clientY);t.cy.emit({originalEvent:S,type:"mouseover",position:{x:H[0],y:H[1]}})},!1);var B,G,Q,W,J,ne,le,X,L,j,$,Y,ae,we=function(S,H,z,q){return Math.sqrt((z-S)*(z-S)+(q-H)*(q-H))},Qe=function(S,H,z,q){return(z-S)*(z-S)+(q-H)*(q-H)},Fe;t.registerBinding(t.container,"touchstart",Fe=function(S){if(t.hasTouchStarted=!0,!!T(S)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var H=t.cy,z=t.touchData.now,q=t.touchData.earlier;if(S.touches[0]){var K=t.projectIntoViewport(S.touches[0].clientX,S.touches[0].clientY);z[0]=K[0],z[1]=K[1]}if(S.touches[1]){var K=t.projectIntoViewport(S.touches[1].clientX,S.touches[1].clientY);z[2]=K[0],z[3]=K[1]}if(S.touches[2]){var K=t.projectIntoViewport(S.touches[2].clientX,S.touches[2].clientY);z[4]=K[0],z[5]=K[1]}var pe=function(dn){return{originalEvent:S,type:dn,position:{x:z[0],y:z[1]}}};if(S.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var ee=t.findContainerClientCoords();L=ee[0],j=ee[1],$=ee[2],Y=ee[3],B=S.touches[0].clientX-L,G=S.touches[0].clientY-j,Q=S.touches[1].clientX-L,W=S.touches[1].clientY-j,ae=0<=B&&B<=$&&0<=Q&&Q<=$&&0<=G&&G<=Y&&0<=W&&W<=Y;var ye=H.pan(),ve=H.zoom();J=we(B,G,Q,W),ne=Qe(B,G,Q,W),le=[(B+Q)/2,(G+W)/2],X=[(le[0]-ye.x)/ve,(le[1]-ye.y)/ve];var xe=200,We=xe*xe;if(ne<We&&!S.touches[2]){var Ue=t.findNearestElement(z[0],z[1],!0,!0),be=t.findNearestElement(z[2],z[3],!0,!0);Ue&&Ue.isNode()?(Ue.activate().emit(pe("cxttapstart")),t.touchData.start=Ue):be&&be.isNode()?(be.activate().emit(pe("cxttapstart")),t.touchData.start=be):H.emit(pe("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(S.touches[2])H.boxSelectionEnabled()&&S.preventDefault();else if(!S.touches[1]){if(S.touches[0]){var Ye=t.findNearestElements(z[0],z[1],!0,!0),Ze=Ye[0];if(Ze!=null&&(Ze.activate(),t.touchData.start=Ze,t.touchData.starts=Ye,t.nodeIsGrabbable(Ze))){var Yt=t.dragData.touchDragEles=H.collection(),Mt=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Ze.selected()?(Mt=H.$(function(Kt){return Kt.selected()&&t.nodeIsGrabbable(Kt)}),m(Mt,{addToList:Yt})):g(Ze,{addToList:Yt}),d(Ze),Ze.emit(pe("grabon")),Mt?Mt.forEach(function(Kt){Kt.emit(pe("grab"))}):Ze.emit(pe("grab"))}i(Ze,["touchstart","tapstart","vmousedown"],S,{x:z[0],y:z[1]}),Ze==null&&(t.data.bgActivePosistion={x:K[0],y:K[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&i(t.touchData.start,["taphold"],S,{x:z[0],y:z[1]})},t.tapholdDuration)}}if(S.touches.length>=1){for(var Rn=t.touchData.startPosition=[null,null,null,null,null,null],Ut=0;Ut<z.length;Ut++)Rn[Ut]=q[Ut]=z[Ut];var nn=S.touches[0];t.touchData.startGPosition=[nn.clientX,nn.clientY]}}},!1);var Ae;t.registerBinding(e,"touchmove",Ae=function(S){var H=t.touchData.capture;if(!(!H&&!T(S))){var z=t.selection,q=t.cy,K=t.touchData.now,pe=t.touchData.earlier,ee=q.zoom();if(S.touches[0]){var ye=t.projectIntoViewport(S.touches[0].clientX,S.touches[0].clientY);K[0]=ye[0],K[1]=ye[1]}if(S.touches[1]){var ye=t.projectIntoViewport(S.touches[1].clientX,S.touches[1].clientY);K[2]=ye[0],K[3]=ye[1]}if(S.touches[2]){var ye=t.projectIntoViewport(S.touches[2].clientX,S.touches[2].clientY);K[4]=ye[0],K[5]=ye[1]}var ve=function(V1){return{originalEvent:S,type:V1,position:{x:K[0],y:K[1]}}},xe=t.touchData.startGPosition,We;if(H&&S.touches[0]&&xe){for(var Ue=[],be=0;be<K.length;be++)Ue[be]=K[be]-pe[be];var Ye=S.touches[0].clientX-xe[0],Ze=Ye*Ye,Yt=S.touches[0].clientY-xe[1],Mt=Yt*Yt,Rn=Ze+Mt;We=Rn>=t.touchTapThreshold2}if(H&&t.touchData.cxt){S.preventDefault();var Ut=S.touches[0].clientX-L,nn=S.touches[0].clientY-j,Kt=S.touches[1].clientX-L,dn=S.touches[1].clientY-j,Fi=Qe(Ut,nn,Kt,dn),$t=Fi/ne,gi=150,vi=gi*gi,Na=1.5,tc=Na*Na;if($t>=tc||Fi>=vi){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var To=ve("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(To),t.touchData.start=null):q.emit(To)}}if(H&&t.touchData.cxt){var To=ve("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(To):q.emit(To),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Un=t.findNearestElement(K[0],K[1],!0,!0);(!t.touchData.cxtOver||Un!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(ve("cxtdragout")),t.touchData.cxtOver=Un,Un&&Un.emit(ve("cxtdragover")))}else if(H&&S.touches[2]&&q.boxSelectionEnabled())S.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||q.emit(ve("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,z[4]=1,!z||z.length===0||z[0]===void 0?(z[0]=(K[0]+K[2]+K[4])/3,z[1]=(K[1]+K[3]+K[5])/3,z[2]=(K[0]+K[2]+K[4])/3+1,z[3]=(K[1]+K[3]+K[5])/3+1):(z[2]=(K[0]+K[2]+K[4])/3,z[3]=(K[1]+K[3]+K[5])/3),t.redrawHint("select",!0),t.redraw();else if(H&&S.touches[1]&&!t.touchData.didSelect&&q.zoomingEnabled()&&q.panningEnabled()&&q.userZoomingEnabled()&&q.userPanningEnabled()){S.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Cn=t.dragData.touchDragEles;if(Cn){t.redrawHint("drag",!0);for(var $n=0;$n<Cn.length;$n++){var $s=Cn[$n]._private;$s.grabbed=!1,$s.rscratch.inDragLayer=!1}}var lr=t.touchData.start,Ut=S.touches[0].clientX-L,nn=S.touches[0].clientY-j,Kt=S.touches[1].clientX-L,dn=S.touches[1].clientY-j,pb=we(Ut,nn,Kt,dn),A1=pb/J;if(ae){var R1=Ut-B,N1=nn-G,O1=Kt-Q,k1=dn-W,P1=(R1+O1)/2,F1=(N1+k1)/2,zs=q.zoom(),Uh=zs*A1,nc=q.pan(),gb=X[0]*zs+nc.x,vb=X[1]*zs+nc.y,L1={x:-Uh/zs*(gb-nc.x-P1)+gb,y:-Uh/zs*(vb-nc.y-F1)+vb};if(lr&&lr.active()){var Cn=t.dragData.touchDragEles;v(Cn),t.redrawHint("drag",!0),t.redrawHint("eles",!0),lr.unactivate().emit(ve("freeon")),Cn.emit(ve("free")),t.dragData.didDrag&&(lr.emit(ve("dragfreeon")),Cn.emit(ve("dragfree")))}q.viewport({zoom:Uh,pan:L1,cancelOnFailedZoom:!0}),q.emit(ve("pinchzoom")),J=pb,B=Ut,G=nn,Q=Kt,W=dn,t.pinching=!0}if(S.touches[0]){var ye=t.projectIntoViewport(S.touches[0].clientX,S.touches[0].clientY);K[0]=ye[0],K[1]=ye[1]}if(S.touches[1]){var ye=t.projectIntoViewport(S.touches[1].clientX,S.touches[1].clientY);K[2]=ye[0],K[3]=ye[1]}if(S.touches[2]){var ye=t.projectIntoViewport(S.touches[2].clientX,S.touches[2].clientY);K[4]=ye[0],K[5]=ye[1]}}else if(S.touches[0]&&!t.touchData.didSelect){var Cr=t.touchData.start,$h=t.touchData.last,Un;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Un=t.findNearestElement(K[0],K[1],!0,!0)),H&&Cr!=null&&S.preventDefault(),H&&Cr!=null&&t.nodeIsDraggable(Cr))if(We){var Cn=t.dragData.touchDragEles,mb=!t.dragData.didDrag;mb&&m(Cn,{inDragLayer:!0}),t.dragData.didDrag=!0;var qs={x:0,y:0};if(se(Ue[0])&&se(Ue[1])&&(qs.x+=Ue[0],qs.y+=Ue[1],mb)){t.redrawHint("eles",!0);var Ir=t.touchData.dragDelta;Ir&&se(Ir[0])&&se(Ir[1])&&(qs.x+=Ir[0],qs.y+=Ir[1])}t.hoverData.draggingEles=!0,Cn.silentShift(qs).emit(ve("position")).emit(ve("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==pe[0]&&t.touchData.startPosition[1]==pe[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ir=t.touchData.dragDelta=t.touchData.dragDelta||[];Ir.length===0?(Ir.push(Ue[0]),Ir.push(Ue[1])):(Ir[0]+=Ue[0],Ir[1]+=Ue[1])}if(i(Cr||Un,["touchmove","tapdrag","vmousemove"],S,{x:K[0],y:K[1]}),(!Cr||!Cr.grabbed())&&Un!=$h&&($h&&$h.emit(ve("tapdragout")),Un&&Un.emit(ve("tapdragover"))),t.touchData.last=Un,H)for(var $n=0;$n<K.length;$n++)K[$n]&&t.touchData.startPosition[$n]&&We&&(t.touchData.singleTouchMoved=!0);if(H&&(Cr==null||Cr.pannable())&&q.panningEnabled()&&q.userPanningEnabled()){var B1=a(Cr,t.touchData.starts);B1&&(S.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Ts(t.touchData.startPosition)),t.swipePanning?(q.panBy({x:Ue[0]*ee,y:Ue[1]*ee}),q.emit(ve("dragpan"))):We&&(t.swipePanning=!0,q.panBy({x:Ye*ee,y:Yt*ee}),q.emit(ve("dragpan")),Cr&&(Cr.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ye=t.projectIntoViewport(S.touches[0].clientX,S.touches[0].clientY);K[0]=ye[0],K[1]=ye[1]}}for(var be=0;be<K.length;be++)pe[be]=K[be];H&&S.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var _e;t.registerBinding(e,"touchcancel",_e=function(S){var H=t.touchData.start;t.touchData.capture=!1,H&&H.unactivate()});var ce,De,Ee,ke;if(t.registerBinding(e,"touchend",ce=function(S){var H=t.touchData.start,z=t.touchData.capture;if(z)S.touches.length===0&&(t.touchData.capture=!1),S.preventDefault();else return;var q=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var K=t.cy,pe=K.zoom(),ee=t.touchData.now,ye=t.touchData.earlier;if(S.touches[0]){var ve=t.projectIntoViewport(S.touches[0].clientX,S.touches[0].clientY);ee[0]=ve[0],ee[1]=ve[1]}if(S.touches[1]){var ve=t.projectIntoViewport(S.touches[1].clientX,S.touches[1].clientY);ee[2]=ve[0],ee[3]=ve[1]}if(S.touches[2]){var ve=t.projectIntoViewport(S.touches[2].clientX,S.touches[2].clientY);ee[4]=ve[0],ee[5]=ve[1]}var xe=function(vi){return{originalEvent:S,type:vi,position:{x:ee[0],y:ee[1]}}};H&&H.unactivate();var We;if(t.touchData.cxt){if(We=xe("cxttapend"),H?H.emit(We):K.emit(We),!t.touchData.cxtDragged){var Ue=xe("cxttap");H?H.emit(Ue):K.emit(Ue)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!S.touches[2]&&K.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var be=K.collection(t.getAllInBox(q[0],q[1],q[2],q[3]));q[0]=void 0,q[1]=void 0,q[2]=void 0,q[3]=void 0,q[4]=0,t.redrawHint("select",!0),K.emit(xe("boxend"));var Ye=function(vi){return vi.selectable()&&!vi.selected()};be.emit(xe("box")).stdFilter(Ye).select().emit(xe("boxselect")),be.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(H?.unactivate(),S.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!S.touches[1]){if(!S.touches[0]){if(!S.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Ze=t.dragData.touchDragEles;if(H!=null){var Yt=H._private.grabbed;v(Ze),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Yt&&(H.emit(xe("freeon")),Ze.emit(xe("free")),t.dragData.didDrag&&(H.emit(xe("dragfreeon")),Ze.emit(xe("dragfree")))),i(H,["touchend","tapend","vmouseup","tapdragout"],S,{x:ee[0],y:ee[1]}),H.unactivate(),t.touchData.start=null}else{var Mt=t.findNearestElement(ee[0],ee[1],!0,!0);i(Mt,["touchend","tapend","vmouseup","tapdragout"],S,{x:ee[0],y:ee[1]})}var Rn=t.touchData.startPosition[0]-ee[0],Ut=Rn*Rn,nn=t.touchData.startPosition[1]-ee[1],Kt=nn*nn,dn=Ut+Kt,Fi=dn*pe*pe;t.touchData.singleTouchMoved||(H||K.$(":selected").unselect(["tapunselect"]),i(H,["tap","vclick"],S,{x:ee[0],y:ee[1]}),De=!1,S.timeStamp-ke<=K.multiClickDebounceTime()?(Ee&&clearTimeout(Ee),De=!0,ke=null,i(H,["dbltap","vdblclick"],S,{x:ee[0],y:ee[1]})):(Ee=setTimeout(function(){De||i(H,["onetap","voneclick"],S,{x:ee[0],y:ee[1]})},K.multiClickDebounceTime()),ke=S.timeStamp)),H!=null&&!t.dragData.didDrag&&H._private.selectable&&Fi<t.touchTapThreshold2&&!t.pinching&&(K.selectionType()==="single"?(K.$(n).unmerge(H).unselect(["tapunselect"]),H.select(["tapselect"])):H.selected()?H.unselect(["tapunselect"]):H.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var $t=0;$t<ee.length;$t++)ye[$t]=ee[$t];t.dragData.didDrag=!1,S.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),S.touches.length<2&&(S.touches.length===1&&(t.touchData.startGPosition=[S.touches[0].clientX,S.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var Se=[],$e=function(S){return{clientX:S.clientX,clientY:S.clientY,force:1,identifier:S.pointerId,pageX:S.pageX,pageY:S.pageY,radiusX:S.width/2,radiusY:S.height/2,screenX:S.screenX,screenY:S.screenY,target:S.target}},Xe=function(S){return{event:S,touch:$e(S)}},it=function(S){Se.push(Xe(S))},ot=function(S){for(var H=0;H<Se.length;H++){var z=Se[H];if(z.event.pointerId===S.pointerId){Se.splice(H,1);return}}},at=function(S){var H=Se.filter(function(z){return z.event.pointerId===S.pointerId})[0];H.event=S,H.touch=$e(S)},Oe=function(S){S.touches=Se.map(function(H){return H.touch})},ge=function(S){return S.pointerType==="mouse"||S.pointerType===4};t.registerBinding(t.container,"pointerdown",function(Z){ge(Z)||(Z.preventDefault(),it(Z),Oe(Z),Fe(Z))}),t.registerBinding(t.container,"pointerup",function(Z){ge(Z)||(ot(Z),Oe(Z),ce(Z))}),t.registerBinding(t.container,"pointercancel",function(Z){ge(Z)||(ot(Z),Oe(Z),_e(Z))}),t.registerBinding(t.container,"pointermove",function(Z){ge(Z)||(Z.preventDefault(),at(Z),Oe(Z),Ae(Z))})}};var ki={};ki.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(r,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",r,i,o,a,s,this.points)},intersectLine:function(r,i,o,a,s,u,l,c){return Ll(s,u,this.points,r,i,o/2,a/2,l)},checkPoint:function(r,i,o,a,s,u,l,c){return Oi(r,i,this.points,u,l,a,s,[0,-1],o)},hasMiterBounds:t!=="rectangle",miterBounds:function(r,i,o,a,s,u){return TB(this.points,r,i,o,a,s)}}};ki.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){return PB(o,a,e,n,r/2+s,i/2+s)},checkPoint:function(e,n,r,i,o,a,s,u){return Ia(e,n,i,o,a,s,r)}}};ki.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(r,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===r&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=r,u[l+"-cy"]=i;var c=o/2,d=a/2;s=s==="auto"?ux(o,a):s;for(var f=new Array(e.length/2),h=0;h<e.length/2;h++)f[h]={x:r+c*e[h*2],y:i+d*e[h*2+1]};var p,m,g,v,y=f.length;for(m=f[y-1],p=0;p<y;p++)g=f[p%y],v=f[(p+1)%y],u[l][p]=cb(m,g,v,s),m=g,g=v;return u[l]},draw:function(r,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",r,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(r,i,o,a,s,u,l,c,d){return LB(s,u,this.points,r,i,o,a,l,this.getOrCreateCorners(r,i,o,a,c,d,"corners"))},checkPoint:function(r,i,o,a,s,u,l,c,d){return kB(r,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,d,"corners"))}}};ki.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Vn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){return ax(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?mo(i,o):u,u=Math.min(l,c,u);var d=u*2;return!!(Oi(e,n,this.points,a,s,i,o-d,[0,-1],r)||Oi(e,n,this.points,a,s,i-d,o,[0,-1],r)||Ia(e,n,d,d,a-l+u,s-c+u,r)||Ia(e,n,d,d,a+l-u,s-c+u,r)||Ia(e,n,d,d,a+l-u,s+c-u,r)||Ia(e,n,d,d,a-l+u,s+c-u,r))}}};ki.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:J0(),points:Vn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,null,a)},generateCutTrianglePts:function(e,n,r,i,o){var a=o==="auto"?this.cornerLength:o,s=n/2,u=e/2,l=r-u,c=r+u,d=i-s,f=i+s;return{topLeft:[l,d+a,l+a,d,l+a,d+a],topRight:[c-a,d,c,d+a,c-a,d+a],bottomRight:[c,f-a,c-a,f,c-a,f-a],bottomLeft:[l+a,f,l,f-a,l+a,f-a]}},intersectLine:function(e,n,r,i,o,a,s,u){var l=this.generateCutTrianglePts(r+2*s,i+2*s,e,n,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Ll(o,a,c,e,n)},checkPoint:function(e,n,r,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(Oi(e,n,this.points,a,s,i,o-2*l,[0,-1],r)||Oi(e,n,this.points,a,s,i-2*l,o,[0,-1],r))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return er(e,n,c.topLeft)||er(e,n,c.topRight)||er(e,n,c.bottomRight)||er(e,n,c.bottomLeft)}}};ki.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Vn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){var l=.15,c=.5,d=.85,f=this.generateBarrelBezierPts(r+2*s,i+2*s,e,n),h=function(g){var v=As({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),y=As({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),b=As({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},d);return[g[0],g[1],v.x,v.y,y.x,y.y,b.x,b.y,g[4],g[5]]},p=[].concat(h(f.topLeft),h(f.topRight),h(f.bottomRight),h(f.bottomLeft));return Ll(o,a,p,e,n)},generateBarrelBezierPts:function(e,n,r,i){var o=n/2,a=e/2,s=r-a,u=r+a,l=i-o,c=i+o,d=S0(e,n),f=d.heightOffset,h=d.widthOffset,p=d.ctrlPtOffsetPct*e,m={topLeft:[s,l+f,s+p,l,s+h,l],topRight:[u-h,l,u-p,l,u,l+f],bottomRight:[u,c-f,u-p,c,u-h,c],bottomLeft:[s+h,c,s+p,c,s,c-f]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,n,r,i,o,a,s,u){var l=S0(i,o),c=l.heightOffset,d=l.widthOffset;if(Oi(e,n,this.points,a,s,i,o-2*c,[0,-1],r)||Oi(e,n,this.points,a,s,i-2*d,o,[0,-1],r))return!0;for(var f=this.generateBarrelBezierPts(i,o,a,s),h=function(I,_,T){var x=T[4],M=T[2],A=T[0],R=T[5],O=T[1],k=Math.min(x,A),N=Math.max(x,A),P=Math.min(R,O),V=Math.max(R,O);if(k<=I&&I<=N&&P<=_&&_<=V){var U=BB(x,M,A),F=AB(U[0],U[1],U[2],I),B=F.filter(function(G){return 0<=G&&G<=1});if(B.length>0)return B[0]}return null},p=Object.keys(f),m=0;m<p.length;m++){var g=p[m],v=f[g],y=h(e,n,v);if(y!=null){var b=v[5],w=v[3],E=v[1],C=un(b,w,E,y);if(v.isTop&&C<=n||v.isBottom&&n<=C)return!0}}return!1}}};ki.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Vn(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){var l=e-(r/2+s),c=n-(i/2+s),d=c,f=e+(r/2+s),h=fo(o,a,e,n,l,c,f,d,!1);return h.length>0?h:ax(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){u=u==="auto"?mo(i,o):u;var l=2*u;if(Oi(e,n,this.points,a,s,i,o-l,[0,-1],r)||Oi(e,n,this.points,a,s,i-l,o,[0,-1],r))return!0;var c=i/2+2*r,d=o/2+2*r,f=[a-c,s-d,a-c,s,a+c,s,a+c,s-d];return!!(er(e,n,f)||Ia(e,n,l,l,a+i/2-u,s+o/2-u,r)||Ia(e,n,l,l,a-i/2+u,s+o/2-u,r))}}};ki.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Vn(3,0)),this.generateRoundPolygon("round-triangle",Vn(3,0)),this.generatePolygon("rectangle",Vn(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",Vn(5,0)),this.generateRoundPolygon("round-pentagon",Vn(5,0)),this.generatePolygon("hexagon",Vn(6,0)),this.generateRoundPolygon("round-hexagon",Vn(6,0)),this.generatePolygon("heptagon",Vn(7,0)),this.generateRoundPolygon("round-heptagon",Vn(7,0)),this.generatePolygon("octagon",Vn(8,0)),this.generateRoundPolygon("round-octagon",Vn(8,0));var r=new Array(20);{var i=I0(5,0),o=I0(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)r[s*4]=i[s*2],r[s*4+1]=i[s*2+1],r[s*4+2]=o[s*2],r[s*4+3]=o[s*2+1]}r=sx(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),d="polygon-"+c,f;return(f=this[d])?f:e.generatePolygon(d,l)}};var Jl={};Jl.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Jl.redraw=function(t){t=t||nx();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Jl.beforeRender=function(t,e){if(!this.destroyed){e==null&&_t("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}};var DT=function(e,n,r){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(n,r)};Jl.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var n=function(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){DT(t,!0,i);var o=Ni();t.render(t.renderOptions);var a=t.lastDrawTime=Ni();t.averageRedrawTime===void 0&&(t.averageRedrawTime=a-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=a-o;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else DT(t,!1,i);t.skipFrame=!1,ch(n)}};ch(n)}};var eU=function(e){this.init(e)},u1=eU,Us=u1.prototype;Us.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Us.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container(),r=e.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=r.getComputedStyle(n),d=c.getPropertyValue("position");d==="static"&&ft("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=se(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Us.notify=function(t,e){var n=this,r=n.cy;if(!this.destroyed){if(t==="init"){n.load();return}if(t==="destroy"){n.destroy();return}(t==="add"||t==="remove"||t==="move"&&r.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&n.invalidateCachedZSortedEles(),t==="viewport"&&n.redrawHint("select",!0),t==="gc"&&n.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Us.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Us.isHeadless=function(){return!1};[lb,a1,s1,Hs,ki,Jl].forEach(function(t){Me(Us,t)});var g0=1e3/60,l1={setupDequeueing:function(e){return function(){var r=this,i=this.renderer;if(!r.dequeueingSetup){r.dequeueingSetup=!0;var o=Zl(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var d=Ni(),f=i.averageRedrawTime,h=i.lastRedrawTime,p=[],m=i.cy.extent(),g=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var v=Ni(),y=v-d,b=v-c;if(h<g0){var w=g0-(l?f:0);if(b>=e.deqFastCost*w)break}else if(l){if(y>=e.deqCost*h||y>=e.deqAvgCost*f)break}else if(b>=e.deqNoDrawCost*g0)break;var E=e.deq(r,g,m);if(E.length>0)for(var C=0;C<E.length;C++)p.push(E[C]);else break}p.length>0&&(e.onDeqd(r,p),!l&&e.shouldRedraw(r,p,g,m)&&o())},s=e.priority||Z0;i.beforeRender(a,s(r))}}}},tU=(function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dh;Eo(this,t),this.idsByKey=new Ri,this.keyForId=new Ri,this.cachesByLvl=new Ri,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return Co(t,[{key:"getIdsFor",value:function(n){n==null&&_t("Can not get id list for null key");var r=this.idsByKey,i=this.idsByKey.get(n);return i||(i=new Ls,r.set(n,i)),i}},{key:"addIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).add(r)}},{key:"deleteIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).delete(r)}},{key:"getNumberOfIdsForKey",value:function(n){return n==null?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);this.deleteIdForKey(i,r),this.addIdForKey(o,r),this.keyForId.set(r,o)}},{key:"deleteKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteIdForKey(i,r),this.keyForId.delete(r)}},{key:"keyHasChangedFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);return i!==o}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var r=this.cachesByLvl,i=this.lvls,o=r.get(n);return o||(o=new Ri,r.set(n,o),i.push(n)),o}},{key:"getCache",value:function(n,r){return this.getCachesAt(r).get(n)}},{key:"get",value:function(n,r){var i=this.getKey(n),o=this.getCache(i,r);return o!=null&&this.updateKeyMappingFor(n),o}},{key:"getForCachedKey",value:function(n,r){var i=this.keyForId.get(n.id()),o=this.getCache(i,r);return o}},{key:"hasCache",value:function(n,r){return this.getCachesAt(r).has(n)}},{key:"has",value:function(n,r){var i=this.getKey(n);return this.hasCache(i,r)}},{key:"setCache",value:function(n,r,i){i.key=n,this.getCachesAt(r).set(n,i)}},{key:"set",value:function(n,r,i){var o=this.getKey(n);this.setCache(o,r,i),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,r){this.getCachesAt(r).delete(n)}},{key:"delete",value:function(n,r){var i=this.getKey(n);this.deleteCache(i,r)}},{key:"invalidateKey",value:function(n){var r=this;this.lvls.forEach(function(i){return r.deleteCache(n,i)})}},{key:"invalidate",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteKeyMappingFor(n);var o=this.doesEleInvalidateKey(n);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}])})(),ET=25,Yf=50,ah=-4,B0=3,c1=7.99,nU=8,rU=1024,iU=1024,oU=1024,aU=.2,sU=.8,uU=10,lU=.15,cU=.1,dU=.9,fU=.9,hU=100,pU=1,Ms={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},gU=Dn({getKey:null,doesEleInvalidateKey:dh,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:JT,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ml=function(e,n){var r=this;r.renderer=e,r.onDequeues=[];var i=gU(n);Me(r,i),r.lookup=new tU(i.getKey,i.doesEleInvalidateKey),r.setupDequeueing()},tn=Ml.prototype;tn.reasons=Ms;tn.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};tn.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{},r=n[t]=n[t]||[];return r};tn.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Yl(function(n,r){return r.reqs-n.reqs});return e};tn.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};tn.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(r==null&&(r=Math.ceil(K0(s*n))),r<ah)r=ah;else if(s>=c1||r>B0)return null;var l=Math.pow(2,r),c=e.h*l,d=e.w*l,f=a.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,f))return null;var h=u.get(t,r);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var p;if(c<=ET?p=ET:c<=Yf?p=Yf:p=Math.ceil(c/Yf)*Yf,c>oU||d>iU)return null;var m=o.getTextureQueue(p),g=m[m.length-2],v=function(){return o.recycleTexture(p,d)||o.addTexture(p,d)};g||(g=m[m.length-1]),g||(g=v()),g.width-g.usedWidth<d&&(g=v());for(var y=function(k){return k&&k.scaledLabelShown===f},b=i&&i===Ms.dequeue,w=i&&i===Ms.highQuality,E=i&&i===Ms.downscale,C,D=r+1;D<=B0;D++){var I=u.get(t,D);if(I){C=I;break}}var _=C&&C.level===r+1?C:null,T=function(){g.context.drawImage(_.texture.canvas,_.x,0,_.width,_.height,g.usedWidth,0,d,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,d,p),y(_))T();else if(y(C))if(w){for(var x=C.level;x>r;x--)_=o.getElement(t,e,n,x,Ms.downscale);T()}else return o.queueElement(t,C.level-1),C;else{var M;if(!b&&!w&&!E)for(var A=r-1;A>=ah;A--){var R=u.get(t,A);if(R){M=R;break}}if(y(M))return o.queueElement(t,r),M;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,f,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:r,scale:l,width:d,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(d+nU),g.eleCaches.push(h),u.set(t,r,h),o.checkTextureFullness(g),h};tn.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};tn.invalidateElement=function(t){var e=this,n=e.lookup,r=[],i=n.isInvalid(t);if(i){for(var o=ah;o<=B0;o++){var a=n.getForCachedKey(t,o);a&&r.push(a)}var s=n.invalidate(t);if(s)for(var u=0;u<r.length;u++){var l=r[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};tn.checkTextureUtility=function(t){t.invalidatedWidth>=aU*t.width&&this.retireTexture(t)};tn.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>sU&&t.fullnessChecks>=uU?vo(n,t):t.fullnessChecks++};tn.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n),i=this.lookup;vo(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}Y0(o);var u=e.getRetiredTextureQueue(n);u.push(t)};tn.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(rU,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};tn.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),i=n.getRetiredTextureQueue(t),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Y0(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),vo(i,a),r.push(a),a}};tn.queueElement=function(t,e){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(t),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};r.push(s),i[o]=s}};tn.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<pU&&n.size()>0;a++){var s=n.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(r[u]=null,c)continue;i.push(s);var d=e.getBoundingBox(l);e.getElement(l,d,t,s.level,Ms.dequeue)}return i};tn.removeFromQueue=function(t){var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=this.getKey(t),o=r[i];o!=null&&(o.eles.length===1?(o.reqs=W0,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(t))};tn.onDequeue=function(t){this.onDequeues.push(t)};tn.offDequeue=function(t){vo(this.onDequeues,t)};tn.setupDequeueing=l1.setupDequeueing({deqRedrawThreshold:hU,deqCost:lU,deqAvgCost:cU,deqNoDrawCost:dU,deqFastCost:fU,deq:function(e,n,r){return e.dequeue(n,r)},onDeqd:function(e,n){for(var r=0;r<e.onDequeues.length;r++){var i=e.onDequeues[r];i(n)}},shouldRedraw:function(e,n,r,i){for(var o=0;o<n.length;o++)for(var a=n[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(X0(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var vU=1,Rl=-4,bh=2,mU=3.99,yU=50,bU=50,wU=.15,DU=.1,EU=.9,CU=.9,IU=1,CT=250,SU=4e3*4e3,IT=32767,_U=!0,d1=function(e){var n=this,r=n.renderer=e,i=r.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=Ni()-2*CT,n.skipping=!1,n.eleTxrDeqs=i.collection(),n.scheduleElementRefinement=Zl(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},bU),r.beforeRender(function(a,s){s-n.lastInvalidationTime<=CT?n.skipping=!0:n.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};n.layersQueue=new Yl(o),n.setupDequeueing()},En=d1.prototype,ST=0,TU=Math.pow(2,53)-1;En.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:ST=++ST%TU,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a};En.getLayers=function(t,e,n){var r=this,i=r.renderer,o=i.cy,a=o.zoom(),s=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(K0(a*e)),n<Rl)n=Rl;else if(a>=mU||n>bh)return null}r.validateLayersElesOrdering(n,t);var u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[],d,f=r.levelIsComplete(n,t),h,p=function(){var T=function(O){if(r.validateLayersElesOrdering(O,t),r.levelIsComplete(O,t))return h=u[O],!0},x=function(O){if(!h)for(var k=n+O;Rl<=k&&k<=bh&&!T(k);k+=O);};x(1),x(-1);for(var M=c.length-1;M>=0;M--){var A=c[M];A.invalid&&vo(c,A)}};if(!f)p();else return c;var m=function(){if(!d){d=jn();for(var T=0;T<t.length;T++)IB(d,t[T].boundingBox())}return d},g=function(T){T=T||{};var x=T.after;m();var M=Math.ceil(d.w*l),A=Math.ceil(d.h*l);if(M>IT||A>IT)return null;var R=M*A;if(R>SU)return null;var O=r.makeLayer(d,n);if(x!=null){var k=c.indexOf(x)+1;c.splice(k,0,O)}else(T.insert===void 0||T.insert)&&c.unshift(O);return O};if(r.skipping&&!s)return null;for(var v=null,y=t.length/vU,b=!s,w=0;w<t.length;w++){var E=t[w],C=E._private.rscratch,D=C.imgLayerCaches=C.imgLayerCaches||{},I=D[n];if(I){v=I;continue}if((!v||v.eles.length>=y||!ox(v.bb,E.boundingBox()))&&(v=g({insert:!0,after:v}),!v))return null;h||b?r.queueLayer(v,E):r.drawEleInLayer(v,E,n,e),v.eles.push(E),D[n]=v}return h||(b?null:c)};En.getEleLevelForLayerLevel=function(t,e){return t};En.drawEleInLayer=function(t,e,n,r){var i=this,o=this.renderer,a=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,n,_U),o.setImgSmoothing(a,!0))};En.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||r.length===0)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};En.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};En.updateElementsInLayers=function(t,e){for(var n=this,r=zl(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Rl;l<=bh;l++){var c=u[l];c&&(o&&n.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};En.haveLayers=function(){for(var t=this,e=!1,n=Rl;n<=bh;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e};En.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=Ni(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(r,i,o){e.invalidateLayer(r)}))};En.invalidateLayer=function(t){if(this.lastInvalidationTime=Ni(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];vo(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};En.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(r,i,o){var a=r.replacement;if(a||(a=r.replacement=e.makeLayer(r.bb,r.level),a.replaces=r,a.eles=r.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};En.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};En.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,o=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}};En.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<IU&&n.size()!==0;){var o=n.peek();if(o.replacement){n.pop();continue}if(o.replaces&&o!==o.replaces.replacement){n.pop();continue}if(o.invalid){n.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),r.length===0&&r.push(!0),o.elesQueue.length===0&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return r};En.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};En.requestRedraw=Zl(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);En.setupDequeueing=l1.setupDequeueing({deqRedrawThreshold:yU,deqCost:wU,deqAvgCost:DU,deqNoDrawCost:EU,deqFastCost:CU,deq:function(e,n){return e.dequeue(n)},onDeqd:Z0,shouldRedraw:JT,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var f1={},_T;function xU(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function MU(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];i===0&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function TT(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];t.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function AU(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,Math.PI*2,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function RU(t,e,n,r){t.arc(e,n,r,0,Math.PI*2,!1)}f1.arrowShapeImpl=function(t){return(_T||(_T={polygon:xU,"triangle-backcurve":MU,"triangle-tee":TT,"circle-triangle":AU,"triangle-cross":TT,circle:RU}))[t]};var pi={};pi.drawElement=function(t,e,n,r,i,o){var a=this;e.isNode()?a.drawNode(t,e,n,r,i,o):a.drawEdge(t,e,n,r,i,o)};pi.drawElementOverlay=function(t,e){var n=this;e.isNode()?n.drawNodeOverlay(t,e):n.drawEdgeOverlay(t,e)};pi.drawElementUnderlay=function(t,e){var n=this;e.isNode()?n.drawNodeUnderlay(t,e):n.drawEdgeUnderlay(t,e)};pi.drawCachedElementPortion=function(t,e,n,r,i,o,a,s){var u=this,l=n.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=n.getElement(e,l,r,i,o);if(c!=null){var d=s(u,e);if(d===0)return;var f=a(u,e),h=l.x1,p=l.y1,m=l.w,g=l.h,v,y,b,w,E;if(f!==0){var C=n.getRotationPoint(e);b=C.x,w=C.y,t.translate(b,w),t.rotate(f),E=u.getImgSmoothing(t),E||u.setImgSmoothing(t,!0);var D=n.getRotationOffset(e);v=D.x,y=D.y}else v=h,y=p;var I;d!==1&&(I=t.globalAlpha,t.globalAlpha=I*d),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,y,m,g),d!==1&&(t.globalAlpha=I),f!==0&&(t.rotate(-f),t.translate(-b,-w),E||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}};var NU=function(){return 0},OU=function(e,n){return e.getTextAngle(n,null)},kU=function(e,n){return e.getTextAngle(n,"source")},PU=function(e,n){return e.getTextAngle(n,"target")},FU=function(e,n){return n.effectiveOpacity()},v0=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};pi.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,d=s.tlbTxrCache,f=e.boundingBox(),h=o===!0?u.reasons.highQuality:null;if(!(f.w===0||f.h===0||!e.visible())&&(!r||X0(f,r))){var p=e.isEdge(),m=e.element()._private.rscratch.badLine;a.drawElementUnderlay(t,e),a.drawCachedElementPortion(t,e,u,n,i,h,NU,FU),(!p||!m)&&a.drawCachedElementPortion(t,e,l,n,i,h,OU,v0),p&&!m&&(a.drawCachedElementPortion(t,e,c,n,i,h,kU,v0),a.drawCachedElementPortion(t,e,d,n,i,h,PU,v0)),a.drawElementOverlay(t,e)}};pi.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}};pi.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}};pi.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}};pi.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,n,r)};var Pi={};Pi.drawEdge=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;n&&(u=n,t.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,f=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,m=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,v=l*c,y=l*c,b=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;d==="straight-triangle"?(a.eleStrokeStyle(t,e,O),a.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=h,t.lineCap=p,a.eleStrokeStyle(t,e,O),a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},w=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=h+m,t.lineCap=p,m>0)a.colorStrokeStyle(t,g[0],g[1],g[2],O);else{t.lineCap="butt";return}d==="straight-triangle"?a.drawEdgeTrianglePath(e,t,s.allpts):(a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},E=function(){i&&a.drawEdgeOverlay(t,e)},C=function(){i&&a.drawEdgeUnderlay(t,e)},D=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;a.drawArrowheads(t,e,O)},I=function(){a.drawElementText(t,e,null,r)};t.lineJoin="round";var _=e.pstyle("ghost").value==="yes";if(_){var T=e.pstyle("ghost-offset-x").pfValue,x=e.pstyle("ghost-offset-y").pfValue,M=e.pstyle("ghost-opacity").value,A=v*M;t.translate(T,x),b(A),D(A),t.translate(-T,-x)}else w();C(),b(),D(),E(),I(),n&&t.translate(u.x1,u.y1)}};var h1=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r){if(r.visible()){var i=r.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=r._private.rscratch,u=r.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=r.pstyle("".concat(e,"-color")).value;n.lineWidth=l,s.edgeType==="self"&&!a?n.lineCap="butt":n.lineCap="round",o.colorStrokeStyle(n,c[0],c[1],c[2],i),o.drawEdgePath(r,n,s.allpts,"solid")}}}};Pi.drawEdgeOverlay=h1("overlay");Pi.drawEdgeUnderlay=h1("underlay");Pi.drawEdgePath=function(t,e,n,r){var i=t._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var d=n.join("$"),f=i.pathCacheKey&&i.pathCacheKey===d;f?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=d,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"haystack":for(var p=2;p+1<n.length;p+=2)e.lineTo(n[p],n[p+1]);break;case"segments":if(i.isRound){var m=tr(i.roundCorners),g;try{for(m.s();!(g=m.n()).done;){var v=g.value;t1(e,v)}}catch(b){m.e(b)}finally{m.f()}e.lineTo(n[n.length-2],n[n.length-1])}else for(var y=2;y+1<n.length;y+=2)e.lineTo(n[y],n[y+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};Pi.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-u[0],n[i+1]-u[1]),e.lineTo(n[i]+u[0],n[i+1]+u[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}};Pi.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i=r.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};Pi.drawArrowhead=function(t,e,n,r,i,o,a){if(!(isNaN(r)||r==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(n+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,d=e.pstyle("width").pfValue,f=e.pstyle(n+"-arrow-width"),h=f.value==="match-line"?d:f.pfValue;f.units==="%"&&(h*=d);var p=e.pstyle("opacity").value;a===void 0&&(a=p);var m=t.globalCompositeOperation;(a!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,d,u,h,r,i,o),t.globalCompositeOperation=m);var g=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,g[0],g[1],g[2],a),s.colorStrokeStyle(t,g[0],g[1],g[2],a),s.drawArrowShape(e,t,c,d,u,h,r,i,o)}}};Pi.drawArrowShape=function(t,e,n,r,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",d=!1,f,h=e,p={x:a,y:s},m=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,m),v=l.arrowShapes[i];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],b=Sa(i),w=y[b];w!=null?(f=e=w,d=!0):(f=e=new Path2D,y[b]=f)}d||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,g,u,p,r),e.closePath&&e.closePath()),e=h,c&&(e.translate(a,s),e.rotate(u),e.scale(g,g)),(n==="filled"||n==="both")&&(c?e.fill(f):e.fill()),(n==="hollow"||n==="both")&&(e.lineWidth=o/(c?g:1),e.lineJoin="miter",c?e.stroke(f):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-a,-s))};var fb={};fb.safeDrawImage=function(t,e,n,r,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{t.drawImage(e,n,r,i,o,a,s,u,l)}catch(c){ft(c)}};fb.drawInscribedImage=function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),d=c(n,"background-fit","value",r),f=c(n,"background-repeat","value",r),h=n.width(),p=n.height(),m=n.padding()*2,g=h+(c(n,"background-width-relative-to","value",r)==="inner"?0:m),v=p+(c(n,"background-height-relative-to","value",r)==="inner"?0:m),y=n._private.rscratch,b=c(n,"background-clip","value",r),w=b==="node",E=c(n,"background-image-opacity","value",r)*i,C=c(n,"background-image-smoothing","value",r),D=n.pstyle("corner-radius").value;D!=="auto"&&(D=n.pstyle("corner-radius").pfValue);var I=e.width||e.cachedW,_=e.height||e.cachedH;(I==null||_==null)&&(document.body.appendChild(e),I=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var T=I,x=_;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?T=c(n,"background-width","pfValue",r)*g:T=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?x=c(n,"background-height","pfValue",r)*v:x=c(n,"background-height","pfValue",r)),!(T===0||x===0)){if(d==="contain"){var M=Math.min(g/T,v/x);T*=M,x*=M}else if(d==="cover"){var M=Math.max(g/T,v/x);T*=M,x*=M}var A=s-g/2,R=c(n,"background-position-x","units",r),O=c(n,"background-position-x","pfValue",r);R==="%"?A+=(g-T)*O:A+=O;var k=c(n,"background-offset-x","units",r),N=c(n,"background-offset-x","pfValue",r);k==="%"?A+=(g-T)*N:A+=N;var P=u-v/2,V=c(n,"background-position-y","units",r),U=c(n,"background-position-y","pfValue",r);V==="%"?P+=(v-x)*U:P+=U;var F=c(n,"background-offset-y","units",r),B=c(n,"background-offset-y","pfValue",r);F==="%"?P+=(v-x)*B:P+=B,y.pathCache&&(A-=s,P-=u,s=0,u=0);var G=t.globalAlpha;t.globalAlpha=E;var Q=o.getImgSmoothing(t),W=!1;if(C==="no"&&Q?(o.setImgSmoothing(t,!1),W=!0):C==="yes"&&!Q&&(o.setImgSmoothing(t,!0),W=!0),f==="no-repeat")w&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,v,D,y),t.clip())),o.safeDrawImage(t,e,0,0,I,_,A,P,T,x),w&&t.restore();else{var J=t.createPattern(e,f);t.fillStyle=J,o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,v,D,y),t.translate(A,P),t.fill(),t.translate(-A,-P)}t.globalAlpha=G,W&&o.setImgSmoothing(t,Q)}};var Ra={};Ra.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(K0(n*r));e=Math.pow(2,i)}var o=t.pstyle("font-size").pfValue*e,a=t.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};Ra.drawElementText=function(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(r==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(r===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),f=e.pstyle("target-label");if(l||(!c||!c.value)&&(!d||!d.value)&&(!f||!f.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!n,p;n&&(p=n,t.translate(-p.x1,-p.y1)),i==null?(a.drawText(t,e,null,h,o),e.isEdge()&&(a.drawText(t,e,"source",h,o),a.drawText(t,e,"target",h,o))):a.drawText(t,e,i,h,o),n&&t.translate(p.x1,p.y1)};Ra.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Ra.setupTextStyle=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function LU(t,e,n,r,i){var o=Math.min(r,i),a=o/2,s=e+r/2,u=n+i/2;t.beginPath(),t.arc(s,u,a,0,Math.PI*2),t.closePath()}function xT(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=Math.min(o,r/2,i/2);t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath()}Ra.getTextAngle=function(t,e){var n,r=t._private,i=r.rscratch,o=e?e+"-":"",a=t.pstyle(o+"text-rotation");if(a.strValue==="autorotate"){var s=Jn(i,"labelAngle",e);n=t.isEdge()?s:0}else a.strValue==="none"?n=0:n=a.pfValue;return n};Ra.drawText=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var u=Jn(a,"labelX",n),l=Jn(a,"labelY",n),c,d,f=this.getLabelText(e,n);if(f!=null&&f!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,i);var h=n?n+"-":"",p=Jn(a,"labelWidth",n),m=Jn(a,"labelHeight",n),g=e.pstyle(h+"text-margin-x").pfValue,v=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;y&&(b="center",w="center"),u+=g,l+=v;var E;switch(r?E=this.getTextAngle(e,n):E=0,E!==0&&(c=u,d=l,t.translate(c,d),t.rotate(E),u=0,l=0),w){case"top":break;case"center":l+=m/2;break;case"bottom":l+=m;break}var C=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,I=e.pstyle("text-border-width").pfValue,_=e.pstyle("text-background-padding").pfValue,T=e.pstyle("text-background-shape").strValue,x=T==="round-rectangle"||T==="roundrectangle",M=T==="circle",A=2;if(C>0||I>0&&D>0){var R=t.fillStyle,O=t.strokeStyle,k=t.lineWidth,N=e.pstyle("text-background-color").value,P=e.pstyle("text-border-color").value,V=e.pstyle("text-border-style").value,U=C>0,F=I>0&&D>0,B=u-_;switch(b){case"left":B-=p;break;case"center":B-=p/2;break}var G=l-m-_,Q=p+2*_,W=m+2*_;if(U&&(t.fillStyle="rgba(".concat(N[0],",").concat(N[1],",").concat(N[2],",").concat(C*s,")")),F&&(t.strokeStyle="rgba(".concat(P[0],",").concat(P[1],",").concat(P[2],",").concat(D*s,")"),t.lineWidth=I,t.setLineDash))switch(V){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=I/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(x?(t.beginPath(),xT(t,B,G,Q,W,A)):M?(t.beginPath(),LU(t,B,G,Q,W)):(t.beginPath(),t.rect(B,G,Q,W)),U&&t.fill(),F&&t.stroke(),F&&V==="double"){var J=I/2;t.beginPath(),x?xT(t,B+J,G+J,Q-2*J,W-2*J,A):t.rect(B+J,G+J,Q-2*J,W-2*J),t.stroke()}t.fillStyle=R,t.strokeStyle=O,t.lineWidth=k,t.setLineDash&&t.setLineDash([])}var ne=2*e.pstyle("text-outline-width").pfValue;if(ne>0&&(t.lineWidth=ne),e.pstyle("text-wrap").value==="wrap"){var le=Jn(a,"labelWrapCachedLines",n),X=Jn(a,"labelLineHeight",n),L=p/2,j=this.getLabelJustification(e);switch(j==="auto"||(b==="left"?j==="left"?u+=-p:j==="center"&&(u+=-L):b==="center"?j==="left"?u+=-L:j==="right"&&(u+=L):b==="right"&&(j==="center"?u+=L:j==="right"&&(u+=p))),w){case"top":l-=(le.length-1)*X;break;case"center":case"bottom":l-=(le.length-1)*X;break}for(var $=0;$<le.length;$++)ne>0&&t.strokeText(le[$],u,l),t.fillText(le[$],u,l),l+=X}else ne>0&&t.strokeText(f,u,l),t.fillText(f,u,l);E!==0&&(t.rotate(-E),t.translate(-c,-d))}}};var So={};So.drawNode=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,d=e.position();if(!(!se(d.x)||!se(d.y))&&!(o&&!e.visible())){var f=o?e.effectiveOpacity():1,h=a.usePaths(),p,m=!1,g=e.padding();s=e.width()+2*g,u=e.height()+2*g;var v;n&&(v=n,t.translate(-v.x1,-v.y1));for(var y=e.pstyle("background-image"),b=y.value,w=new Array(b.length),E=new Array(b.length),C=0,D=0;D<b.length;D++){var I=b[D],_=w[D]=I!=null&&I!=="none";if(_){var T=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);C++,E[D]=a.getCachedImage(I,T,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var x=e.pstyle("background-blacken").value,M=e.pstyle("border-width").pfValue,A=e.pstyle("background-opacity").value*f,R=e.pstyle("border-color").value,O=e.pstyle("border-style").value,k=e.pstyle("border-join").value,N=e.pstyle("border-cap").value,P=e.pstyle("border-position").value,V=e.pstyle("border-dash-pattern").pfValue,U=e.pstyle("border-dash-offset").pfValue,F=e.pstyle("border-opacity").value*f,B=e.pstyle("outline-width").pfValue,G=e.pstyle("outline-color").value,Q=e.pstyle("outline-style").value,W=e.pstyle("outline-opacity").value*f,J=e.pstyle("outline-offset").value,ne=e.pstyle("corner-radius").value;ne!=="auto"&&(ne=e.pstyle("corner-radius").pfValue);var le=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;a.eleFillStyle(t,e,ge)},X=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;a.colorStrokeStyle(t,R[0],R[1],R[2],ge)},L=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:W;a.colorStrokeStyle(t,G[0],G[1],G[2],ge)},j=function(ge,Z,S,H){var z=a.nodePathCache=a.nodePathCache||[],q=XT(S==="polygon"?S+","+H.join(","):S,""+Z,""+ge,""+ne),K=z[q],pe,ee=!1;return K!=null?(pe=K,ee=!0,c.pathCache=pe):(pe=new Path2D,z[q]=c.pathCache=pe),{path:pe,cacheHit:ee}},$=e.pstyle("shape").strValue,Y=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(d.x,d.y);var ae=j(s,u,$,Y);p=ae.path,m=ae.cacheHit}var we=function(){if(!m){var ge=d;h&&(ge={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(p||t,ge.x,ge.y,s,u,ne,c)}h?t.fill(p):t.fill()},Qe=function(){for(var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=l.backgrounding,H=0,z=0;z<E.length;z++){var q=e.cy().style().getIndexedStyle(e,"background-image-containment","value",z);if(Z&&q==="over"||!Z&&q==="inside"){H++;continue}w[z]&&E[z].complete&&!E[z].error&&(H++,a.drawInscribedImage(t,E[z],e,z,ge))}l.backgrounding=H!==C,S!==l.backgrounding&&e.updateStyle(!1)},Fe=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;a.hasPie(e)&&(a.drawPie(t,e,Z),ge&&(h||a.nodeShapes[a.getNodeShape(e)].draw(t,d.x,d.y,s,u,ne,c)))},Ae=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;a.hasStripe(e)&&(t.save(),h?t.clip(c.pathCache):(a.nodeShapes[a.getNodeShape(e)].draw(t,d.x,d.y,s,u,ne,c),t.clip()),a.drawStripe(t,e,Z),t.restore(),ge&&(h||a.nodeShapes[a.getNodeShape(e)].draw(t,d.x,d.y,s,u,ne,c)))},_e=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,Z=(x>0?x:-x)*ge,S=x>0?0:255;x!==0&&(a.colorFillStyle(t,S,S,S,Z),h?t.fill(p):t.fill())},ce=function(){if(M>0){if(t.lineWidth=M,t.lineCap=N,t.lineJoin=k,t.setLineDash)switch(O){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(V),t.lineDashOffset=U;break;case"solid":case"double":t.setLineDash([]);break}if(P!=="center"){if(t.save(),t.lineWidth*=2,P==="inside")h?t.clip(p):t.clip();else{var ge=new Path2D;ge.rect(-s/2-M,-u/2-M,s+2*M,u+2*M),ge.addPath(p),t.clip(ge,"evenodd")}h?t.stroke(p):t.stroke(),t.restore()}else h?t.stroke(p):t.stroke();if(O==="double"){t.lineWidth=M/3;var Z=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(p):t.stroke(),t.globalCompositeOperation=Z}t.setLineDash&&t.setLineDash([])}},De=function(){if(B>0){if(t.lineWidth=B,t.lineCap="butt",t.setLineDash)switch(Q){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var ge=d;h&&(ge={x:0,y:0});var Z=a.getNodeShape(e),S=M;P==="inside"&&(S=0),P==="outside"&&(S*=2);var H=(s+S+(B+J))/s,z=(u+S+(B+J))/u,q=s*H,K=u*z,pe=a.nodeShapes[Z].points,ee;if(h){var ye=j(q,K,Z,pe);ee=ye.path}if(Z==="ellipse")a.drawEllipsePath(ee||t,ge.x,ge.y,q,K);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Z)){var ve=0,xe=0,We=0;Z==="round-diamond"?ve=(S+J+B)*1.4:Z==="round-heptagon"?(ve=(S+J+B)*1.075,We=-(S/2+J+B)/35):Z==="round-hexagon"?ve=(S+J+B)*1.12:Z==="round-pentagon"?(ve=(S+J+B)*1.13,We=-(S/2+J+B)/15):Z==="round-tag"?(ve=(S+J+B)*1.12,xe=(S/2+B+J)*.07):Z==="round-triangle"&&(ve=(S+J+B)*(Math.PI/2),We=-(S+J/2+B)/Math.PI),ve!==0&&(H=(s+ve)/s,q=s*H,["round-hexagon","round-tag"].includes(Z)||(z=(u+ve)/u,K=u*z)),ne=ne==="auto"?ux(q,K):ne;for(var Ue=q/2,be=K/2,Ye=ne+(S+B+J)/2,Ze=new Array(pe.length/2),Yt=new Array(pe.length/2),Mt=0;Mt<pe.length/2;Mt++)Ze[Mt]={x:ge.x+xe+Ue*pe[Mt*2],y:ge.y+We+be*pe[Mt*2+1]};var Rn,Ut,nn,Kt,dn=Ze.length;for(Ut=Ze[dn-1],Rn=0;Rn<dn;Rn++)nn=Ze[Rn%dn],Kt=Ze[(Rn+1)%dn],Yt[Rn]=cb(Ut,nn,Kt,Ye),Ut=nn,nn=Kt;a.drawRoundPolygonPath(ee||t,ge.x+xe,ge.y+We,s*H,u*z,pe,Yt)}else if(["roundrectangle","round-rectangle"].includes(Z))ne=ne==="auto"?mo(q,K):ne,a.drawRoundRectanglePath(ee||t,ge.x,ge.y,q,K,ne+(S+B+J)/2);else if(["cutrectangle","cut-rectangle"].includes(Z))ne=ne==="auto"?J0():ne,a.drawCutRectanglePath(ee||t,ge.x,ge.y,q,K,null,ne+(S+B+J)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Z))ne=ne==="auto"?mo(q,K):ne,a.drawBottomRoundRectanglePath(ee||t,ge.x,ge.y,q,K,ne+(S+B+J)/2);else if(Z==="barrel")a.drawBarrelPath(ee||t,ge.x,ge.y,q,K);else if(Z.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Z)){var Fi=(S+B+J)/s;pe=fh(hh(pe,Fi)),a.drawPolygonPath(ee||t,ge.x,ge.y,s,u,pe)}else{var $t=(S+B+J)/s;pe=fh(hh(pe,-$t)),a.drawPolygonPath(ee||t,ge.x,ge.y,s,u,pe)}if(h?t.stroke(ee):t.stroke(),Q==="double"){t.lineWidth=S/3;var gi=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(ee):t.stroke(),t.globalCompositeOperation=gi}t.setLineDash&&t.setLineDash([])}},Ee=function(){i&&a.drawNodeOverlay(t,e,d,s,u)},ke=function(){i&&a.drawNodeUnderlay(t,e,d,s,u)},Se=function(){a.drawElementText(t,e,null,r)},$e=e.pstyle("ghost").value==="yes";if($e){var Xe=e.pstyle("ghost-offset-x").pfValue,it=e.pstyle("ghost-offset-y").pfValue,ot=e.pstyle("ghost-opacity").value,at=ot*f;t.translate(Xe,it),L(),De(),le(ot*A),we(),Qe(at,!0),X(ot*F),ce(),Fe(x!==0||M!==0),Ae(x!==0||M!==0),Qe(at,!1),_e(at),t.translate(-Xe,-it)}h&&t.translate(-d.x,-d.y),ke(),h&&t.translate(d.x,d.y),L(),De(),le(),we(),Qe(f,!0),X(),ce(),Fe(x!==0||M!==0),Ae(x!==0||M!==0),Qe(f,!1),_e(),h&&t.translate(-d.x,-d.y),Se(),Ee(),n&&t.translate(v.x1,v.y1)}};var p1=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r,i,o,a){var s=this;if(r.visible()){var u=r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-opacity")).value,c=r.pstyle("".concat(e,"-color")).value,d=r.pstyle("".concat(e,"-shape")).value,f=r.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||r.position(),o==null||a==null){var h=r.padding();o=r.width()+2*h,a=r.height()+2*h}s.colorFillStyle(n,c[0],c[1],c[2],l),s.nodeShapes[d].draw(n,i.x,i.y,o+u*2,a+u*2,f),n.fill()}}}};So.drawNodeOverlay=p1("overlay");So.drawNodeUnderlay=p1("underlay");So.hasPie=function(t){return t=t[0],t._private.hasPie};So.hasStripe=function(t){return t=t[0],t._private.hasStripe};So.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=r.x,l=r.y,c=e.width(),d=e.height(),f=Math.min(c,d)/2,h,p=0,m=this.usePaths();if(m&&(u=0,l=0),o.units==="%"?f=f*o.pfValue:o.pfValue!==void 0&&(f=o.pfValue/2),a.units==="%"?h=f*a.pfValue:a.pfValue!==void 0&&(h=a.pfValue/2),!(h>=f))for(var g=1;g<=i.pieBackgroundN;g++){var v=e.pstyle("pie-"+g+"-background-size").value,y=e.pstyle("pie-"+g+"-background-color").value,b=e.pstyle("pie-"+g+"-background-opacity").value*n,w=v/100;w+p>1&&(w=1-p);var E=1.5*Math.PI+2*Math.PI*p;E+=s;var C=2*Math.PI*w,D=E+C;v===0||p>=1||p+w>1||(h===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,f,E,D),t.closePath()):(t.beginPath(),t.arc(u,l,f,E,D),t.arc(u,l,h,D,E,!0),t.closePath()),this.colorFillStyle(t,y[0],y[1],y[2],b),t.fill(),p+=w)}};So.drawStripe=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=r.x,a=r.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();t.save();var d=e.pstyle("stripe-direction").value,f=e.pstyle("stripe-size");switch(d){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var h=s,p=u;f.units==="%"?(h=h*f.pfValue,p=p*f.pfValue):f.pfValue!==void 0&&(h=f.pfValue,p=f.pfValue),c&&(o=0,a=0),a-=h/2,o-=p/2;for(var m=1;m<=i.stripeBackgroundN;m++){var g=e.pstyle("stripe-"+m+"-background-size").value,v=e.pstyle("stripe-"+m+"-background-color").value,y=e.pstyle("stripe-"+m+"-background-opacity").value*n,b=g/100;b+l>1&&(b=1-l),!(g===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(o,a+p*l,h,p*b),t.closePath(),this.colorFillStyle(t,v[0],v[1],v[2],y),t.fill(),l+=b)}t.restore()};var Hn={},BU=100;Hn.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/n};Hn.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],n=!0,r,i=0;i<e.length;i++)if(r=e[i],r.context===t){n=!1;break}return n&&(r={context:t},e.push(r)),r};Hn.createGradientStyleFor=function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),d=n.midpoint(),f=_a(l,d),h=_a(c,d);o=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(f,h))}else{var p=a?{x:0,y:0}:n.position(),m=n.paddedWidth(),g=n.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(m,g))}else if(n.isEdge()){var v=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(v.x,v.y,y.x,y.y)}else{var b=a?{x:0,y:0}:n.position(),w=n.paddedWidth(),E=n.paddedHeight(),C=w/2,D=E/2,I=n.pstyle("background-gradient-direction").value;switch(I){case"to-bottom":o=t.createLinearGradient(b.x,b.y-D,b.x,b.y+D);break;case"to-top":o=t.createLinearGradient(b.x,b.y+D,b.x,b.y-D);break;case"to-left":o=t.createLinearGradient(b.x+C,b.y,b.x-C,b.y);break;case"to-right":o=t.createLinearGradient(b.x-C,b.y,b.x+C,b.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(b.x-C,b.y-D,b.x+C,b.y+D);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(b.x-C,b.y+D,b.x+C,b.y-D);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(b.x+C,b.y-D,b.x-C,b.y+D);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(b.x+C,b.y+D,b.x-C,b.y-D);break}}if(!o)return null;for(var _=u.length===s.length,T=s.length,x=0;x<T;x++)o.addColorStop(_?u[x]:x/(T-1),"rgba("+s[x][0]+","+s[x][1]+","+s[x][2]+","+i+")");return o};Hn.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i};Hn.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"};Hn.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}};Hn.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i};Hn.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"};Hn.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}};Hn.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var d=n.canvasContainer;d.style.width=i+"px",d.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)c=n.canvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var f=0;f<e.BUFFER_COUNT;f++)c=n.bufferCanvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=a}};Hn.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};Hn.clearCanvas=function(){var t=this,e=t.data;function n(r){r.clearRect(0,0,t.canvasWidth,t.canvasHeight)}n(e.contexts[t.NODE]),n(e.contexts[t.DRAG])};Hn.render=function(t){var e=this;t=t||nx();var n=e.cy,r=t.forcedContext,i=t.drawAllLayers,o=t.drawOnlyNodeLayer,a=t.forcedZoom,s=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,d=e.textureOnViewport&&!r&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),f=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,p=n.hasCompoundNodes(),m=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);f=f&&!r&&e.motionBlurEnabled&&!g;var v=f;r||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!r&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),f&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(v=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!d&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var y=n.style(),b=n.zoom(),w=a!==void 0?a:b,E=n.pan(),C={x:E.x,y:E.y},D={zoom:b,pan:{x:E.x,y:E.y}},I=e.prevViewport,_=I===void 0||D.zoom!==I.zoom||D.pan.x!==I.pan.x||D.pan.y!==I.pan.y;!_&&!(m&&!p)&&(e.motionBlurPxRatio=1),s&&(C=s),w*=u,C.x*=u,C.y*=u;var T=e.getCachedZSortedEles();function x(X,L,j,$,Y){var ae=X.globalCompositeOperation;X.globalCompositeOperation="destination-out",e.colorFillStyle(X,255,255,255,e.motionBlurTransparency),X.fillRect(L,j,$,Y),X.globalCompositeOperation=ae}function M(X,L){var j,$,Y,ae;!e.clearingMotionBlur&&(X===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||X===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(j={x:E.x*h,y:E.y*h},$=b*h,Y=e.canvasWidth*h,ae=e.canvasHeight*h):(j=C,$=w,Y=e.canvasWidth,ae=e.canvasHeight),X.setTransform(1,0,0,1,0,0),L==="motionBlur"?x(X,0,0,Y,ae):!r&&(L===void 0||L)&&X.clearRect(0,0,Y,ae),i||(X.translate(j.x,j.y),X.scale($,$)),s&&X.translate(s.x,s.y),a&&X.scale(a,a)}if(d||(e.textureDrawLastFrame=!1),d){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=n.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var A=e.data.bufferContexts[e.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var D=e.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:e.canvasWidth,height:e.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var R=l.contexts[e.NODE],O=e.textureCache.texture,D=e.textureCache.viewport;R.setTransform(1,0,0,1,0,0),f?x(R,0,0,D.width,D.height):R.clearRect(0,0,D.width,D.height);var k=y.core("outside-texture-bg-color").value,N=y.core("outside-texture-bg-opacity").value;e.colorFillStyle(R,k[0],k[1],k[2],N),R.fillRect(0,0,D.width,D.height);var b=n.zoom();M(R,!1),R.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u),R.drawImage(O,D.mpan.x,D.mpan.y,D.width/D.zoom/u,D.height/D.zoom/u)}else e.textureOnViewport&&!r&&(e.textureCache=null);var P=n.extent(),V=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),U=e.hideEdgesOnViewport&&V,F=[];if(F[e.NODE]=!c[e.NODE]&&f&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,F[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),F[e.DRAG]=!c[e.DRAG]&&f&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,F[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||o||F[e.NODE]){var B=f&&!F[e.NODE]&&h!==1,R=r||(B?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),G=f&&!B?"motionBlur":void 0;M(R,G),U?e.drawCachedNodes(R,T.nondrag,u,P):e.drawLayeredElements(R,T.nondrag,u,P),e.debug&&e.drawDebugPoints(R,T.nondrag),!i&&!f&&(c[e.NODE]=!1)}if(!o&&(c[e.DRAG]||i||F[e.DRAG])){var B=f&&!F[e.DRAG]&&h!==1,R=r||(B?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);M(R,f&&!B?"motionBlur":void 0),U?e.drawCachedNodes(R,T.drag,u,P):e.drawCachedElements(R,T.drag,u,P),e.debug&&e.drawDebugPoints(R,T.drag),!i&&!f&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,M),f&&h!==1){var Q=l.contexts[e.NODE],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],J=l.contexts[e.DRAG],ne=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],le=function(L,j,$){L.setTransform(1,0,0,1,0,0),$||!v?L.clearRect(0,0,e.canvasWidth,e.canvasHeight):x(L,0,0,e.canvasWidth,e.canvasHeight);var Y=h;L.drawImage(j,0,0,e.canvasWidth*Y,e.canvasHeight*Y,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||F[e.NODE])&&(le(Q,W,F[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||F[e.DRAG])&&(le(J,ne,F[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=D,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),f&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!d,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},BU)),r||n.emit("render")};var Il;Hn.drawSelectionRectangle=function(t,e){var n=this,r=n.cy,i=n.data,o=r.style(),a=t.drawOnlyNodeLayer,s=t.drawAllLayers,u=i.canvasNeedsRedraw,l=t.forcedContext;if(n.showFps||!a&&u[n.SELECT_BOX]&&!s){var c=l||i.contexts[n.SELECT_BOX];if(e(c),n.selection[4]==1&&(n.hoverData.selecting||n.touchData.selecting)){var d=n.cy.zoom(),f=o.core("selection-box-border-width").value/d;c.lineWidth=f,c.fillStyle="rgba("+o.core("selection-box-color").value[0]+","+o.core("selection-box-color").value[1]+","+o.core("selection-box-color").value[2]+","+o.core("selection-box-opacity").value+")",c.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),f>0&&(c.strokeStyle="rgba("+o.core("selection-box-border-color").value[0]+","+o.core("selection-box-border-color").value[1]+","+o.core("selection-box-border-color").value[2]+","+o.core("selection-box-opacity").value+")",c.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(i.bgActivePosistion&&!n.hoverData.selecting){var d=n.cy.zoom(),h=i.bgActivePosistion;c.fillStyle="rgba("+o.core("active-bg-color").value[0]+","+o.core("active-bg-color").value[1]+","+o.core("active-bg-color").value[2]+","+o.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,o.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var p=n.lastRedrawTime;if(n.showFps&&p){p=Math.round(p);var m=Math.round(1e3/p),g="1 frame = "+p+" ms = "+m+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Il){var v=c.measureText(g);Il=v.actualBoundingBoxAscent}c.fillText(g,0,Il);var y=60;c.strokeRect(0,Il+10,250,20),c.fillRect(0,Il+10,250*Math.min(m/y,1),20)}s||(u[n.SELECT_BOX]=!1)}};function MT(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r}function VU(t,e,n){var r=MT(t,t.VERTEX_SHADER,e),i=MT(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error("Could not initialize shaders");return o}function jU(t,e,n){n===void 0&&(n=e);var r=t.makeOffscreenCanvas(e,n),i=r.context=r.getContext("2d");return r.clear=function(){return i.clearRect(0,0,r.width,r.height)},r.clear(),r}function hb(t){var e=t.pixelRatio,n=t.cy.zoom(),r=t.cy.pan();return{zoom:n*e,pan:{x:r.x*e,y:r.y*e}}}function HU(t){var e=t.pixelRatio,n=t.cy.zoom();return n*e}function UU(t,e,n,r,i){var o=r*n+e.x,a=i*n+e.y;return a=Math.round(t.canvasHeight-a),[o,a]}function $U(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function zU(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ya(t,e,n){var r=t[0]/255,i=t[1]/255,o=t[2]/255,a=e,s=n||new Array(4);return s[0]=r*a,s[1]=i*a,s[2]=o*a,s[3]=a,s}function Is(t,e){var n=e||new Array(4);return n[0]=(t>>0&255)/255,n[1]=(t>>8&255)/255,n[2]=(t>>16&255)/255,n[3]=(t>>24&255)/255,n}function qU(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function GU(t,e){var n=t.createTexture();return n.buffer=function(r){t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},n.deleteTexture=function(){t.deleteTexture(n)},n}function g1(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function v1(t,e,n){switch(e){case t.FLOAT:return new Float32Array(n);case t.INT:return new Int32Array(n)}}function WU(t,e,n,r,i,o){switch(e){case t.FLOAT:return new Float32Array(n.buffer,o*r,i);case t.INT:return new Int32Array(n.buffer,o*r,i)}}function ZU(t,e,n,r){var i=g1(t,e),o=Zt(i,2),a=o[0],s=o[1],u=v1(t,s,r),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(n,a,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(n,a,s,0,0),t.enableVertexAttribArray(n),t.bindBuffer(t.ARRAY_BUFFER,null),l}function li(t,e,n,r){var i=g1(t,n),o=Zt(i,3),a=o[0],s=o[1],u=o[2],l=v1(t,s,e*a),c=a*u,d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,e*c,t.DYNAMIC_DRAW),t.enableVertexAttribArray(r),s===t.FLOAT?t.vertexAttribPointer(r,a,s,!1,c,0):s===t.INT&&t.vertexAttribIPointer(r,a,s,c,0),t.vertexAttribDivisor(r,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var f=new Array(e),h=0;h<e;h++)f[h]=WU(t,s,l,c,a,h);return d.dataArray=l,d.stride=c,d.size=a,d.getView=function(p){return f[p]},d.setPoint=function(p,m,g){var v=f[p];v[0]=m,v[1]=g},d.bufferSubData=function(p){t.bindBuffer(t.ARRAY_BUFFER,d),p?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,p*a):t.bufferSubData(t.ARRAY_BUFFER,0,l)},d}function YU(t,e,n){for(var r=9,i=new Float32Array(e*r),o=new Array(e),a=0;a<e;a++){var s=a*r*4;o[a]=new Float32Array(i.buffer,s,r)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,i.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=n+l;t.enableVertexAttribArray(c),t.vertexAttribPointer(c,3,t.FLOAT,!1,36,l*12),t.vertexAttribDivisor(c,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(d){return o[d]},u.setData=function(d,f){o[f].set(d,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,i)},u}function KU(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(r,i){t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var AT=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function m0(){var t=new AT(9);return AT!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function RT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function QU(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=n[0],h=n[1],p=n[2],m=n[3],g=n[4],v=n[5],y=n[6],b=n[7],w=n[8];return t[0]=f*r+h*a+p*l,t[1]=f*i+h*s+p*c,t[2]=f*o+h*u+p*d,t[3]=m*r+g*a+v*l,t[4]=m*i+g*s+v*c,t[5]=m*o+g*u+v*d,t[6]=y*r+b*a+w*l,t[7]=y*i+b*s+w*c,t[8]=y*o+b*u+w*d,t}function sh(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=f*r+h*a+l,t[7]=f*i+h*s+c,t[8]=f*o+h*u+d,t}function NT(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],f=Math.sin(n),h=Math.cos(n);return t[0]=h*r+f*a,t[1]=h*i+f*s,t[2]=h*o+f*u,t[3]=h*a-f*r,t[4]=h*s-f*i,t[5]=h*u-f*o,t[6]=l,t[7]=c,t[8]=d,t}function V0(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function XU(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var JU=(function(){function t(e,n,r,i){Eo(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=n,this.texRows=r,this.texHeight=Math.floor(n/r),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,n,n),this.scratch=i(e,n,this.texHeight,"scratch")}return Co(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(n){var r=n.w,i=n.h,o=this.texHeight,a=this.texSize,s=o/i,u=r*s,l=i*s;return u>a&&(s=a/r,u=r*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(n,r,i){var o=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(r),c=l.scale,d=l.texW,f=l.texH,h=function(b,w){if(i&&w){var E=w.context,C=b.x,D=b.row,I=C,_=u*D;E.save(),E.translate(I,_),E.scale(c,c),i(E,r),E.restore()}},p=[null,null],m=function(){h(o.freePointer,o.canvas),p[0]={x:o.freePointer.x,y:o.freePointer.row*u,w:d,h:f},p[1]={x:o.freePointer.x+d,y:o.freePointer.row*u,w:0,h:f},o.freePointer.x+=d,o.freePointer.x==a&&(o.freePointer.x=0,o.freePointer.row++)},g=function(){var b=o.scratch,w=o.canvas;b.clear(),h({x:0,row:0},b);var E=a-o.freePointer.x,C=d-E,D=u;{var I=o.freePointer.x,_=o.freePointer.row*u,T=E;w.context.drawImage(b,0,0,T,D,I,_,T,D),p[0]={x:I,y:_,w:T,h:f}}{var x=E,M=(o.freePointer.row+1)*u,A=C;w&&w.context.drawImage(b,x,0,A,D,0,M,A,D),p[1]={x:0,y:M,w:A,h:f}}o.freePointer.x=C,o.freePointer.row++},v=function(){o.freePointer.x=0,o.freePointer.row++};if(this.freePointer.x+d<=a)m();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(v(),m()):this.enableWrapping?g():(v(),m())}return this.keyToLocation.set(n,p),this.needsBuffer=!0,p}},{key:"getOffsets",value:function(n){return this.keyToLocation.get(n)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(n){if(this.locked)return!1;var r=this.texSize,i=this.texRows,o=this.getScale(n),a=o.texW;return this.freePointer.x+a>r?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(n){this.texture||(this.texture=GU(n,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),e$=(function(){function t(e,n,r,i){Eo(this,t),this.r=e,this.texSize=n,this.texRows=r,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Co(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var n=this.r,r=this.texSize,i=this.texRows,o=this.createTextureCanvas;return new JU(n,r,i,o)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var n=this.r,r=this.texSize,i=this.texRows,o=this.createTextureCanvas,a=Math.floor(r/i);this.scratch=o(n,r,a,"scratch")}return this.scratch}},{key:"draw",value:function(n,r,i){var o=this.styleKeyToAtlas.get(n);return o||(o=this.atlases[this.atlases.length-1],(!o||!o.canFit(r))&&(o&&o.lock(),o=this._createAtlas(),this.atlases.push(o)),o.draw(n,r,i),this.styleKeyToAtlas.set(n,o)),o}},{key:"getAtlas",value:function(n){return this.styleKeyToAtlas.get(n)}},{key:"hasAtlas",value:function(n){return this.styleKeyToAtlas.has(n)}},{key:"markKeyForGC",value:function(n){this.markedKeys.add(n)}},{key:"gc",value:function(){var n=this,r=this.markedKeys;if(r.size===0){console.log("nothing to garbage collect");return}var i=[],o=new Map,a=null,s=tr(this.atlases),u;try{var l=function(){var d=u.value,f=d.getKeys(),h=t$(r,f);if(h.size===0)return i.push(d),f.forEach(function(E){return o.set(E,d)}),1;a||(a=n._createAtlas(),i.push(a));var p=tr(f),m;try{for(p.s();!(m=p.n()).done;){var g=m.value;if(!h.has(g)){var v=d.getOffsets(g),y=Zt(v,2),b=y[0],w=y[1];a.canFit({w:b.w+w.w,h:b.h})||(a.lock(),a=n._createAtlas(),i.push(a)),d.canvas&&(n._copyTextureToNewAtlas(g,d,a),o.set(g,a))}}}catch(E){p.e(E)}finally{p.f()}d.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=o,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(n,r,i){var o=r.getOffsets(n),a=Zt(o,2),s=a[0],u=a[1];if(u.w===0)i.draw(n,s,function(f){f.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(r.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(r.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,d=s.h;i.draw(n,{w:c,h:d},function(f){f.drawImage(l,0,0,c,d,0,0,c,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function t$(t,e){return t.intersection?t.intersection(e):new Set(uh(t).filter(function(n){return e.has(n)}))}var n$=(function(){function t(e,n){Eo(this,t),this.r=e,this.globalOptions=n,this.atlasSize=n.webglTexSize,this.maxAtlasesPerBatch=n.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Co(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(n,r){var i=this.globalOptions,o=i.webglTexSize,a=i.createTextureCanvas,s=r.texRows,u=this._cacheScratchCanvas(a),l=new e$(this.r,o,s,u);this.collections.set(n,l)}},{key:"addRenderType",value:function(n,r){var i=r.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var o=this.collections.get(i),a=Me({type:n,atlasCollection:o},r);this.renderTypes.set(n,a)}},{key:"getRenderTypeOpts",value:function(n){return this.renderTypes.get(n)}},{key:"getAtlasCollection",value:function(n){return this.collections.get(n)}},{key:"_cacheScratchCanvas",value:function(n){var r=-1,i=-1,o=null;return function(a,s,u,l){return l?((!o||s!=r||u!=i)&&(r=s,i=u,o=n(a,s,u)),o):n(a,s,u)}}},{key:"_key",value:function(n,r){return"".concat(n,"-").concat(r)}},{key:"invalidate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.forceRedraw,a=o===void 0?!1:o,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,d=!1,f=!1,h=tr(n),p;try{for(h.s();!(p=h.n()).done;){var m=p.value;if(u(m)){var g=tr(this.renderTypes.values()),v;try{var y=function(){var w=v.value,E=w.type;if(c(E)){var C=r.collections.get(w.collection),D=w.getKey(m),I=Array.isArray(D)?D:[D];if(a)I.forEach(function(M){return C.markKeyForGC(M)}),f=!0;else{var _=w.getID?w.getID(m):m.id(),T=r._key(E,_),x=r.typeAndIdToKey.get(T);x!==void 0&&!zU(I,x)&&(d=!0,r.typeAndIdToKey.delete(T),x.forEach(function(M){return C.markKeyForGC(M)}))}}};for(g.s();!(v=g.n()).done;)y()}catch(b){g.e(b)}finally{g.f()}}}}catch(b){h.e(b)}finally{h.f()}return f&&(this.gc(),d=!1),d}},{key:"gc",value:function(){var n=tr(this.collections.values()),r;try{for(n.s();!(r=n.n()).done;){var i=r.value;i.gc()}}catch(o){n.e(o)}finally{n.f()}}},{key:"getOrCreateAtlas",value:function(n,r,i,o){var a=this.renderTypes.get(r),s=this.collections.get(a.collection),u=!1,l=s.draw(o,i,function(f){a.drawClipped?(f.save(),f.beginPath(),f.rect(0,0,i.w,i.h),f.clip(),a.drawElement(f,n,i,!0,!0),f.restore()):a.drawElement(f,n,i,!0,!0),u=!0});if(u){var c=a.getID?a.getID(n):n.id(),d=this._key(r,c);this.typeAndIdToKey.has(d)?this.typeAndIdToKey.get(d).push(o):this.typeAndIdToKey.set(d,[o])}return l}},{key:"getAtlasInfo",value:function(n,r){var i=this,o=this.renderTypes.get(r),a=o.getKey(n),s=Array.isArray(a)?a:[a];return s.map(function(u){var l=o.getBoundingBox(n,u),c=i.getOrCreateAtlas(n,r,l,u),d=c.getOffsets(u),f=Zt(d,2),h=f[0],p=f[1];return{atlas:c,tex:h,tex1:h,tex2:p,bb:l}})}},{key:"getDebugInfo",value:function(){var n=[],r=tr(this.collections),i;try{for(r.s();!(i=r.n()).done;){var o=Zt(i.value,2),a=o[0],s=o[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;n.push({type:a,keyCount:l,atlasCount:c})}}catch(d){r.e(d)}finally{r.f()}return n}}])})(),r$=(function(){function t(e){Eo(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Co(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(n,r){return r})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(n){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(n):!0}},{key:"getAtlasIndexForBatch",value:function(n){var r=this.batchAtlases.indexOf(n);if(r<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(n),r=this.batchAtlases.length-1}return r}}])})(),i$=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,o$=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,a$=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,s$=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Nl={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},wh={IGNORE:1,USE_BB:2},y0=0,OT=1,kT=2,b0=3,Ss=4,Kf=5,Sl=6,_l=7,u$=(function(){function t(e,n,r){Eo(this,t),this.r=e,this.gl=n,this.maxInstances=r.webglBatchSize,this.atlasSize=r.webglTexSize,this.bgColor=r.bgColor,this.debug=r.webglDebug,this.batchDebugInfo=[],r.enableWrapping=!0,r.createTextureCanvas=jU,this.atlasManager=new n$(e,r),this.batchManager=new r$(r),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Nl.SCREEN),this.pickingProgram=this._createShaderProgram(Nl.PICKING),this.vao=this._createVAO()}return Co(t,[{key:"addAtlasCollection",value:function(n,r){this.atlasManager.addAtlasCollection(n,r)}},{key:"addTextureAtlasRenderType",value:function(n,r){this.atlasManager.addRenderType(n,r)}},{key:"addSimpleShapeRenderType",value:function(n,r){this.simpleShapeOptions.set(n,r)}},{key:"invalidate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.type,o=this.atlasManager;return i?o.invalidate(n,{filterType:function(s){return s===i},forceRedraw:!0}):o.invalidate(n)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(n){var r=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(y0,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Ss," || aVertType == ").concat(_l,` 
             || aVertType == `).concat(Kf," || aVertType == ").concat(Sl,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(OT,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(kT,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(b0,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),o=this.batchManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(o.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(i$,`
      `).concat(o$,`
      `).concat(a$,`
      `).concat(s$,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(y0,`) {
          // look up the texel from the texture unit
          `).concat(o.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(b0,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Ss,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Ss," || vVertType == ").concat(_l,` 
          || vVertType == `).concat(Kf," || vVertType == ").concat(Sl,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Ss,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(_l,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(_l,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(n.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=VU(r,i,a);s.aPosition=r.getAttribLocation(s,"aPosition"),s.aIndex=r.getAttribLocation(s,"aIndex"),s.aVertType=r.getAttribLocation(s,"aVertType"),s.aTransform=r.getAttribLocation(s,"aTransform"),s.aAtlasId=r.getAttribLocation(s,"aAtlasId"),s.aTex=r.getAttribLocation(s,"aTex"),s.aPointAPointB=r.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=r.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=r.getAttribLocation(s,"aLineWidth"),s.aColor=r.getAttribLocation(s,"aColor"),s.aCornerRadius=r.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=r.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=r.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=r.getUniformLocation(s,"uAtlasSize"),s.uBGColor=r.getUniformLocation(s,"uBGColor"),s.uZoom=r.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(r.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var n=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=n.length/2;var r=this.maxInstances,i=this.gl,o=this.program,a=i.createVertexArray();return i.bindVertexArray(a),ZU(i,"vec2",o.aPosition,n),this.transformBuffer=YU(i,r,o.aTransform),this.indexBuffer=li(i,r,"vec4",o.aIndex),this.vertTypeBuffer=li(i,r,"int",o.aVertType),this.atlasIdBuffer=li(i,r,"int",o.aAtlasId),this.texBuffer=li(i,r,"vec4",o.aTex),this.pointAPointBBuffer=li(i,r,"vec4",o.aPointAPointB),this.pointCPointDBuffer=li(i,r,"vec4",o.aPointCPointD),this.lineWidthBuffer=li(i,r,"vec2",o.aLineWidth),this.colorBuffer=li(i,r,"vec4",o.aColor),this.cornerRadiusBuffer=li(i,r,"vec4",o.aCornerRadius),this.borderColorBuffer=li(i,r,"vec4",o.aBorderColor),i.bindVertexArray(null),a}},{key:"buffers",get:function(){var n=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(r){return lo(r,"Buffer")}).map(function(r){return n[r]})),this._buffers}},{key:"startFrame",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nl.SCREEN;this.panZoomMatrix=n,this.renderTarget=r,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(n,r){return n.visible()?r&&r.isVisible?r.isVisible(n):!0:!1}},{key:"drawTexture",value:function(n,r,i){var o=this.atlasManager,a=this.batchManager,s=o.getRenderTypeOpts(i);if(this._isVisible(n,s)&&!(n.isEdge()&&!this._isValidEdge(n))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(n);if(u===wh.IGNORE)return;if(u==wh.USE_BB){this.drawPickingRectangle(n,r,i);return}}var l=o.getAtlasInfo(n,i),c=tr(l),d;try{for(c.s();!(d=c.n()).done;){var f=d.value,h=f.atlas,p=f.tex1,m=f.tex2;a.canAddToCurrentBatch(h)||this.endBatch();for(var g=a.getAtlasIndexForBatch(h),v=0,y=[[p,!0],[m,!1]];v<y.length;v++){var b=Zt(y[v],2),w=b[0],E=b[1];if(w.w!=0){var C=this.instanceCount;this.vertTypeBuffer.getView(C)[0]=y0;var D=this.indexBuffer.getView(C);Is(r,D);var I=this.atlasIdBuffer.getView(C);I[0]=g;var _=this.texBuffer.getView(C);_[0]=w.x,_[1]=w.y,_[2]=w.w,_[3]=w.h;var T=this.transformBuffer.getMatrixView(C);this.setTransformMatrix(n,T,s,f,E),this.instanceCount++,E||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(x){c.e(x)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(n,r,i,o){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=n.pstyle(i.shapeProps.padding).pfValue),o){var u=o.bb,l=o.tex1,c=o.tex2,d=l.w/(l.w+c.w);a||(d=1-d);var f=this._getAdjustedBB(u,s,a,d);this._applyTransformMatrix(r,f,i,n)}else{var h=i.getBoundingBox(n),p=this._getAdjustedBB(h,s,!0,1);this._applyTransformMatrix(r,p,i,n)}}},{key:"_applyTransformMatrix",value:function(n,r,i,o){var a,s;RT(n);var u=i.getRotation?i.getRotation(o):0;if(u!==0){var l=i.getRotationPoint(o),c=l.x,d=l.y;sh(n,n,[c,d]),NT(n,n,u);var f=i.getRotationOffset(o);a=f.x+(r.xOffset||0),s=f.y+(r.yOffset||0)}else a=r.x1,s=r.y1;sh(n,n,[a,s]),V0(n,n,[r.w,r.h])}},{key:"_getAdjustedBB",value:function(n,r,i,o){var a=n.x1,s=n.y1,u=n.w,l=n.h,c=n.yOffset;r&&(a-=r,s-=r,u+=2*r,l+=2*r);var d=0,f=u*o;return i&&o<1?u=f:!i&&o<1&&(d=u-f,a+=d,u=f),{x1:a,y1:s,w:u,h:l,xOffset:d,yOffset:c}}},{key:"drawPickingRectangle",value:function(n,r,i){var o=this.atlasManager.getRenderTypeOpts(i),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=Ss;var s=this.indexBuffer.getView(a);Is(r,s);var u=this.colorBuffer.getView(a);ya([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(n,l,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(n,r,i){var o=this.simpleShapeOptions.get(i);if(this._isVisible(n,o)){var a=o.shapeProps,s=this._getVertTypeForShape(n,a.shape);if(s===void 0||o.isSimple&&!o.isSimple(n)){this.drawTexture(n,r,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Kf||s===Sl){var l=o.getBoundingBox(n),c=this._getCornerRadius(n,a.radius,l),d=this.cornerRadiusBuffer.getView(u);d[0]=c,d[1]=c,d[2]=c,d[3]=c,s===Sl&&(d[0]=0,d[2]=0)}var f=this.indexBuffer.getView(u);Is(r,f);var h=n.pstyle(a.color).value,p=n.pstyle(a.opacity).value,m=this.colorBuffer.getView(u);ya(h,p,m);var g=this.lineWidthBuffer.getView(u);if(g[0]=0,g[1]=0,a.border){var v=n.pstyle("border-width").value;if(v>0){var y=n.pstyle("border-color").value,b=n.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);ya(y,b,w);var E=n.pstyle("border-position").value;if(E==="inside")g[0]=0,g[1]=-v;else if(E==="outside")g[0]=v,g[1]=0;else{var C=v/2;g[0]=C,g[1]=-C}}}var D=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(n,D,o),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(n,r){var i=n.pstyle(r).value;switch(i){case"rectangle":return Ss;case"ellipse":return _l;case"roundrectangle":case"round-rectangle":return Kf;case"bottom-round-rectangle":return Sl;default:return}}},{key:"_getCornerRadius",value:function(n,r,i){var o=i.w,a=i.h;if(n.pstyle(r).value==="auto")return mo(o,a);var s=n.pstyle(r).pfValue,u=o/2,l=a/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(n,r,i){if(n.visible()){var o=n._private.rscratch,a,s,u;if(i==="source"?(a=o.arrowStartX,s=o.arrowStartY,u=o.srcArrowAngle):(a=o.arrowEndX,s=o.arrowEndY,u=o.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=n.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=n.pstyle(i+"-arrow-color").value,d=n.pstyle("opacity").value,f=n.pstyle("line-opacity").value,h=d*f,p=n.pstyle("width").pfValue,m=n.pstyle("arrow-scale").value,g=this.r.getArrowWidth(p,m),v=this.instanceCount,y=this.transformBuffer.getMatrixView(v);RT(y),sh(y,y,[a,s]),V0(y,y,[g,g]),NT(y,y,u),this.vertTypeBuffer.getView(v)[0]=b0;var b=this.indexBuffer.getView(v);Is(r,b);var w=this.colorBuffer.getView(v);ya(c,h,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(n,r){if(n.visible()){var i=this._getEdgePoints(n);if(i){var o=n.pstyle("opacity").value,a=n.pstyle("line-opacity").value,s=n.pstyle("width").pfValue,u=n.pstyle("line-color").value,l=o*a;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=OT;var d=this.indexBuffer.getView(c);Is(r,d);var f=this.colorBuffer.getView(c);ya(u,l,f);var h=this.lineWidthBuffer.getView(c);h[0]=s;var p=this.pointAPointBBuffer.getView(c);p[0]=i[0],p[1]=i[1],p[2]=i[2],p[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var m=0;m<i.length-2;m+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=kT;var v=this.indexBuffer.getView(g);Is(r,v);var y=this.colorBuffer.getView(g);ya(u,l,y);var b=this.lineWidthBuffer.getView(g);b[0]=s;var w=i[m-2],E=i[m-1],C=i[m],D=i[m+1],I=i[m+2],_=i[m+3],T=i[m+4],x=i[m+5];m==0&&(w=2*C-I+.001,E=2*D-_+.001),m==i.length-4&&(T=2*I-C+.001,x=2*_-D+.001);var M=this.pointAPointBBuffer.getView(g);M[0]=w,M[1]=E,M[2]=C,M[3]=D;var A=this.pointCPointDBuffer.getView(g);A[0]=I,A[1]=_,A[2]=T,A[3]=x,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(n){var r=n._private.rscratch;return!(r.badLine||r.allpts==null||isNaN(r.allpts[0]))}},{key:"_getEdgePoints",value:function(n){var r=n._private.rscratch;if(this._isValidEdge(n)){var i=r.allpts;if(i.length==4)return i;var o=this._getNumSegments(n);return this._getCurveSegmentPoints(i,o)}}},{key:"_getNumSegments",value:function(n){var r=15;return Math.min(Math.max(r,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(n,r){if(n.length==4)return n;for(var i=Array((r+1)*2),o=0;o<=r;o++)if(o==0)i[0]=n[0],i[1]=n[1];else if(o==r)i[o*2]=n[n.length-2],i[o*2+1]=n[n.length-1];else{var a=o/r;this._setCurvePoint(n,a,i,o*2)}return i}},{key:"_setCurvePoint",value:function(n,r,i,o){if(n.length<=2)i[o]=n[0],i[o+1]=n[1];else{for(var a=Array(n.length-2),s=0;s<a.length;s+=2){var u=(1-r)*n[s]+r*n[s+2],l=(1-r)*n[s+1]+r*n[s+3];a[s]=u,a[s+1]=l}return this._setCurvePoint(a,r,i,o)}}},{key:"endBatch",value:function(){var n=this.gl,r=this.vao,i=this.vertexCount,o=this.instanceCount;if(o!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;n.useProgram(a),n.bindVertexArray(r);var s=tr(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(o)}}catch(p){s.e(p)}finally{s.f()}for(var c=this.batchManager.getAtlases(),d=0;d<c.length;d++)c[d].bufferIfNeeded(n);for(var f=0;f<c.length;f++)n.activeTexture(n.TEXTURE0+f),n.bindTexture(n.TEXTURE_2D,c[f].texture),n.uniform1i(a.uTextures[f],f);n.uniform1f(a.uZoom,HU(this.r)),n.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),n.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var h=ya(this.bgColor,1);n.uniform4fv(a.uBGColor,h),n.drawArraysInstanced(n.TRIANGLES,0,i,o),n.bindVertexArray(null),n.bindTexture(n.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:o,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var n=this.atlasManager.getDebugInfo(),r=n.reduce(function(a,s){return a+s.atlasCount},0),i=this.batchDebugInfo,o=i.reduce(function(a,s){return a+s.count},0);return{atlasInfo:n,totalAtlases:r,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:o}}}])})(),m1={};m1.initWebgl=function(t,e){var n=this,r=n.data.contexts[n.WEBGL];t.bgColor=l$(n),t.webglTexSize=Math.min(t.webglTexSize,r.getParameter(r.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=t.webglDebug,n.webglDebugShowAtlases=t.webglDebugShowAtlases,n.pickingFrameBuffer=KU(r),n.pickingFrameBuffer.needsDraw=!0,n.drawing=new u$(n,r,t);var i=function(d){return function(f){return n.getTextAngle(f,d)}},o=function(d){return function(f){var h=f.pstyle(d);return h&&h.value}},a=function(d){return function(f){return f.pstyle("".concat(d,"-opacity")).value>0}},s=function(d){var f=d.pstyle("text-events").strValue==="yes";return f?wh.USE_BB:wh.IGNORE},u=function(d){var f=d.position(),h=f.x,p=f.y,m=d.outerWidth(),g=d.outerHeight();return{w:m,h:g,x1:h-m/2,y1:p-g/2}};n.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),n.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),n.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),n.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:$U,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),n.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),n.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),n.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:w0(e.getLabelKey,null),getBoundingBox:D0(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:o("label")}),n.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:w0(e.getSourceLabelKey,"source"),getBoundingBox:D0(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:o("source-label")}),n.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:w0(e.getTargetLabelKey,"target"),getBoundingBox:D0(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:o("target-label")});var l=Zl(function(){console.log("garbage collect flag set"),n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(c,d){var f=!1;d&&d.length>0&&(f|=n.drawing.invalidate(d)),f&&l()}),c$(n)};function l$(t){var e=t.cy.container(),n=e&&e.style&&e.style.backgroundColor||"white";return qT(n)}function y1(t,e){var n=t._private.rscratch;return Jn(n,"labelWrapCachedLines",e)||[]}var w0=function(e,n){return function(r){var i=e(r),o=y1(r,n);return o.length>1?o.map(function(a,s){return"".concat(i,"_").concat(s)}):i}},D0=function(e,n){return function(r,i){var o=e(r);if(typeof i=="string"){var a=i.indexOf("_");if(a>0){var s=Number(i.substring(a+1)),u=y1(r,n),l=o.h/u.length,c=l*s,d=o.y1+c;return{x1:o.x1,w:o.w,y1:d,h:l,yOffset:c}}}return o}};function c$(t){{var e=t.render;t.render=function(o){o=o||{};var a=t.cy;t.webgl&&(a.zoom()>c1?(d$(t),e.call(t,o)):(f$(t),w1(t,o,Nl.SCREEN)))}}{var n=t.matchCanvasSize;t.matchCanvasSize=function(o){n.call(t,o),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(o,a,s,u){return y$(t,o,a)};{var r=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){r.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var i=t.notify;t.notify=function(o,a){i.call(t,o,a),o==="viewport"||o==="bounds"?t.pickingFrameBuffer.needsDraw=!0:o==="background"&&t.drawing.invalidate(a,{type:"node-body"})}}}function d$(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function f$(t){var e=function(r){r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.canvasWidth,t.canvasHeight),r.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function h$(t){var e=t.canvasWidth,n=t.canvasHeight,r=hb(t),i=r.pan,o=r.zoom,a=m0();sh(a,a,[i.x,i.y]),V0(a,a,[o,o]);var s=m0();XU(s,e,n);var u=m0();return QU(u,s,a),u}function b1(t,e){var n=t.canvasWidth,r=t.canvasHeight,i=hb(t),o=i.pan,a=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n,r),e.translate(o.x,o.y),e.scale(a,a)}function p$(t,e){t.drawSelectionRectangle(e,function(n){return b1(t,n)})}function g$(t){var e=t.data.contexts[t.NODE];e.save(),b1(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function v$(t){var e=function(i,o,a){for(var s=i.atlasManager.getAtlasCollection(o),u=t.data.contexts[t.NODE],l=s.atlases,c=0;c<l.length;c++){var d=l[c],f=d.canvas;if(f){var h=f.width,p=f.height,m=h*c,g=f.height*a,v=.4;u.save(),u.scale(v,v),u.drawImage(f,m,g),u.strokeStyle="black",u.rect(m,g,h,p),u.stroke(),u.restore()}}},n=0;e(t.drawing,"node",n++),e(t.drawing,"label",n++)}function m$(t,e,n,r,i){var o,a,s,u,l=hb(t),c=l.pan,d=l.zoom;{var f=UU(t,c,d,e,n),h=Zt(f,2),p=h[0],m=h[1],g=6;o=p-g/2,a=m-g/2,s=g,u=g}if(s===0||u===0)return[];var v=t.data.contexts[t.WEBGL];v.bindFramebuffer(v.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(v.viewport(0,0,v.canvas.width,v.canvas.height),w1(t,null,Nl.PICKING),t.pickingFrameBuffer.needsDraw=!1);var y=s*u,b=new Uint8Array(y*4);v.readPixels(o,a,s,u,v.RGBA,v.UNSIGNED_BYTE,b),v.bindFramebuffer(v.FRAMEBUFFER,null);for(var w=new Set,E=0;E<y;E++){var C=b.slice(E*4,E*4+4),D=qU(C)-1;D>=0&&w.add(D)}return w}function y$(t,e,n){var r=m$(t,e,n),i=t.getCachedZSortedEles(),o,a,s=tr(r),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!o&&c.isNode()&&(o=c),!a&&c.isEdge()&&(a=c),o&&a)break}}catch(d){s.e(d)}finally{s.f()}return[o,a].filter(Boolean)}function E0(t,e,n){var r=t.drawing;e+=1,n.isNode()?(r.drawNode(n,e,"node-underlay"),r.drawNode(n,e,"node-body"),r.drawTexture(n,e,"label"),r.drawNode(n,e,"node-overlay")):(r.drawEdgeLine(n,e),r.drawEdgeArrow(n,e,"source"),r.drawEdgeArrow(n,e,"target"),r.drawTexture(n,e,"label"),r.drawTexture(n,e,"edge-source-label"),r.drawTexture(n,e,"edge-target-label"))}function w1(t,e,n){var r;t.webglDebug&&(r=performance.now());var i=t.drawing,o=0;if(n.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&p$(t,e),t.data.canvasNeedsRedraw[t.NODE]||n.picking){var a=t.data.contexts[t.WEBGL];n.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var s=h$(t),u=t.getCachedZSortedEles();if(o=u.length,i.startFrame(s,n),n.screen){for(var l=0;l<u.nondrag.length;l++)E0(t,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)E0(t,c,u.drag[c])}else if(n.picking)for(var d=0;d<u.length;d++)E0(t,d,u[d]);i.endFrame(),n.screen&&t.webglDebugShowAtlases&&(g$(t),v$(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var f=performance.now(),h=!1,p=Math.ceil(f-r),m=i.getDebugInfo(),g=["".concat(o," elements"),"".concat(m.totalInstances," instances"),"".concat(m.batchCount," batches"),"".concat(m.totalAtlases," atlases"),"".concat(m.wrappedCount," wrapped textures"),"".concat(m.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(n.name,") - time ").concat(p,"ms, ").concat(g));else{console.log("WebGL (".concat(n.name,") - frame time ").concat(p,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var v=m.atlasInfo,y=tr(v),b;try{for(y.s();!(b=y.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(E){y.e(E)}finally{y.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,i.gc())}var _o={};_o.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[u*2],n+s*o[u*2+1]);t.closePath()};_o.drawRoundPolygonPath=function(t,e,n,r,i,o,a){a.forEach(function(s){return t1(t,s)}),t.closePath()};_o.drawRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?mo(r,i):Math.min(o,s,a);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,u),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.arcTo(e-a,n-s,e,n-s,u),t.lineTo(e,n-s),t.closePath()};_o.drawBottomRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?mo(r,i):o;t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+a,n-s),t.lineTo(e+a,n),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.lineTo(e-a,n-s),t.lineTo(e,n-s),t.closePath()};_o.drawCutRectanglePath=function(t,e,n,r,i,o,a){var s=r/2,u=i/2,l=a==="auto"?J0():a;t.beginPath&&t.beginPath(),t.moveTo(e-s+l,n-u),t.lineTo(e+s-l,n-u),t.lineTo(e+s,n-u+l),t.lineTo(e+s,n+u-l),t.lineTo(e+s-l,n+u),t.lineTo(e-s+l,n+u),t.lineTo(e-s,n+u-l),t.lineTo(e-s,n-u+l),t.closePath()};_o.drawBarrelPath=function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,u=e+o,l=n-a,c=n+a,d=S0(r,i),f=d.widthOffset,h=d.heightOffset,p=d.ctrlPtOffsetPct*f;t.beginPath&&t.beginPath(),t.moveTo(s,l+h),t.lineTo(s,c-h),t.quadraticCurveTo(s+p,c,s+f,c),t.lineTo(u-f,c),t.quadraticCurveTo(u-p,c,u,c-h),t.lineTo(u,l+h),t.quadraticCurveTo(u-p,l,u-f,l),t.lineTo(s+f,l),t.quadraticCurveTo(s+p,l,s,l+h),t.closePath()};var PT=Math.sin(0),FT=Math.cos(0),j0={},H0={},D1=Math.PI/40;for(ba=0*Math.PI;ba<2*Math.PI;ba+=D1)j0[ba]=Math.sin(ba),H0[ba]=Math.cos(ba);var ba;_o.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=D1)o=e-s*j0[l]*PT+s*H0[l]*FT,a=n+u*H0[l]*PT+u*j0[l]*FT,l===0?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var ec={};ec.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]};ec.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=t.full?Math.ceil(r.w):i[2],a=t.full?Math.ceil(r.h):i[3],s=se(t.maxWidth)||se(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)o*=t.scale,a*=t.scale,l=t.scale;else if(s){var c=1/0,d=1/0;se(t.maxWidth)&&(c=l*t.maxWidth/o),se(t.maxHeight)&&(d=l*t.maxHeight/a),l=Math.min(c,d),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var f=document.createElement("canvas");f.width=o,f.height=a,f.style.width=o+"px",f.style.height=a+"px";var h=f.getContext("2d");if(o>0&&a>0){h.clearRect(0,0,o,a),h.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)h.translate(-r.x1*l,-r.y1*l),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(r.x1*l,r.y1*l);else{var m=e.pan(),g={x:m.x*l,y:m.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,o,a),h.fill())}return f};function b$(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}function LT(t){var e=t.indexOf(",");return t.substr(e+1)}function E1(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Bs(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(a){o(a)}});case"blob":return b$(LT(r()),n);case"base64":return LT(r());case"base64uri":default:return r()}}ec.png=function(t){return E1(t,this.bufferCanvasImage(t),"image/png")};ec.jpg=function(t){return E1(t,this.bufferCanvasImage(t),"image/jpeg")};var C1={};C1.nodeShapeImpl=function(t,e,n,r,i,o,a,s){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o,s);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}};var w$=I1,Ge=I1.prototype;Ge.CANVAS_LAYERS=3;Ge.SELECT_BOX=0;Ge.DRAG=1;Ge.NODE=2;Ge.WEBGL=3;Ge.CANVAS_TYPES=["2d","2d","2d","webgl2"];Ge.BUFFER_COUNT=3;Ge.TEXTURE_BUFFER=0;Ge.MOTIONBLUR_BUFFER_NODE=1;Ge.MOTIONBLUR_BUFFER_DRAG=2;function I1(t){var e=this,n=e.cy.window(),r=n.document;t.webgl&&(Ge.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Ge.CANVAS_LAYERS),contexts:new Array(Ge.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Ge.CANVAS_LAYERS),bufferCanvases:new Array(Ge.BUFFER_COUNT),bufferContexts:new Array(Ge.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=r.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};p2()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Ge.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=r.createElement("canvas"),d=Ge.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(d),e.data.contexts[l]||_t("Could not create canvas of type "+d),Object.keys(u).forEach(function(X){c.style[X]=u[X]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Ge.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Ge.NODE].setAttribute("data-id","layer"+Ge.NODE+"-node"),e.data.canvases[Ge.SELECT_BOX].setAttribute("data-id","layer"+Ge.SELECT_BOX+"-selectbox"),e.data.canvases[Ge.DRAG].setAttribute("data-id","layer"+Ge.DRAG+"-drag"),e.data.canvases[Ge.WEBGL]&&e.data.canvases[Ge.WEBGL].setAttribute("data-id","layer"+Ge.WEBGL+"-webgl");for(var l=0;l<Ge.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=r.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var f=jn(),h=function(L){return{x:(L.x1+L.x2)/2,y:(L.y1+L.y2)/2}},p=function(L){return{x:-L.w/2,y:-L.h/2}},m=function(L){var j=L[0]._private,$=j.oldBackgroundTimestamp===j.backgroundTimestamp;return!$},g=function(L){return L[0]._private.nodeKey},v=function(L){return L[0]._private.labelStyleKey},y=function(L){return L[0]._private.sourceLabelStyleKey},b=function(L){return L[0]._private.targetLabelStyleKey},w=function(L,j,$,Y,ae){return e.drawElement(L,j,$,!1,!1,ae)},E=function(L,j,$,Y,ae){return e.drawElementText(L,j,$,Y,"main",ae)},C=function(L,j,$,Y,ae){return e.drawElementText(L,j,$,Y,"source",ae)},D=function(L,j,$,Y,ae){return e.drawElementText(L,j,$,Y,"target",ae)},I=function(L){return L.boundingBox(),L[0]._private.bodyBounds},_=function(L){return L.boundingBox(),L[0]._private.labelBounds.main||f},T=function(L){return L.boundingBox(),L[0]._private.labelBounds.source||f},x=function(L){return L.boundingBox(),L[0]._private.labelBounds.target||f},M=function(L,j){return j},A=function(L){return h(I(L))},R=function(L,j,$){var Y=L?L+"-":"";return{x:j.x+$.pstyle(Y+"text-margin-x").pfValue,y:j.y+$.pstyle(Y+"text-margin-y").pfValue}},O=function(L,j,$){var Y=L[0]._private.rscratch;return{x:Y[j],y:Y[$]}},k=function(L){return R("",O(L,"labelX","labelY"),L)},N=function(L){return R("source",O(L,"sourceLabelX","sourceLabelY"),L)},P=function(L){return R("target",O(L,"targetLabelX","targetLabelY"),L)},V=function(L){return p(I(L))},U=function(L){return p(T(L))},F=function(L){return p(x(L))},B=function(L){var j=_(L),$=p(_(L));if(L.isNode()){switch(L.pstyle("text-halign").value){case"left":$.x=-j.w-(j.leftPad||0);break;case"right":$.x=-(j.rightPad||0);break}switch(L.pstyle("text-valign").value){case"top":$.y=-j.h-(j.topPad||0);break;case"bottom":$.y=-(j.botPad||0);break}}return $},G=e.data.eleTxrCache=new Ml(e,{getKey:g,doesEleInvalidateKey:m,drawElement:w,getBoundingBox:I,getRotationPoint:A,getRotationOffset:V,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Q=e.data.lblTxrCache=new Ml(e,{getKey:v,drawElement:E,getBoundingBox:_,getRotationPoint:k,getRotationOffset:B,isVisible:M}),W=e.data.slbTxrCache=new Ml(e,{getKey:y,drawElement:C,getBoundingBox:T,getRotationPoint:N,getRotationOffset:U,isVisible:M}),J=e.data.tlbTxrCache=new Ml(e,{getKey:b,drawElement:D,getBoundingBox:x,getRotationPoint:P,getRotationOffset:F,isVisible:M}),ne=e.data.lyrTxrCache=new d1(e);e.onUpdateEleCalcs(function(L,j){G.invalidateElements(j),Q.invalidateElements(j),W.invalidateElements(j),J.invalidateElements(j),ne.invalidateElements(j);for(var $=0;$<j.length;$++){var Y=j[$]._private;Y.oldBackgroundTimestamp=Y.backgroundTimestamp}});var le=function(L){for(var j=0;j<L.length;j++)ne.enqueueElementRefinement(L[j].ele)};G.onDequeue(le),Q.onDequeue(le),W.onDequeue(le),J.onDequeue(le),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:v,getSourceLabelKey:y,getTargetLabelKey:b,drawElement:w,drawLabel:E,drawSourceLabel:C,drawTargetLabel:D,getElementBox:I,getLabelBox:_,getSourceLabelBox:T,getTargetLabelBox:x,getElementRotationPoint:A,getElementRotationOffset:V,getLabelRotationPoint:k,getSourceLabelRotationPoint:N,getTargetLabelRotationPoint:P,getLabelRotationOffset:B,getSourceLabelRotationOffset:U,getTargetLabelRotationOffset:F})}Ge.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[Ge.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[Ge.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[Ge.SELECT_BOX]=e;break;case"gc":n.data.gc=!0;break}};var D$=typeof Path2D<"u";Ge.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Ge.usePaths=function(){return D$&&this.pathsEnabled};Ge.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Ge.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Ge.makeOffscreenCanvas=function(t,e){var n;if((typeof OffscreenCanvas>"u"?"undefined":en(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(t,e);else{var r=this.cy.window(),i=r.document;n=i.createElement("canvas"),n.width=t,n.height=e}return n};[f1,pi,Pi,fb,Ra,So,Hn,m1,_o,ec,C1].forEach(function(t){Me(Ge,t)});var E$=[{name:"null",impl:Xx},{name:"base",impl:u1},{name:"canvas",impl:w$}],C$=[{type:"layout",extensions:ZH},{type:"renderer",extensions:E$}],S1={},_1={};function T1(t,e,n){var r=n,i=function(I){ft("Can not register `"+e+"` for `"+t+"` since `"+I+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Hl.prototype[e])return i(e);Hl.prototype[e]=n}else if(t==="collection"){if(wn.prototype[e])return i(e);wn.prototype[e]=n}else if(t==="layout"){for(var o=function(I){this.options=I,n.call(this,I),tt(this._private)||(this._private={}),this._private.cy=I.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var D=this.options;if(D&&D.animate){var I=this.animations;if(I)for(var _=0;_<I.length;_++)I[_].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var d=function(I){return I._private.cy},f={addEventFields:function(I,_){_.layout=I,_.cy=d(I),_.target=I},bubble:function(){return!0},parent:function(I){return d(I)}};Me(a,{createEmitter:function(){return this._private.emitter=new Nh(f,this),this},emitter:function(){return this._private.emitter},on:function(I,_){return this.emitter().on(I,_),this},one:function(I,_){return this.emitter().one(I,_),this},once:function(I,_){return this.emitter().one(I,_),this},removeListener:function(I,_){return this.emitter().removeListener(I,_),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(I,_){return this.emitter().emit(I,_),this}}),dt.eventAliasesOn(a),r=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=x1("renderer","base"),p=h.prototype,m=n,g=n.prototype,v=function(){h.apply(this,arguments),m.apply(this,arguments)},y=v.prototype;for(var b in p){var w=p[b],E=g[b]!=null;if(E)return i(b);y[b]=w}for(var C in g)y[C]=g[C];p.clientFunctions.forEach(function(D){y[D]=y[D]||function(){_t("Renderer does not implement `renderer."+D+"()` on its prototype")}}),r=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return _t(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return GT({map:S1,keys:[t,e],value:r})}function x1(t,e){return WT({map:S1,keys:[t,e]})}function I$(t,e,n,r,i){return GT({map:_1,keys:[t,e,n,r],value:i})}function S$(t,e,n,r){return WT({map:_1,keys:[t,e,n,r]})}var U0=function(){if(arguments.length===2)return x1.apply(null,arguments);if(arguments.length===3)return T1.apply(null,arguments);if(arguments.length===4)return S$.apply(null,arguments);if(arguments.length===5)return I$.apply(null,arguments);_t("Invalid extension access syntax")};Hl.prototype.extension=U0;C$.forEach(function(t){t.extensions.forEach(function(e){T1(t.type,e.name,e.impl)})});var Dh=function(){if(!(this instanceof Dh))return new Dh;this.length=0},Ma=Dh.prototype;Ma.instanceString=function(){return"stylesheet"};Ma.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Ma.css=function(t,e){var n=this.length-1;if(Ie(t))this[n].properties.push({name:t,value:e});else if(tt(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(s!=null){var u=ln.properties[a]||ln.properties[Eh(a)];if(u!=null){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this};Ma.style=Ma.css;Ma.generateStyle=function(t){var e=new ln(t);return this.appendToStyle(e)};Ma.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var _$="3.33.1",Do=function(e){if(e===void 0&&(e={}),tt(e))return new Hl(e);if(Ie(e))return U0.apply(U0,arguments)};Do.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Do),t.apply(null,e),this};Do.warnings=function(t){return ex(t)};Do.version=_$;Do.stylesheet=Do.Stylesheet=Dh;var T$=["cyContainer"],jh=class t{container;inputs=ti.required();cy;queues=new Map;wal=new Map;constructor(){Qo(()=>{let e=this.inputs();if(e){if(e.name.toLowerCase().includes("wal delayed")){let n=e.name.toLowerCase().replace("wal delayed","").trim();this.wal.set(n,e.size)}this.queues.set(e.name,e.size),this.updateNodeValues()}})}ngAfterViewInit(){this.initGraph()}initGraph(){this.cy=Do({container:this.container.nativeElement,style:[{selector:"node",style:{"background-color":"#2a323c",label:"data(label)",color:"#fff","text-valign":"center","text-halign":"center",width:"75px",shape:"round-rectangle","font-size":"12px"}},{selector:"edge",style:{width:2,"line-color":"data(color)","target-arrow-color":"data(color)","target-arrow-shape":"triangle","curve-style":"bezier",label:"data(value)",color:"data(color)","font-weight":"bold","text-background-opacity":.8,"text-background-color":"#1a1a1a","text-background-padding":"2px"}},{selector:":parent",style:{"background-opacity":.1,"border-color":"#555",label:"data(id)"}},{selector:"node.rotate",style:{"text-rotation":1.6,width:"20px",height:"80px"}},{selector:"edge.rotate",style:{"target-endpoint":"0% -50%","text-rotation":1.6}},{selector:"edge.no-label",style:{"line-color":"grey","target-arrow-color":"gray",label:"","text-background-opacity":0}},{selector:"node.database",style:{"background-image":"assets/database.png","background-fit":"contain","background-clip":"none",width:50,height:50,label:"data(label)","background-opacity":0,shape:"rectangle"}},{selector:"node.save",style:{"background-image":"assets/save.png","background-fit":"contain","background-clip":"none",width:40,height:40,label:"data(label)","background-opacity":0,shape:"rectangle"}},{selector:"node.in",style:{"background-image":"assets/in.png","background-fit":"contain","background-clip":"none",width:30,height:30,label:"data(label)","background-opacity":0,shape:"round-rectangle"}}],elements:this.getInitialElements(),layout:{name:"preset"}})}updateNodeValues(){if(!this.cy)return;let e={"Sink Input":"edge-sink-timer","Time Annotation -> WAL":"edge-timer-wal","WAL -> Engines":"edge-wal-persister","Persister mongodb":"edge-persister1","Persister postgres":"edge-persister2","Persister neo4j":"edge-persister3","Definition-0-Document test":"edge-nativer0","Definition-1-Relational test":"edge-nativer1","Definition-2-Graph test":"edge-nativer2"};this.cy.batch(()=>{this.queues.forEach((r,i)=>{let o=e[i];if(!o)return;let a=this.cy?.getElementById(o);a&&(a.data("value",this.formatNumber(r)),a.data("color",this.getQueueColor(r)))});let n=this.cy?.getElementById("edge-wal-delay");if(n){let r=Array.from(this.wal.values()).reduce((i,o)=>i+o,0);n.data("value",this.formatNumber(r)),n.data("color",this.getQueueColor(r))}})}getInitialElements(){let e=0,n=200,r=150,i=200,o=e+r*3,a=e+r*4,s=e+r*5,u=i+200,l=u+100;return[{data:{id:"sink",label:"Sink"},position:{x:e,y:n}},{data:{id:"sinkLogo",label:""},position:{x:e-40,y:n},classes:"in"},{data:{id:"timer",label:"Timer"},position:{x:e+r,y:n}},{data:{id:"wal",label:"WAL"},position:{x:e+r*2,y:n}},{data:{id:"walBuffer",label:"WAL Delay"},position:{x:e+r*2,y:50},classes:"save"},{data:{id:"persister",label:"Persister"},position:{x:o,y:n}},{data:{id:"persister1",label:"Mongo"},position:{x:o-50,y:u},classes:"database"},{data:{id:"persister2",label:"Postgres"},position:{x:o,y:u},classes:"database"},{data:{id:"persister3",label:"Neo4j"},position:{x:o+50,y:u},classes:"database"},{data:{id:"nativer",label:"Nativer"},position:{x:a,y:n}},{data:{id:"nativer0",label:"Definition 0"},position:{x:a-50,y:u},classes:"rotate"},{data:{id:"nativer1",label:"Definition 1"},position:{x:a,y:u},classes:"rotate"},{data:{id:"nativer2",label:"Definition 2"},position:{x:a+50,y:u},classes:"rotate"},{data:{id:"nativer0engine",label:"Mongo"},position:{x:a-50,y:l},classes:"database"},{data:{id:"nativer1engine",label:"Postgres"},position:{x:a,y:l},classes:"database"},{data:{id:"nativer2engine",label:"Neo4j"},position:{x:a+50,y:l},classes:"database"},{data:{id:"end",label:"Poly"},position:{x:s,y:n}},{data:{id:"endLogo",label:""},position:{x:s+40,y:n},classes:"in"},{data:{id:"edge-sink-timer",source:"sink",target:"timer",value:"0",color:"#fff"}},{data:{id:"edge-timer-wal",source:"timer",target:"wal",value:"0",color:"#fff"}},{data:{id:"edge-wal-delay",source:"wal",target:"walBuffer",value:"0",color:"#fff"}},{data:{id:"edge-wal-delay-back",source:"walBuffer",target:"wal",value:" ",color:"#fff"}},{data:{id:"edge-wal-persister",source:"wal",target:"persister",value:"0",color:"#fff"}},{data:{id:"edge-persister1",source:"persister",target:"persister1",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-persister2",source:"persister",target:"persister2",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-persister3",source:"persister",target:"persister3",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-persister-nativer",source:"persister",target:"nativer",value:"0",color:"#fff"},classes:"no-label"},{data:{id:"edge-nativer0",source:"nativer",target:"nativer0",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-nativer1",source:"nativer",target:"nativer1",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-nativer2",source:"nativer",target:"nativer2",value:"0",color:"#fff"},classes:"rotate"},{data:{id:"edge-nativer0engine",source:"nativer0",target:"nativer0engine",value:"0",color:"#fff"},classes:"rotate no-label"},{data:{id:"edge-nativer1engine",source:"nativer1",target:"nativer1engine",value:"0",color:"#fff"},classes:"rotate no-label"},{data:{id:"edge-nativer2engine",source:"nativer2",target:"nativer2engine",value:"0",color:"#fff"},classes:"rotate no-label"},{data:{id:"edge-nativer-poly",source:"nativer",target:"end",value:"0",color:"#fff"},classes:"no-label"}]}getQueueColor(e){return e>1e3?"#f87272":e>500?"#fbbd23":"#36d399"}formatNumber(e){return e.toLocaleString("en-US").replace(/,/g,"'")}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-cyto"]],viewQuery:function(n,r){if(n&1&&Hd(T$,5),n&2){let i;kv(i=Pv())&&(r.container=i.first)}},inputs:{inputs:[1,"inputs"]},decls:7,vars:0,consts:[["cyContainer",""],[1,"card","bg-base-200","shadow-xl","border","border-base-300"],[1,"card-body","p-0"],[1,"flex","justify-between","items-center","p-4","border-b","border-base-300"],[1,"card-title","text-sm","uppercase","tracking-widest","opacity-70"],[2,"width","100%","height","600px","background","#1a1a1a"]],template:function(n,r){n&1&&(Jr(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),me(4," Queue Architecture "),kr()(),Vd(5,"div",5,0),kr()())},encapsulation:2})};function x$(t,e){t&1&&(oe(0,"span",18),gt(1,"span",19)(2,"span",20),re(),oe(3,"span",21),me(4,"CONNECTED"),re())}function M$(t,e){t&1&&(oe(0,"span",18),gt(1,"span",22)(2,"span",23),re(),oe(3,"span",21),me(4,"DISCONNECTED"),re())}function A$(t,e){if(t&1&&gt(0,"span",9),t&2){let n=He();wt("badge-success",n.service.connectedStatistics())("badge-error",!n.service.connectedStatistics())}}function R$(t,e){if(t&1&&gt(0,"span",9),t&2){let n=He();wt("badge-success",n.service.connectedEvents())("badge-error",!n.service.connectedEvents())}}function N$(t,e){if(t&1&&gt(0,"span",9),t&2){let n=He();wt("badge-success",n.service.connectedQueues())("badge-error",!n.service.connectedQueues())}}function O$(t,e){if(t&1&&gt(0,"span",9),t&2){let n=He();wt("badge-success",n.service.connectedThreads())("badge-error",!n.service.connectedThreads())}}var Hh=class t{title=je("dashboard");service=te(xf);activeTab=2;Tab=M1;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Bn({type:t,selectors:[["app-root"]],decls:45,vars:31,consts:[[1,"h-screen","flex","flex-col","bg-black","overflow-hidden"],[1,"flex-none","bg-base-100","border-b","border-white/10","p-2","flex","flex-col","md:flex-row","items-center","gap-4"],[1,"flex","items-center","gap-3","px-4"],[1,"w-8","h-8","bg-primary","rounded-lg","flex","items-center","justify-center","text-primary-content","font-black"],[1,"text-sm","font-bold","uppercase","tracking-widest","leading-none"],[1,"flex","items-center","gap-1","mt-1"],[1,"tabs","tabs-boxed","bg-base-300","p-1"],[1,"tab","tab-sm","gap-2",3,"click"],[1,"badge","badge-xs",3,"badge-success","badge-error"],[1,"badge","badge-xs"],[1,"hidden","lg:flex","ml-auto","items-center","gap-4","pr-4"],[1,"text-right"],[1,"text-[10px]","opacity-40","uppercase"],[1,"text-xs","font-mono"],[1,"grow","overflow-y-auto","custom-scrollbar","p-4","lg:p-6","bg-black"],[1,"max-w-7xl","mx-auto","h-full","grid"],[1,"tab-pane"],[3,"inputs"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-success","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-success"],[1,"text-[10px]","opacity-50","font-mono"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-error","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-error"]],template:function(n,r){n&1&&(oe(0,"main",0)(1,"header",1)(2,"div",2)(3,"div",3),me(4," PS "),re(),oe(5,"div")(6,"h1",4),me(7,"PolyStream"),re(),oe(8,"div",5),jt(9,x$,5,0)(10,M$,5,0),re()()(),oe(11,"div",6)(12,"button",7),Tt("click",function(){return r.activeTab=r.Tab.Stats}),me(13," Statistics "),jt(14,A$,1,4,"span",8),re(),oe(15,"button",7),Tt("click",function(){return r.activeTab=r.Tab.Events}),me(16," Events "),jt(17,R$,1,4,"span",8),re(),oe(18,"button",7),Tt("click",function(){return r.activeTab=r.Tab.Queues}),me(19," Queues "),jt(20,N$,1,4,"span",8),re(),oe(21,"button",7),Tt("click",function(){return r.activeTab=r.Tab.Threads}),me(22," Threads "),jt(23,O$,1,4,"span",8),re(),oe(24,"button",7),Tt("click",function(){return r.activeTab=r.Tab.Roundtrip}),me(25," Roundtrip "),gt(26,"span",9),re()(),oe(27,"div",10)(28,"div",11)(29,"div",12),me(30,"Rust Version"),re(),oe(31,"div",13),me(32,"v1.92.0"),re()()()(),oe(33,"div",14)(34,"div",15)(35,"div",16),gt(36,"app-events",17),re(),oe(37,"div",16),gt(38,"app-cyto",17),re(),oe(39,"div",16),gt(40,"app-statistics",17),re(),oe(41,"div",16),gt(42,"app-threads",17),re(),oe(43,"div",16),gt(44,"app-roundtrip"),re()()()()),n&2&&(ie(9),Ht(r.service.connected()?9:10),ie(3),wt("tab-active",r.activeTab===r.Tab.Stats),ie(2),Ht(r.activeTab===r.Tab.Stats?14:-1),ie(),wt("tab-active",r.activeTab===r.Tab.Events),ie(2),Ht(r.activeTab===r.Tab.Events?17:-1),ie(),wt("tab-active",r.activeTab===r.Tab.Queues),ie(2),Ht(r.activeTab===r.Tab.Queues?20:-1),ie(),wt("tab-active",r.activeTab===r.Tab.Threads),ie(2),Ht(r.activeTab===r.Tab.Threads?23:-1),ie(),wt("tab-active",r.activeTab===r.Tab.Roundtrip),ie(2),wt("badge-primary",r.activeTab===r.Tab.Roundtrip),ie(9),wt("active-tab",r.activeTab===r.Tab.Events),ie(),Ot("inputs",r.service.events()),ie(),wt("active-tab",r.activeTab===r.Tab.Queues),ie(),Ot("inputs",r.service.queues()),ie(),wt("active-tab",r.activeTab===r.Tab.Stats),ie(),Ot("inputs",r.service.$statistics),ie(),wt("active-tab",r.activeTab===r.Tab.Threads),ie(),Ot("inputs",r.service.threads()),ie(),wt("active-tab",r.activeTab===r.Tab.Roundtrip))},dependencies:[XI,Mf,Ff,Lf,jh],styles:['.grid[_ngcontent-%COMP%]{display:grid;grid-template-areas:"stack"}.tab-pane[_ngcontent-%COMP%]{grid-area:stack;opacity:0;transform:translateY(10px);pointer-events:none;visibility:hidden;transition:opacity .3s ease-out,transform .3s ease-out,visibility .3s}.tab-pane.active-tab[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto;visibility:visible}']})},M1=(o=>(o[o.Events=0]="Events",o[o.Queues=1]="Queues",o[o.Stats=2]="Stats",o[o.Roundtrip=3]="Roundtrip",o[o.Threads=4]="Threads",o))(M1||{});cm(Hh,QI).catch(t=>console.error(t));
